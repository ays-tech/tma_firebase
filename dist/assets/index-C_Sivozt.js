var id=Object.defineProperty;var sd=(n,e,t)=>e in n?id(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Xs=(n,e,t)=>sd(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function X(){}function oe(n,e){for(const t in e)n[t]=e[t];return n}function od(n){return!!n&&(typeof n=="object"||typeof n=="function")&&typeof n.then=="function"}function Iu(n){return n()}function wl(){return Object.create(null)}function Pt(n){n.forEach(Iu)}function pr(n){return typeof n=="function"}function Oe(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function ad(n,e){return n!=n?e==e:n!==e}function ld(n){return Object.keys(n).length===0}function ps(n,...e){if(n==null){for(const r of e)r(void 0);return X}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Qr(n){let e;return ps(n,t=>e=t)(),e}function nr(n,e,t){n.$$.on_destroy.push(ps(e,t))}function Ye(n,e,t,r){if(n){const i=Au(n,e,t,r);return n[0](i)}}function Au(n,e,t,r){return n[1]&&r?oe(t.ctx.slice(),n[1](r(e))):t.ctx}function Xe(n,e,t,r){if(n[2]&&r){const i=n[2](r(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(e.dirty.length,i.length);for(let l=0;l<o;l+=1)s[l]=e.dirty[l]|i[l];return s}return e.dirty|i}return e.dirty}function Je(n,e,t,r,i,s){if(i){const o=Au(e,t,r,s);n.p(o,i)}}function Ze(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function ot(n){const e={};for(const t in n)t[0]!=="$"&&(e[t]=n[t]);return e}function yt(n,e){const t={};e=new Set(e);for(const r in n)!e.has(r)&&r[0]!=="$"&&(t[r]=n[r]);return t}function ci(n){return n&&pr(n.destroy)?n.destroy:X}const cd=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function K(n,e){n.appendChild(e)}function j(n,e,t){n.insertBefore(e,t||null)}function U(n){n.parentNode&&n.parentNode.removeChild(n)}function jo(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function J(n){return document.createElement(n)}function _t(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function le(n){return document.createTextNode(n)}function Ee(){return le(" ")}function Fe(){return le("")}function ye(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function C(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}const ud=["width","height"];function Yr(n,e){const t=Object.getOwnPropertyDescriptors(n.__proto__);for(const r in e)e[r]==null?n.removeAttribute(r):r==="style"?n.style.cssText=e[r]:r==="__value"?n.value=n[r]=e[r]:t[r]&&t[r].set&&ud.indexOf(r)===-1?n[r]=e[r]:C(n,r,e[r])}function Zi(n,e){for(const t in e)C(n,t,e[t])}function hd(n,e){Object.keys(e).forEach(t=>{fd(n,t,e[t])})}function fd(n,e,t){const r=e.toLowerCase();r in n?n[r]=typeof n[r]=="boolean"&&t===""?!0:t:e in n?n[e]=typeof n[e]=="boolean"&&t===""?!0:t:C(n,e,t)}function es(n){return/-/.test(n)?hd:Yr}function dd(n){return Array.from(n.childNodes)}function dt(n,e){e=""+e,n.data!==e&&(n.data=e)}function Ke(n,e,t,r){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function pd(n,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:r})}function It(n,e){return new n(e)}let Xr;function qt(n){Xr=n}function ui(){if(!Xr)throw new Error("Function called outside component initialization");return Xr}function ms(n){ui().$$.on_mount.push(n)}function md(n){ui().$$.after_update.push(n)}function Ru(n){ui().$$.on_destroy.push(n)}function gd(){const n=ui();return(e,t,{cancelable:r=!1}={})=>{const i=n.$$.callbacks[e];if(i){const s=pd(e,t,{cancelable:r});return i.slice().forEach(o=>{o.call(n,s)}),!s.defaultPrevented}return!0}}function Ce(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}const Qn=[],Nn=[];let Zn=[];const El=[],Su=Promise.resolve();let fo=!1;function ku(){fo||(fo=!0,Su.then(qo))}function gs(){return ku(),Su}function po(n){Zn.push(n)}const Js=new Set;let Hn=0;function qo(){if(Hn!==0)return;const n=Xr;do{try{for(;Hn<Qn.length;){const e=Qn[Hn];Hn++,qt(e),_d(e.$$)}}catch(e){throw Qn.length=0,Hn=0,e}for(qt(null),Qn.length=0,Hn=0;Nn.length;)Nn.pop()();for(let e=0;e<Zn.length;e+=1){const t=Zn[e];Js.has(t)||(Js.add(t),t())}Zn.length=0}while(Qn.length);for(;El.length;)El.pop()();fo=!1,Js.clear(),qt(n)}function _d(n){if(n.fragment!==null){n.update(),Pt(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(po)}}function yd(n){const e=[],t=[];Zn.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Zn=e}const $i=new Set;let Sn;function Ve(){Sn={r:0,c:[],p:Sn}}function De(){Sn.r||Pt(Sn.c),Sn=Sn.p}function x(n,e){n&&n.i&&($i.delete(n),n.i(e))}function q(n,e,t,r){if(n&&n.o){if($i.has(n))return;$i.add(n),Sn.c.push(()=>{$i.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}function zt(n,e){const t=e.token={};function r(i,s,o,l){if(e.token!==t)return;e.resolved=l;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=l);const u=i&&(e.current=i)(c);let f=!1;e.block&&(e.blocks?e.blocks.forEach((p,m)=>{m!==s&&p&&(Ve(),q(p,1,1,()=>{e.blocks[m]===p&&(e.blocks[m]=null)}),De())}):e.block.d(1),u.c(),x(u,1),u.m(e.mount(),e.anchor),f=!0),e.block=u,e.blocks&&(e.blocks[s]=u),f&&qo()}if(od(n)){const i=ui();if(n.then(s=>{qt(i),r(e.then,1,e.value,s),qt(null)},s=>{if(qt(i),r(e.catch,2,e.error,s),qt(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,n),!0;e.resolved=n}}function hi(n,e,t){const r=e.slice(),{resolved:i}=n;n.current===n.then&&(r[n.value]=i),n.current===n.catch&&(r[n.error]=i),n.block.p(r,t)}function Gt(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function vd(n,e){q(n,1,1,()=>{e.delete(n.key)})}function bd(n,e,t,r,i,s,o,l,c,u,f,p){let m=n.length,v=s.length,A=m;const O={};for(;A--;)O[n[A].key]=A;const k=[],D=new Map,P=new Map,L=[];for(A=v;A--;){const E=p(i,s,A),_=t(E);let w=o.get(_);w?L.push(()=>w.p(E,e)):(w=u(_,E),w.c()),D.set(_,k[A]=w),_ in O&&P.set(_,Math.abs(A-O[_]))}const R=new Set,N=new Set;function z(E){x(E,1),E.m(l,f),o.set(E.key,E),f=E.first,v--}for(;m&&v;){const E=k[v-1],_=n[m-1],w=E.key,T=_.key;E===_?(f=E.first,m--,v--):D.has(T)?!o.has(w)||R.has(w)?z(E):N.has(T)?m--:P.get(w)>P.get(T)?(N.add(w),z(E)):(R.add(T),m--):(c(_,o),m--)}for(;m--;){const E=n[m];D.has(E.key)||c(E,o)}for(;v;)z(k[v-1]);return Pt(L),k}function Le(n,e){const t={},r={},i={$$scope:1};let s=n.length;for(;s--;){const o=n[s],l=e[s];if(l){for(const c in o)c in l||(r[c]=1);for(const c in l)i[c]||(t[c]=l[c],i[c]=1);n[s]=l}else for(const c in o)i[c]=1}for(const o in r)o in t||(t[o]=void 0);return t}function pt(n){return typeof n=="object"&&n!==null?n:{}}function pe(n){n&&n.c()}function fe(n,e,t){const{fragment:r,after_update:i}=n.$$;r&&r.m(e,t),po(()=>{const s=n.$$.on_mount.map(Iu).filter(pr);n.$$.on_destroy?n.$$.on_destroy.push(...s):Pt(s),n.$$.on_mount=[]}),i.forEach(po)}function de(n,e){const t=n.$$;t.fragment!==null&&(yd(t.after_update),Pt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function wd(n,e){n.$$.dirty[0]===-1&&(Qn.push(n),ku(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Ge(n,e,t,r,i,s,o=null,l=[-1]){const c=Xr;qt(n);const u=n.$$={fragment:null,ctx:[],props:s,update:X,not_equal:i,bound:wl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:wl(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let f=!1;if(u.ctx=t?t(n,e.props||{},(p,m,...v)=>{const A=v.length?v[0]:m;return u.ctx&&i(u.ctx[p],u.ctx[p]=A)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](A),f&&wd(n,p)),m}):[],u.update(),f=!0,Pt(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const p=dd(e.target);u.fragment&&u.fragment.l(p),p.forEach(U)}else u.fragment&&u.fragment.c();e.intro&&x(n.$$.fragment),fe(n,e.target,e.anchor),qo()}qt(c)}class We{constructor(){Xs(this,"$$");Xs(this,"$$set")}$destroy(){de(this,1),this.$destroy=X}$on(e,t){if(!pr(t))return X;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!ld(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ed="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ed);const $n=[];function Vn(n,e){return{subscribe:vt(n,e).subscribe}}function vt(n,e=X){let t;const r=new Set;function i(l){if(Oe(n,l)&&(n=l,t)){const c=!$n.length;for(const u of r)u[1](),$n.push(u,n);if(c){for(let u=0;u<$n.length;u+=2)$n[u][0]($n[u+1]);$n.length=0}}}function s(l){i(l(n))}function o(l,c=X){const u=[l,c];return r.add(u),r.size===1&&(t=e(i,s)||X),l(n),()=>{r.delete(u),r.size===0&&t&&(t(),t=null)}}return{set:i,update:s,subscribe:o}}function fi(n,e,t){const r=!Array.isArray(n),i=r?[n]:n;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Vn(t,(o,l)=>{let c=!1;const u=[];let f=0,p=X;const m=()=>{if(f)return;p();const A=e(r?u[0]:u,o,l);s?o(A):p=pr(A)?A:X},v=i.map((A,O)=>ps(A,k=>{u[O]=k,f&=~(1<<O),c&&m()},()=>{f|=1<<O}));return c=!0,m(),function(){Pt(v),p(),c=!1}})}function Td(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,r,i,s,o=[],l="",c=n.split("/");for(c[0]||c.shift();i=c.shift();)t=i[0],t==="*"?(o.push("wild"),l+="/(.*)"):t===":"?(r=i.indexOf("?",1),s=i.indexOf(".",1),o.push(i.substring(1,~r?r:~s?s:i.length)),l+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(l+=(~r?"?":"")+"\\"+i.substring(s))):l+="/"+i;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function Id(n){let e,t,r;const i=[n[2]];var s=n[0];function o(l,c){let u={};for(let f=0;f<i.length;f+=1)u=oe(u,i[f]);return c!==void 0&&c&4&&(u=oe(u,Le(i,[pt(l[2])]))),{props:u}}return s&&(e=It(s,o(n)),e.$on("routeEvent",n[7])),{c(){e&&pe(e.$$.fragment),t=Fe()},m(l,c){e&&fe(e,l,c),j(l,t,c),r=!0},p(l,c){if(c&1&&s!==(s=l[0])){if(e){Ve();const u=e;q(u.$$.fragment,1,0,()=>{de(u,1)}),De()}s?(e=It(s,o(l,c)),e.$on("routeEvent",l[7]),pe(e.$$.fragment),x(e.$$.fragment,1),fe(e,t.parentNode,t)):e=null}else if(s){const u=c&4?Le(i,[pt(l[2])]):{};e.$set(u)}},i(l){r||(e&&x(e.$$.fragment,l),r=!0)},o(l){e&&q(e.$$.fragment,l),r=!1},d(l){l&&U(t),e&&de(e,l)}}}function Ad(n){let e,t,r;const i=[{params:n[1]},n[2]];var s=n[0];function o(l,c){let u={};for(let f=0;f<i.length;f+=1)u=oe(u,i[f]);return c!==void 0&&c&6&&(u=oe(u,Le(i,[c&2&&{params:l[1]},c&4&&pt(l[2])]))),{props:u}}return s&&(e=It(s,o(n)),e.$on("routeEvent",n[6])),{c(){e&&pe(e.$$.fragment),t=Fe()},m(l,c){e&&fe(e,l,c),j(l,t,c),r=!0},p(l,c){if(c&1&&s!==(s=l[0])){if(e){Ve();const u=e;q(u.$$.fragment,1,0,()=>{de(u,1)}),De()}s?(e=It(s,o(l,c)),e.$on("routeEvent",l[6]),pe(e.$$.fragment),x(e.$$.fragment,1),fe(e,t.parentNode,t)):e=null}else if(s){const u=c&6?Le(i,[c&2&&{params:l[1]},c&4&&pt(l[2])]):{};e.$set(u)}},i(l){r||(e&&x(e.$$.fragment,l),r=!0)},o(l){e&&q(e.$$.fragment,l),r=!1},d(l){l&&U(t),e&&de(e,l)}}}function Rd(n){let e,t,r,i;const s=[Ad,Id],o=[];function l(c,u){return c[1]?0:1}return e=l(n),t=o[e]=s[e](n),{c(){t.c(),r=Fe()},m(c,u){o[e].m(c,u),j(c,r,u),i=!0},p(c,[u]){let f=e;e=l(c),e===f?o[e].p(c,u):(Ve(),q(o[f],1,1,()=>{o[f]=null}),De(),t=o[e],t?t.p(c,u):(t=o[e]=s[e](c),t.c()),x(t,1),t.m(r.parentNode,r))},i(c){i||(x(t),i=!0)},o(c){q(t),i=!1},d(c){c&&U(r),o[e].d(c)}}}function Tl(){const n=window.location.href.indexOf("#/");let e=n>-1?window.location.href.substr(n+1):"/";const t=e.indexOf("?");let r="";return t>-1&&(r=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:r}}const zo=Vn(null,function(e){e(Tl());const t=()=>{e(Tl())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}});fi(zo,n=>n.location);fi(zo,n=>n.querystring);const Il=vt(void 0);async function rr(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await gs(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(n.charAt(0)=="#"?"":"#")+n}async function Sd(){await gs(),window.history.back()}function Go(n,e){if(e=Rl(e),!n||!n.tagName||n.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Al(n,e),{update(t){t=Rl(t),Al(n,t)}}}function kd(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Al(n,e){let t=e.href||n.getAttribute("href");if(t&&t.charAt(0)=="/")t="#"+t;else if(!t||t.length<2||t.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+t);n.setAttribute("href",t),n.addEventListener("click",r=>{r.preventDefault(),e.disabled||Pd(r.currentTarget.getAttribute("href"))})}function Rl(n){return n&&typeof n=="string"?{href:n}:n||{}}function Pd(n){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=n}function Cd(n,e,t){let{routes:r={}}=e,{prefix:i=""}=e,{restoreScrollState:s=!1}=e;class o{constructor(N,z){if(!z||typeof z!="function"&&(typeof z!="object"||z._sveltesparouter!==!0))throw Error("Invalid component object");if(!N||typeof N=="string"&&(N.length<1||N.charAt(0)!="/"&&N.charAt(0)!="*")||typeof N=="object"&&!(N instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:E,keys:_}=Td(N);this.path=N,typeof z=="object"&&z._sveltesparouter===!0?(this.component=z.component,this.conditions=z.conditions||[],this.userData=z.userData,this.props=z.props||{}):(this.component=()=>Promise.resolve(z),this.conditions=[],this.props={}),this._pattern=E,this._keys=_}match(N){if(i){if(typeof i=="string")if(N.startsWith(i))N=N.substr(i.length)||"/";else return null;else if(i instanceof RegExp){const w=N.match(i);if(w&&w[0])N=N.substr(w[0].length)||"/";else return null}}const z=this._pattern.exec(N);if(z===null)return null;if(this._keys===!1)return z;const E={};let _=0;for(;_<this._keys.length;){try{E[this._keys[_]]=decodeURIComponent(z[_+1]||"")||null}catch{E[this._keys[_]]=null}_++}return E}async checkConditions(N){for(let z=0;z<this.conditions.length;z++)if(!await this.conditions[z](N))return!1;return!0}}const l=[];r instanceof Map?r.forEach((R,N)=>{l.push(new o(N,R))}):Object.keys(r).forEach(R=>{l.push(new o(R,r[R]))});let c=null,u=null,f={};const p=gd();async function m(R,N){await gs(),p(R,N)}let v=null,A=null;s&&(A=R=>{R.state&&(R.state.__svelte_spa_router_scrollY||R.state.__svelte_spa_router_scrollX)?v=R.state:v=null},window.addEventListener("popstate",A),md(()=>{kd(v)}));let O=null,k=null;const D=zo.subscribe(async R=>{O=R;let N=0;for(;N<l.length;){const z=l[N].match(R.location);if(!z){N++;continue}const E={route:l[N].path,location:R.location,querystring:R.querystring,userData:l[N].userData,params:z&&typeof z=="object"&&Object.keys(z).length?z:null};if(!await l[N].checkConditions(E)){t(0,c=null),k=null,m("conditionsFailed",E);return}m("routeLoading",Object.assign({},E));const _=l[N].component;if(k!=_){_.loading?(t(0,c=_.loading),k=_,t(1,u=_.loadingParams),t(2,f={}),m("routeLoaded",Object.assign({},E,{component:c,name:c.name,params:u}))):(t(0,c=null),k=null);const w=await _();if(R!=O)return;t(0,c=w&&w.default||w),k=_}z&&typeof z=="object"&&Object.keys(z).length?t(1,u=z):t(1,u=null),t(2,f=l[N].props),m("routeLoaded",Object.assign({},E,{component:c,name:c.name,params:u})).then(()=>{Il.set(u)});return}t(0,c=null),k=null,Il.set(void 0)});Ru(()=>{D(),A&&window.removeEventListener("popstate",A)});function P(R){Ce.call(this,n,R)}function L(R){Ce.call(this,n,R)}return n.$$set=R=>{"routes"in R&&t(3,r=R.routes),"prefix"in R&&t(4,i=R.prefix),"restoreScrollState"in R&&t(5,s=R.restoreScrollState)},n.$$.update=()=>{n.$$.dirty&32&&(history.scrollRestoration=s?"manual":"auto")},[c,u,f,r,i,s,P,L]}class Vd extends We{constructor(e){super(),Ge(this,e,Cd,Rd,Oe,{routes:3,prefix:4,restoreScrollState:5})}}var Dd=Object.defineProperty,Nd=(n,e,t)=>e in n?Dd(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Zs=(n,e,t)=>(Nd(n,typeof e!="symbol"?e+"":e,t),t);function Od(n,e){let t;const r=()=>{t!==void 0&&e&&e(t),t=void 0};return[()=>t===void 0?t=n(r):t,r]}class Md{constructor(e,t={}){this.scope=e,this.options=t}print(e,...t){const r=new Date,i=Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(r),{textColor:s,bgColor:o}=this.options,l="font-weight: bold;padding: 0 5px;border-radius:5px";console[e](`%c${i}%c / %c${this.scope}`,`${l};background-color: lightblue;color:black`,"",`${l};${s?`color:${s};`:""}${o?`background-color:${o}`:""}`,...t)}error(...e){this.print("error",...e)}log(...e){this.print("log",...e)}}const Ld=new Md("SDK",{bgColor:"forestgreen",textColor:"white"});let Sl=class{constructor(){Zs(this,"listeners",new Map),Zs(this,"listenersCount",0),Zs(this,"subscribeListeners",[])}clear(){this.listeners.clear(),this.subscribeListeners=[]}get count(){return this.listenersCount+this.subscribeListeners.length}emit(e,...t){this.subscribeListeners.forEach(r=>r({event:e,args:t})),(this.listeners.get(e)||[]).forEach(([r,i])=>{r(...t),i&&this.off(e,r)})}on(e,t,r){let i=this.listeners.get(e);return i||this.listeners.set(e,i=[]),i.push([t,r]),this.listenersCount+=1,()=>this.off(e,t)}off(e,t){const r=this.listeners.get(e)||[];for(let i=0;i<r.length;i+=1)if(t===r[i][0]){r.splice(i,1),this.listenersCount-=1;return}}subscribe(e){return this.subscribeListeners.push(e),()=>this.unsubscribe(e)}unsubscribe(e){for(let t=0;t<this.subscribeListeners.length;t+=1)if(this.subscribeListeners[t]===e){this.subscribeListeners.splice(t,1);return}}};function kl(n,e,t){return window.addEventListener(n,e,t),()=>window.removeEventListener(n,e,t)}function Fd(...n){let e=!1;const t=n.flat(1);return[r=>!e&&t.push(r),()=>{e||(e=!0,t.forEach(r=>r()))},e]}class Wo extends Error{constructor(e,t,r){super(t,{cause:r}),this.type=e,Object.setPrototypeOf(this,Wo.prototype)}}function _s(n,e,t){return new Wo(n,e,t)}const xd="ERR_UNKNOWN_ENV",Bd="ERR_UNEXPECTED_TYPE",Pu="ERR_PARSE";function di(){return _s(Bd,"Value has unexpected type")}let Ho=class{constructor(e,t,r){this.parser=e,this.isOptional=t,this.type=r}parse(e){if(!(this.isOptional&&e===void 0))try{return this.parser(e)}catch(t){throw _s(Pu,`Unable to parse value${this.type?` as ${this.type}`:""}`,t)}}optional(){return this.isOptional=!0,this}};function mr(n,e){return()=>new Ho(n,!1,e)}const on=mr(n=>{if(typeof n=="boolean")return n;const e=String(n);if(e==="1"||e==="true")return!0;if(e==="0"||e==="false")return!1;throw di()},"boolean");function Cu(n,e){const t={};for(const r in n){const i=n[r];if(!i)continue;let s,o;if(typeof i=="function"||"parse"in i)s=r,o=typeof i=="function"?i:i.parse.bind(i);else{const{type:l}=i;s=i.from||r,o=typeof l=="function"?l:l.parse.bind(l)}try{const l=o(e(s));l!==void 0&&(t[r]=l)}catch(l){throw _s(Pu,`Unable to parse field "${r}"`,l)}}return t}function Vu(n){let e=n;if(typeof e=="string"&&(e=JSON.parse(e)),typeof e!="object"||e===null||Array.isArray(e))throw di();return e}function kn(n,e){return new Ho(t=>{const r=Vu(t);return Cu(n,i=>r[i])},!1,e)}const ir=mr(n=>{if(typeof n=="number")return n;if(typeof n=="string"){const e=Number(n);if(!Number.isNaN(e))return e}throw di()},"number"),Pe=mr(n=>{if(typeof n=="string"||typeof n=="number")return n.toString();throw di()},"string");function Ud(n){return kn({eventType:Pe(),eventData:e=>e}).parse(n)}function jd(){["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(n=>{delete window[n]})}function qd(n,e){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:n,eventData:e}),source:window.parent}))}function zd(){[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(n=>{let e=window;n.forEach((t,r,i)=>{if(r===i.length-1){e[t]=qd;return}t in e||(e[t]={}),e=e[t]})})}const Gd={clipboard_text_received:kn({req_id:Pe(),data:n=>n===null?n:Pe().optional().parse(n)}),custom_method_invoked:kn({req_id:Pe(),result:n=>n,error:Pe().optional()}),popup_closed:{parse(n){return kn({button_id:e=>e==null?void 0:Pe().parse(e)}).parse(n??{})}},viewport_changed:kn({height:ir(),width:n=>n==null?window.innerWidth:ir().parse(n),is_state_stable:on(),is_expanded:on()})};function Wd(){const n=new Sl,e=new Sl;e.subscribe(r=>{n.emit("event",{name:r.event,payload:r.args[0]})}),zd();const[,t]=Fd(jd,kl("resize",()=>{e.emit("viewport_changed",{width:window.innerWidth,height:window.innerHeight,is_state_stable:!0,is_expanded:!0})}),kl("message",r=>{if(r.source!==window.parent)return;let i;try{i=Ud(r.data)}catch{return}const{eventType:s,eventData:o}=i,l=Gd[s];try{const c=l?l.parse(o):o;e.emit(...c?[s,c]:[s])}catch(c){Ld.error(`An error occurred processing the "${s}" event from the Telegram application.
Please, file an issue here:
https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose`,i,c)}}),()=>n.clear(),()=>e.clear());return[{on:e.on.bind(e),off:e.off.bind(e),subscribe(r){return n.on("event",r)},unsubscribe(r){n.off("event",r)},get count(){return e.count+n.count}},t]}const[Hd,lw]=Od(n=>{const[e,t]=Wd(),r=e.off.bind(e);return e.off=(i,s)=>{const{count:o}=e;r(i,s),o&&!e.count&&n()},[e,t]},([,n])=>n());function $d(){return Hd()[0]}function Kd(n,e,t){return $d().on(n,e,t)}function Du(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Qd(n){return"external"in n&&Du(n.external)&&"notify"in n.external&&typeof n.external.notify=="function"}function Yd(n){return"TelegramWebviewProxy"in n&&Du(n.TelegramWebviewProxy)&&"postEvent"in n.TelegramWebviewProxy&&typeof n.TelegramWebviewProxy.postEvent=="function"}function Xd(){try{return window.self!==window.top}catch{return!0}}const Jd="https://web.telegram.org";let Zd=Jd;function ep(){return Zd}function Nu(n,e,t){let r={},i;if(!e&&!t?r={}:e&&t?(r=t,i=e):e&&("targetOrigin"in e?r=e:i=e),Xd())return window.parent.postMessage(JSON.stringify({eventType:n,eventData:i}),r.targetOrigin||ep());if(Qd(window)){window.external.notify(JSON.stringify({eventType:n,eventData:i}));return}if(Yd(window)){window.TelegramWebviewProxy.postEvent(n,JSON.stringify(i));return}throw _s(xd,"Unable to determine current environment and possible way to send event. You are probably trying to use Mini Apps method outside the Telegram application environment.")}function tp(n){return/^#[\da-f]{6}$/i.test(n)}function np(n){return/^#[\da-f]{3}$/i.test(n)}function rp(n){const e=n.replace(/\s/g,"").toLowerCase();if(tp(e))return e;if(np(e)){let r="#";for(let i=0;i<3;i+=1)r+=e[1+i].repeat(2);return r}const t=e.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||e.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!t)throw new Error(`Value "${n}" does not satisfy any of known RGB formats.`);return t.slice(1).reduce((r,i)=>{const s=parseInt(i,10).toString(16);return r+(s.length===1?"0":"")+s},"#")}const ip=mr(n=>n instanceof Date?n:new Date(ir().parse(n)*1e3),"Date");function Ou(n,e){return new Ho(t=>{if(typeof t!="string"&&!(t instanceof URLSearchParams))throw di();const r=typeof t=="string"?new URLSearchParams(t):t;return Cu(n,i=>{const s=r.get(i);return s===null?void 0:s})},!1,e)}const sp=kn({id:ir(),type:Pe(),title:Pe(),photoUrl:{type:Pe().optional(),from:"photo_url"},username:Pe().optional()},"Chat").optional(),Pl=kn({addedToAttachmentMenu:{type:on().optional(),from:"added_to_attachment_menu"},allowsWriteToPm:{type:on().optional(),from:"allows_write_to_pm"},firstName:{type:Pe(),from:"first_name"},id:ir(),isBot:{type:on().optional(),from:"is_bot"},isPremium:{type:on().optional(),from:"is_premium"},languageCode:{type:Pe().optional(),from:"language_code"},lastName:{type:Pe().optional(),from:"last_name"},photoUrl:{type:Pe().optional(),from:"photo_url"},username:Pe().optional()},"User").optional();function op(){return Ou({authDate:{type:ip(),from:"auth_date"},canSendAfter:{type:ir().optional(),from:"can_send_after"},chat:sp,chatInstance:{type:Pe().optional(),from:"chat_instance"},chatType:{type:Pe().optional(),from:"chat_type"},hash:Pe(),queryId:{type:Pe().optional(),from:"query_id"},receiver:Pl,startParam:{type:Pe().optional(),from:"start_param"},user:Pl},"InitData")}const ap=mr(n=>rp(Pe().parse(n)),"rgb");function lp(n){return n.replace(/_[a-z]/g,e=>e[1].toUpperCase())}function cp(n){return n.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`)}const up=mr(n=>{const e=ap().optional();return Object.entries(Vu(n)).reduce((t,[r,i])=>(t[lp(r)]=e.parse(i),t),{})},"ThemeParams");function Mu(n){return Ou({botInline:{type:on().optional(),from:"tgWebAppBotInline"},initData:{type:op().optional(),from:"tgWebAppData"},initDataRaw:{type:Pe().optional(),from:"tgWebAppData"},platform:{type:Pe(),from:"tgWebAppPlatform"},showSettings:{type:on().optional(),from:"tgWebAppShowSettings"},startParam:{type:Pe().optional(),from:"tgWebAppStartParam"},themeParams:{type:up(),from:"tgWebAppThemeParams"},version:{type:Pe(),from:"tgWebAppVersion"}}).parse(n)}function Lu(n){return Mu(n.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&"))}function hp(){return Lu(window.location.href)}function fp(){return performance.getEntriesByType("navigation")[0]}function dp(){const n=fp();if(!n)throw new Error("Unable to get first navigation entry.");return Lu(n.name)}function Fu(n){return`telegram-apps/${n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}`}function pp(n,e){sessionStorage.setItem(Fu(n),JSON.stringify(e))}function mp(n){const e=sessionStorage.getItem(Fu(n));try{return e?JSON.parse(e):void 0}catch{}}function gp(){return Mu(mp("launchParams")||"")}function _p(n){return JSON.stringify(Object.fromEntries(Object.entries(n).map(([e,t])=>[cp(e),t])))}function yp(n){const{initDataRaw:e,themeParams:t,platform:r,version:i,showSettings:s,startParam:o,botInline:l}=n,c=new URLSearchParams;return c.set("tgWebAppPlatform",r),c.set("tgWebAppThemeParams",_p(t)),c.set("tgWebAppVersion",i),e&&c.set("tgWebAppData",e),o&&c.set("tgWebAppStartParam",o),typeof s=="boolean"&&c.set("tgWebAppShowSettings",s?"1":"0"),typeof l=="boolean"&&c.set("tgWebAppBotInline",l?"1":"0"),c.toString()}function vp(n){pp("launchParams",yp(n))}function ys(){const n=[];for(const e of[hp,dp,gp])try{const t=e();return vp(t),t}catch(t){n.push(t instanceof Error?t.message:JSON.stringify(t))}throw new Error([`Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?
`,"ðŸ“– Refer to docs for more information:",`https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment
`,"Collected errors:",n.map(e=>`â€” ${e}`)].join(`
`))}var Cl=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,gt=n=>!n||typeof n!="object"||Object.keys(n).length===0,bp=(n,e)=>JSON.stringify(n)===JSON.stringify(e);function xu(n,e){n.forEach(function(t){Array.isArray(t)?xu(t,e):e.push(t)})}function Bu(n){let e=[];return xu(n,e),e}var Uu=(...n)=>Bu(n).filter(Boolean),ju=(n,e)=>{let t={},r=Object.keys(n),i=Object.keys(e);for(let s of r)if(i.includes(s)){let o=n[s],l=e[s];typeof o=="object"&&typeof l=="object"?t[s]=ju(o,l):Array.isArray(o)||Array.isArray(l)?t[s]=Uu(l,o):t[s]=l+" "+o}else t[s]=n[s];for(let s of i)r.includes(s)||(t[s]=e[s]);return t},Vl=n=>!n||typeof n!="string"?n:n.replace(/\s+/g," ").trim();const $o="-";function wp(n){const e=Tp(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;function i(o){const l=o.split($o);return l[0]===""&&l.length!==1&&l.shift(),qu(l,e)||Ep(o)}function s(o,l){const c=t[o]||[];return l&&r[o]?[...c,...r[o]]:c}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function qu(n,e){var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?qu(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join($o);return(o=e.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId}const Dl=/^\[(.+)\]$/;function Ep(n){if(Dl.test(n)){const e=Dl.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function Tp(n){const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return Ap(Object.entries(n.classGroups),t).forEach(([s,o])=>{mo(o,r,s,e)}),r}function mo(n,e,t,r){n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Nl(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(Ip(i)){mo(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{mo(o,Nl(e,s),t,r)})})}function Nl(n,e){let t=n;return e.split($o).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function Ip(n){return n.isThemeGetter}function Ap(n,e){return e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[t,i]}):n}function Rp(n){if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;function i(s,o){t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)}return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}}const zu="!";function Sp(n){const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length;function o(l){const c=[];let u=0,f=0,p;for(let k=0;k<l.length;k++){let D=l[k];if(u===0){if(D===i&&(r||l.slice(k,k+s)===e)){c.push(l.slice(f,k)),f=k+s;continue}if(D==="/"){p=k;continue}}D==="["?u++:D==="]"&&u--}const m=c.length===0?l:l.substring(f),v=m.startsWith(zu),A=v?m.substring(1):m,O=p&&p>f?p-f:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:A,maybePostfixModifierPosition:O}}return t?function(c){return t({className:c,parseClassName:o})}:o}function kp(n){if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e}function Pp(n){return{cache:Rp(n.cacheSize),parseClassName:Sp(n),...wp(n)}}const Cp=/\s+/;function Vp(n,e){const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=new Set;return n.trim().split(Cp).map(o=>{const{modifiers:l,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:f}=t(o);let p=!!f,m=r(p?u.substring(0,f):u);if(!m){if(!p)return{isTailwindClass:!1,originalClassName:o};if(m=r(u),!m)return{isTailwindClass:!1,originalClassName:o};p=!1}const v=kp(l).join(":");return{isTailwindClass:!0,modifierId:c?v+zu:v,classGroupId:m,originalClassName:o,hasPostfixModifier:p}}).reverse().filter(o=>{if(!o.isTailwindClass)return!0;const{modifierId:l,classGroupId:c,hasPostfixModifier:u}=o,f=l+c;return s.has(f)?!1:(s.add(f),i(c,u).forEach(p=>s.add(l+p)),!0)}).reverse().map(o=>o.originalClassName).join(" ")}function Dp(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Gu(e))&&(r&&(r+=" "),r+=t);return r}function Gu(n){if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=Gu(n[r]))&&(t&&(t+=" "),t+=e);return t}function go(n,...e){let t,r,i,s=o;function o(c){const u=e.reduce((f,p)=>p(f),n());return t=Pp(u),r=t.cache.get,i=t.cache.set,s=l,l(c)}function l(c){const u=r(c);if(u)return u;const f=Vp(c,t);return i(c,f),f}return function(){return s(Dp.apply(null,arguments))}}function Se(n){const e=t=>t[n]||[];return e.isThemeGetter=!0,e}const Wu=/^\[(?:([a-z-]+):)?(.+)\]$/i,Np=/^\d+\/\d+$/,Op=new Set(["px","full","screen"]),Mp=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Lp=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Fp=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,xp=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Bp=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Ut(n){return Pn(n)||Op.has(n)||Np.test(n)}function rn(n){return gr(n,"length",$p)}function Pn(n){return!!n&&!Number.isNaN(Number(n))}function Ui(n){return gr(n,"number",Pn)}function Fr(n){return!!n&&Number.isInteger(Number(n))}function Up(n){return n.endsWith("%")&&Pn(n.slice(0,-1))}function ue(n){return Wu.test(n)}function sn(n){return Mp.test(n)}const jp=new Set(["length","size","percentage"]);function qp(n){return gr(n,jp,Hu)}function zp(n){return gr(n,"position",Hu)}const Gp=new Set(["image","url"]);function Wp(n){return gr(n,Gp,Qp)}function Hp(n){return gr(n,"",Kp)}function xr(){return!0}function gr(n,e,t){const r=Wu.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1}function $p(n){return Lp.test(n)&&!Fp.test(n)}function Hu(){return!1}function Kp(n){return xp.test(n)}function Qp(n){return Bp.test(n)}function _o(){const n=Se("colors"),e=Se("spacing"),t=Se("blur"),r=Se("brightness"),i=Se("borderColor"),s=Se("borderRadius"),o=Se("borderSpacing"),l=Se("borderWidth"),c=Se("contrast"),u=Se("grayscale"),f=Se("hueRotate"),p=Se("invert"),m=Se("gap"),v=Se("gradientColorStops"),A=Se("gradientColorStopPositions"),O=Se("inset"),k=Se("margin"),D=Se("opacity"),P=Se("padding"),L=Se("saturate"),R=Se("scale"),N=Se("sepia"),z=Se("skew"),E=Se("space"),_=Se("translate"),w=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",ue,e],b=()=>[ue,e],y=()=>["",Ut,rn],H=()=>["auto",Pn,ue],ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],te=()=>["solid","dashed","dotted","double","none"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],Z=()=>["","0",ue],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],he=()=>[Pn,Ui],be=()=>[Pn,ue];return{cacheSize:500,separator:":",theme:{colors:[xr],spacing:[Ut,rn],blur:["none","",sn,ue],brightness:he(),borderColor:[n],borderRadius:["none","","full",sn,ue],borderSpacing:b(),borderWidth:y(),contrast:he(),grayscale:Z(),hueRotate:be(),invert:Z(),gap:b(),gradientColorStops:[n],gradientColorStopPositions:[Up,rn],inset:I(),margin:I(),opacity:he(),padding:b(),saturate:he(),scale:he(),sepia:Z(),skew:be(),space:b(),translate:b()},classGroups:{aspect:[{aspect:["auto","square","video",ue]}],container:["container"],columns:[{columns:[sn]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ne(),ue]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:w()}],"overscroll-x":[{"overscroll-x":w()}],"overscroll-y":[{"overscroll-y":w()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[O]}],"inset-x":[{"inset-x":[O]}],"inset-y":[{"inset-y":[O]}],start:[{start:[O]}],end:[{end:[O]}],top:[{top:[O]}],right:[{right:[O]}],bottom:[{bottom:[O]}],left:[{left:[O]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fr,ue]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ue]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",Fr,ue]}],"grid-cols":[{"grid-cols":[xr]}],"col-start-end":[{col:["auto",{span:["full",Fr,ue]},ue]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[xr]}],"row-start-end":[{row:["auto",{span:[Fr,ue]},ue]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ue]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[P]}],px:[{px:[P]}],py:[{py:[P]}],ps:[{ps:[P]}],pe:[{pe:[P]}],pt:[{pt:[P]}],pr:[{pr:[P]}],pb:[{pb:[P]}],pl:[{pl:[P]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ue,e]}],"min-w":[{"min-w":[ue,e,"min","max","fit"]}],"max-w":[{"max-w":[ue,e,"none","full","min","max","fit","prose",{screen:[sn]},sn]}],h:[{h:[ue,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ue,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ue,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ue,e,"auto","min","max","fit"]}],"font-size":[{text:["base",sn,rn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ui]}],"font-family":[{font:[xr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ue]}],"line-clamp":[{"line-clamp":["none",Pn,Ui]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ut,ue]}],"list-image":[{"list-image":["none",ue]}],"list-style-type":[{list:["none","disc","decimal",ue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[D]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[D]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ut,rn]}],"underline-offset":[{"underline-offset":["auto",Ut,ue]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[D]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ne(),zp]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",qp]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Wp]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[A]}],"gradient-via-pos":[{via:[A]}],"gradient-to-pos":[{to:[A]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[D]}],"border-style":[{border:[...te(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[D]}],"divide-style":[{divide:te()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...te()]}],"outline-offset":[{"outline-offset":[Ut,ue]}],"outline-w":[{outline:[Ut,rn]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[D]}],"ring-offset-w":[{"ring-offset":[Ut,rn]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",sn,Hp]}],"shadow-color":[{shadow:[xr]}],opacity:[{opacity:[D]}],"mix-blend":[{"mix-blend":[...se(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":se()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",sn,ue]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[L]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[D]}],"backdrop-saturate":[{"backdrop-saturate":[L]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ue]}],duration:[{duration:be()}],ease:[{ease:["linear","in","out","in-out",ue]}],delay:[{delay:be()}],animate:[{animate:["none","spin","ping","pulse","bounce",ue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Fr,ue]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ue]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ue]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ue]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Ut,rn,Ui]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}function Yp(n,{cacheSize:e,prefix:t,separator:r,experimentalParseClassName:i,extend:s={},override:o={}}){jr(n,"cacheSize",e),jr(n,"prefix",t),jr(n,"separator",r),jr(n,"experimentalParseClassName",i);for(const l in o)Xp(n[l],o[l]);for(const l in s)Jp(n[l],s[l]);return n}function jr(n,e,t){t!==void 0&&(n[e]=t)}function Xp(n,e){if(e)for(const t in e)jr(n,t,e[t])}function Jp(n,e){if(e)for(const t in e){const r=e[t];r!==void 0&&(n[t]=(n[t]||[]).concat(r))}}function Zp(n,...e){return typeof n=="function"?go(_o,n,...e):go(()=>Yp(_o(),n),...e)}const $u=go(_o);var em={twMerge:!0,twMergeConfig:{},responsiveVariants:!1},Ku=n=>n||void 0,Jr=(...n)=>Ku(Bu(n).filter(Boolean).join(" ")),eo=null,jt={},yo=!1,Br=(...n)=>e=>e.twMerge?((!eo||yo)&&(yo=!1,eo=gt(jt)?$u:Zp({...jt,extend:{theme:jt.theme,classGroups:jt.classGroups,conflictingClassGroupModifiers:jt.conflictingClassGroupModifiers,conflictingClassGroups:jt.conflictingClassGroups,...jt.extend}})),Ku(eo(Jr(n)))):Jr(n),Ol=(n,e)=>{for(let t in e)n.hasOwnProperty(t)?n[t]=Jr(n[t],e[t]):n[t]=e[t];return n},tm=(n,e)=>{let{extend:t=null,slots:r={},variants:i={},compoundVariants:s=[],compoundSlots:o=[],defaultVariants:l={}}=n,c={...em,...e},u=t!=null&&t.base?Jr(t.base,n==null?void 0:n.base):n==null?void 0:n.base,f=t!=null&&t.variants&&!gt(t.variants)?ju(i,t.variants):i,p=t!=null&&t.defaultVariants&&!gt(t.defaultVariants)?{...t.defaultVariants,...l}:l;!gt(c.twMergeConfig)&&!bp(c.twMergeConfig,jt)&&(yo=!0,jt=c.twMergeConfig);let m=gt(t==null?void 0:t.slots),v=gt(r)?{}:{base:Jr(n==null?void 0:n.base,m&&(t==null?void 0:t.base)),...r},A=m?v:Ol({...t==null?void 0:t.slots},gt(v)?{base:n==null?void 0:n.base}:v),O=gt(t==null?void 0:t.compoundVariants)?s:Uu(t==null?void 0:t.compoundVariants,s),k=P=>{if(gt(f)&&gt(r)&&m)return Br(u,P==null?void 0:P.class,P==null?void 0:P.className)(c);if(O&&!Array.isArray(O))throw new TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof O}`);if(o&&!Array.isArray(o))throw new TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof o}`);let L=(b,y,H=[],ne)=>{let te=H;if(typeof y=="string")te=te.concat(Vl(y).split(" ").map(se=>`${b}:${se}`));else if(Array.isArray(y))te=te.concat(y.reduce((se,M)=>se.concat(`${b}:${M}`),[]));else if(typeof y=="object"&&typeof ne=="string"){for(let se in y)if(y.hasOwnProperty(se)&&se===ne){let M=y[se];if(M&&typeof M=="string"){let Z=Vl(M);te[ne]?te[ne]=te[ne].concat(Z.split(" ").map(re=>`${b}:${re}`)):te[ne]=Z.split(" ").map(re=>`${b}:${re}`)}else Array.isArray(M)&&M.length>0&&(te[ne]=M.reduce((Z,re)=>Z.concat(`${b}:${re}`),[]))}}return te},R=(b,y=f,H=null,ne=null)=>{var te;let se=y[b];if(!se||gt(se))return null;let M=(te=ne==null?void 0:ne[b])!=null?te:P==null?void 0:P[b];if(M===null)return null;let Z=Cl(M),re=Array.isArray(c.responsiveVariants)&&c.responsiveVariants.length>0||c.responsiveVariants===!0,he=p==null?void 0:p[b],be=[];if(typeof Z=="object"&&re)for(let[$,xe]of Object.entries(Z)){let Ue=se[xe];if($==="initial"){he=xe;continue}Array.isArray(c.responsiveVariants)&&!c.responsiveVariants.includes($)||(be=L($,Ue,be,H))}let Ae=Z!=null&&typeof Z!="object"?Z:Cl(he),Ct=se[Ae||"false"];return typeof be=="object"&&typeof H=="string"&&be[H]?Ol(be,Ct):be.length>0?(be.push(Ct),be):Ct},N=()=>f?Object.keys(f).map(b=>R(b,f)):null,z=(b,y)=>{if(!f||typeof f!="object")return null;let H=new Array;for(let ne in f){let te=R(ne,f,b,y),se=b==="base"&&typeof te=="string"?te:te&&te[b];se&&(H[H.length]=se)}return H},E={};for(let b in P)P[b]!==void 0&&(E[b]=P[b]);let _=(b,y)=>{var H;let ne=typeof(P==null?void 0:P[b])=="object"?{[b]:(H=P[b])==null?void 0:H.initial}:{};return{...p,...E,...ne,...y}},w=(b=[],y)=>{let H=[];for(let{class:ne,className:te,...se}of b){let M=!0;for(let[Z,re]of Object.entries(se)){let he=_(Z,y);if(Array.isArray(re)){if(!re.includes(he[Z])){M=!1;break}}else if(he[Z]!==re){M=!1;break}}M&&(ne&&H.push(ne),te&&H.push(te))}return H},T=b=>{let y=w(O,b);if(!Array.isArray(y))return y;let H={};for(let ne of y)if(typeof ne=="string"&&(H.base=Br(H.base,ne)(c)),typeof ne=="object")for(let[te,se]of Object.entries(ne))H[te]=Br(H[te],se)(c);return H},I=b=>{if(o.length<1)return null;let y={};for(let{slots:H=[],class:ne,className:te,...se}of o){if(!gt(se)){let M=!0;for(let Z of Object.keys(se)){let re=_(Z,b)[Z];if(re===void 0||(Array.isArray(se[Z])?!se[Z].includes(re):se[Z]!==re)){M=!1;break}}if(!M)continue}for(let M of H)y[M]=y[M]||[],y[M].push([ne,te])}return y};if(!gt(r)||!m){let b={};if(typeof A=="object"&&!gt(A))for(let y of Object.keys(A))b[y]=H=>{var ne,te;return Br(A[y],z(y,H),((ne=T(H))!=null?ne:[])[y],((te=I(H))!=null?te:[])[y],H==null?void 0:H.class,H==null?void 0:H.className)(c)};return b}return Br(u,N(),w(O),P==null?void 0:P.class,P==null?void 0:P.className)(c)},D=()=>{if(!(!f||typeof f!="object"))return Object.keys(f)};return k.variantKeys=D(),k.extend=t,k.base=u,k.slots=A,k.variants=f,k.defaultVariants=p,k.compoundSlots=o,k.compoundVariants=O,k};function nm(n){return Object.keys(n).reduce((e,t)=>n[t]===void 0?e:e+`${t}:${n[t]};`,"")}nm({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function Ml(n){function e(t){return t(n),()=>{}}return{subscribe:e}}const ji=n=>new Proxy(n,{get(e,t,r){return Reflect.get(e,t,r)},ownKeys(e){return Reflect.ownKeys(e).filter(t=>t!=="action")}}),Ll=n=>typeof n=="function";Qu("empty");function Qu(n,e){const{stores:t,action:r,returned:i}=e??{},s=(()=>{if(t&&i)return fi(t,l=>{const c=i(l);if(Ll(c)){const u=(...f)=>ji({...c(...f),[`data-melt-${n}`]:"",action:r??Kn});return u.action=r??Kn,u}return ji({...c,[`data-melt-${n}`]:"",action:r??Kn})});{const l=i,c=l==null?void 0:l();if(Ll(c)){const u=(...f)=>ji({...c(...f),[`data-melt-${n}`]:"",action:r??Kn});return u.action=r??Kn,Ml(u)}return Ml(ji({...c,[`data-melt-${n}`]:"",action:r??Kn}))}})(),o=r??(()=>{});return o.subscribe=s.subscribe,o}function Kn(){}function Yu(n,e,t,r){const i=Array.isArray(e)?e:[e];return i.forEach(s=>n.addEventListener(s,t,r)),()=>{i.forEach(s=>n.removeEventListener(s,t,r))}}function rm(n,...e){const t={};for(const r of Object.keys(n))e.includes(r)||(t[r]=n[r]);return t}function Ko(n){return{...n,get:()=>Qr(n)}}Ko.writable=function(n){const e=vt(n);let t=n;return{subscribe:e.subscribe,set(r){e.set(r),t=r},update(r){const i=r(t);e.set(i),t=i},get(){return t}}};Ko.derived=function(n,e){const t=new Map,r=()=>{const s=Array.isArray(n)?n.map(o=>o.get()):n.get();return e(s)};return{get:r,subscribe:s=>{const o=[];return(Array.isArray(n)?n:[n]).forEach(c=>{o.push(c.subscribe(()=>{s(r())}))}),s(r()),t.set(s,o),()=>{const c=t.get(s);if(c)for(const u of c)u();t.delete(s)}}}};const im={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function sm(n){const e={};return Object.keys(n).forEach(t=>{const r=t,i=n[r];e[r]=Ko(vt(i))}),e}Vn(void 0,n=>{function e(r){n(r),n(void 0)}return Yu(document,"pointerup",e,{passive:!1,capture:!0})});Vn(void 0,n=>{function e(r){r&&r.key===im.ESCAPE&&n(r),n(void 0)}return Yu(document,"keydown",e,{passive:!1})});Vn(!1),Vn(!1),Vn(void 0);const om={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...rm(om,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const am={orientation:"horizontal",decorative:!1},lm=n=>{const e={...am,...n},t=sm(e),{orientation:r,decorative:i}=t;return{elements:{root:Qu("separator",{stores:[r,i],returned:([o,l])=>({role:l?"none":"separator","aria-orientation":o==="vertical"?o:void 0,"aria-hidden":l,"data-orientation":o})})},options:t}};function cm(n,e){const t={};return e.forEach(r=>{t[r]={[`data-${n}-${r}`]:""}}),r=>t[r]}function um(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=r)}return e}function hm(n){return function(e,t){if(t===void 0)return;const r=n[e];r&&r.set(t)}}function fm(n,e){const t=[];return e.builders.forEach(r=>{const i=r.action(n);i&&t.push(i)}),{destroy:()=>{t.forEach(r=>{r.destroy&&r.destroy()})}}}function Fl(n){const e={};return n.forEach(t=>{Object.keys(t).forEach(r=>{r!=="action"&&(e[r]=t[r])})}),e}function dm(n){let e=n[1]?"a":"button",t,r,i=(n[1]?"a":"button")&&to(n);return{c(){i&&i.c(),t=Fe()},m(s,o){i&&i.m(s,o),j(s,t,o),r=!0},p(s,o){s[1],e?Oe(e,s[1]?"a":"button")?(i.d(1),i=to(s),e=s[1]?"a":"button",i.c(),i.m(t.parentNode,t)):i.p(s,o):(i=to(s),e=s[1]?"a":"button",i.c(),i.m(t.parentNode,t))},i(s){r||(x(i,s),r=!0)},o(s){q(i,s),r=!1},d(s){s&&U(t),i&&i.d(s)}}}function pm(n){let e=n[1]?"a":"button",t,r,i=(n[1]?"a":"button")&&no(n);return{c(){i&&i.c(),t=Fe()},m(s,o){i&&i.m(s,o),j(s,t,o),r=!0},p(s,o){s[1],e?Oe(e,s[1]?"a":"button")?(i.d(1),i=no(s),e=s[1]?"a":"button",i.c(),i.m(t.parentNode,t)):i.p(s,o):(i=no(s),e=s[1]?"a":"button",i.c(),i.m(t.parentNode,t))},i(s){r||(x(i,s),r=!0)},o(s){q(i,s),r=!1},d(s){s&&U(t),i&&i.d(s)}}}function to(n){let e,t,r,i,s;const o=n[7].default,l=Ye(o,n,n[6],null);let c=[{type:t=n[1]?void 0:n[2]},{href:n[1]},{tabindex:"0"},n[5],n[4]],u={};for(let f=0;f<c.length;f+=1)u=oe(u,c[f]);return{c(){e=J(n[1]?"a":"button"),l&&l.c(),es(n[1]?"a":"button")(e,u)},m(f,p){j(f,e,p),l&&l.m(e,null),n[29](e),r=!0,i||(s=[ye(e,"click",n[18]),ye(e,"change",n[19]),ye(e,"keydown",n[20]),ye(e,"keyup",n[21]),ye(e,"mouseenter",n[22]),ye(e,"mouseleave",n[23]),ye(e,"mousedown",n[24]),ye(e,"pointerdown",n[25]),ye(e,"mouseup",n[26]),ye(e,"pointerup",n[27])],i=!0)},p(f,p){l&&l.p&&(!r||p&64)&&Je(l,o,f,f[6],r?Xe(o,f[6],p,null):Ze(f[6]),null),es(f[1]?"a":"button")(e,u=Le(c,[(!r||p&6&&t!==(t=f[1]?void 0:f[2]))&&{type:t},(!r||p&2)&&{href:f[1]},{tabindex:"0"},p&32&&f[5],f[4]]))},i(f){r||(x(l,f),r=!0)},o(f){q(l,f),r=!1},d(f){f&&U(e),l&&l.d(f),n[29](null),i=!1,Pt(s)}}}function no(n){let e,t,r,i,s,o;const l=n[7].default,c=Ye(l,n,n[6],null);let u=[{type:t=n[1]?void 0:n[2]},{href:n[1]},{tabindex:"0"},Fl(n[3]),n[5],n[4]],f={};for(let p=0;p<u.length;p+=1)f=oe(f,u[p]);return{c(){e=J(n[1]?"a":"button"),c&&c.c(),es(n[1]?"a":"button")(e,f)},m(p,m){j(p,e,m),c&&c.m(e,null),n[28](e),i=!0,s||(o=[ye(e,"click",n[8]),ye(e,"change",n[9]),ye(e,"keydown",n[10]),ye(e,"keyup",n[11]),ye(e,"mouseenter",n[12]),ye(e,"mouseleave",n[13]),ye(e,"mousedown",n[14]),ye(e,"pointerdown",n[15]),ye(e,"mouseup",n[16]),ye(e,"pointerup",n[17]),ci(r=fm.call(null,e,{builders:n[3]}))],s=!0)},p(p,m){c&&c.p&&(!i||m&64)&&Je(c,l,p,p[6],i?Xe(l,p[6],m,null):Ze(p[6]),null),es(p[1]?"a":"button")(e,f=Le(u,[(!i||m&6&&t!==(t=p[1]?void 0:p[2]))&&{type:t},(!i||m&2)&&{href:p[1]},{tabindex:"0"},m&8&&Fl(p[3]),m&32&&p[5],p[4]])),r&&pr(r.update)&&m&8&&r.update.call(null,{builders:p[3]})},i(p){i||(x(c,p),i=!0)},o(p){q(c,p),i=!1},d(p){p&&U(e),c&&c.d(p),n[28](null),s=!1,Pt(o)}}}function mm(n){let e,t,r,i;const s=[pm,dm],o=[];function l(c,u){return c[3]&&c[3].length?0:1}return e=l(n),t=o[e]=s[e](n),{c(){t.c(),r=Fe()},m(c,u){o[e].m(c,u),j(c,r,u),i=!0},p(c,[u]){let f=e;e=l(c),e===f?o[e].p(c,u):(Ve(),q(o[f],1,1,()=>{o[f]=null}),De(),t=o[e],t?t.p(c,u):(t=o[e]=s[e](c),t.c()),x(t,1),t.m(r.parentNode,r))},i(c){i||(x(t),i=!0)},o(c){q(t),i=!1},d(c){c&&U(r),o[e].d(c)}}}function gm(n,e,t){const r=["href","type","builders","el"];let i=yt(e,r),{$$slots:s={},$$scope:o}=e,{href:l=void 0}=e,{type:c=void 0}=e,{builders:u=[]}=e,{el:f=void 0}=e;const p={"data-button-root":""};function m(M){Ce.call(this,n,M)}function v(M){Ce.call(this,n,M)}function A(M){Ce.call(this,n,M)}function O(M){Ce.call(this,n,M)}function k(M){Ce.call(this,n,M)}function D(M){Ce.call(this,n,M)}function P(M){Ce.call(this,n,M)}function L(M){Ce.call(this,n,M)}function R(M){Ce.call(this,n,M)}function N(M){Ce.call(this,n,M)}function z(M){Ce.call(this,n,M)}function E(M){Ce.call(this,n,M)}function _(M){Ce.call(this,n,M)}function w(M){Ce.call(this,n,M)}function T(M){Ce.call(this,n,M)}function I(M){Ce.call(this,n,M)}function b(M){Ce.call(this,n,M)}function y(M){Ce.call(this,n,M)}function H(M){Ce.call(this,n,M)}function ne(M){Ce.call(this,n,M)}function te(M){Nn[M?"unshift":"push"](()=>{f=M,t(0,f)})}function se(M){Nn[M?"unshift":"push"](()=>{f=M,t(0,f)})}return n.$$set=M=>{e=oe(oe({},e),ot(M)),t(5,i=yt(e,r)),"href"in M&&t(1,l=M.href),"type"in M&&t(2,c=M.type),"builders"in M&&t(3,u=M.builders),"el"in M&&t(0,f=M.el),"$$scope"in M&&t(6,o=M.$$scope)},[f,l,c,u,p,i,o,s,m,v,A,O,k,D,P,L,R,N,z,E,_,w,T,I,b,y,H,ne,te,se]}let _m=class extends We{constructor(e){super(),Ge(this,e,gm,mm,Oe,{href:1,type:2,builders:3,el:0})}};function ym(){return{NAME:"separator",PARTS:["root"]}}function vm(n){const{NAME:e,PARTS:t}=ym(),r=cm(e,t),i={...lm(um(n)),getAttrs:r};return{...i,updateOption:hm(i.options)}}const bm=n=>({builder:n&4}),xl=n=>({builder:n[2]});function wm(n){let e,t,r,i=[n[2],n[4]],s={};for(let o=0;o<i.length;o+=1)s=oe(s,i[o]);return{c(){e=J("div"),Yr(e,s)},m(o,l){j(o,e,l),n[10](e),t||(r=ci(n[2].action(e)),t=!0)},p(o,l){Yr(e,s=Le(i,[l&4&&o[2],l&16&&o[4]]))},i:X,o:X,d(o){o&&U(e),n[10](null),t=!1,r()}}}function Em(n){let e;const t=n[9].default,r=Ye(t,n,n[8],xl);return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s&260)&&Je(r,t,i,i[8],e?Xe(t,i[8],s,bm):Ze(i[8]),xl)},i(i){e||(x(r,i),e=!0)},o(i){q(r,i),e=!1},d(i){r&&r.d(i)}}}function Tm(n){let e,t,r,i;const s=[Em,wm],o=[];function l(c,u){return c[1]?0:1}return e=l(n),t=o[e]=s[e](n),{c(){t.c(),r=Fe()},m(c,u){o[e].m(c,u),j(c,r,u),i=!0},p(c,[u]){let f=e;e=l(c),e===f?o[e].p(c,u):(Ve(),q(o[f],1,1,()=>{o[f]=null}),De(),t=o[e],t?t.p(c,u):(t=o[e]=s[e](c),t.c()),x(t,1),t.m(r.parentNode,r))},i(c){i||(x(t),i=!0)},o(c){q(t),i=!1},d(c){c&&U(r),o[e].d(c)}}}function Im(n,e,t){let r;const i=["orientation","decorative","asChild","el"];let s=yt(e,i),o,{$$slots:l={},$$scope:c}=e,{orientation:u="horizontal"}=e,{decorative:f=!0}=e,{asChild:p=!1}=e,{el:m=void 0}=e;const{elements:{root:v},updateOption:A,getAttrs:O}=vm({orientation:u,decorative:f});nr(n,v,P=>t(7,o=P));const k=O("root");function D(P){Nn[P?"unshift":"push"](()=>{m=P,t(0,m)})}return n.$$set=P=>{e=oe(oe({},e),ot(P)),t(4,s=yt(e,i)),"orientation"in P&&t(5,u=P.orientation),"decorative"in P&&t(6,f=P.decorative),"asChild"in P&&t(1,p=P.asChild),"el"in P&&t(0,m=P.el),"$$scope"in P&&t(8,c=P.$$scope)},n.$$.update=()=>{n.$$.dirty&32&&A("orientation",u),n.$$.dirty&64&&A("decorative",f),n.$$.dirty&128&&t(2,r=o),n.$$.dirty&4&&Object.assign(r,k)},[m,p,r,v,s,u,f,o,c,l,D]}let Am=class extends We{constructor(e){super(),Ge(this,e,Im,Tm,Oe,{orientation:5,decorative:6,asChild:1,el:0})}};function Xu(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Xu(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Rm(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Xu(n))&&(r&&(r+=" "),r+=e);return r}function ts(...n){return $u(Rm(n))}function Zr(n){const e=new Date(n),t=e.getDate().toString().padStart(2,"0"),r=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getFullYear();return`${t}.${r}.${i}`}function Sm(n){let e;const t=n[5].default,r=Ye(t,n,n[8],null);return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s&256)&&Je(r,t,i,i[8],e?Xe(t,i[8],s,null):Ze(i[8]),null)},i(i){e||(x(r,i),e=!0)},o(i){q(r,i),e=!1},d(i){r&&r.d(i)}}}function km(n){let e,t;const r=[{builders:n[3]},{class:ts(Bl({variant:n[1],size:n[2],className:n[0]}))},{type:"button"},n[4]];let i={$$slots:{default:[Sm]},$$scope:{ctx:n}};for(let s=0;s<r.length;s+=1)i=oe(i,r[s]);return e=new _m({props:i}),e.$on("click",n[6]),e.$on("keydown",n[7]),{c(){pe(e.$$.fragment)},m(s,o){fe(e,s,o),t=!0},p(s,[o]){const l=o&31?Le(r,[o&8&&{builders:s[3]},o&7&&{class:ts(Bl({variant:s[1],size:s[2],className:s[0]}))},r[2],o&16&&pt(s[4])]):{};o&256&&(l.$$scope={dirty:o,ctx:s}),e.$set(l)},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function Pm(n,e,t){const r=["class","variant","size","builders"];let i=yt(e,r),{$$slots:s={},$$scope:o}=e,{class:l=void 0}=e,{variant:c="default"}=e,{size:u="default"}=e,{builders:f=[]}=e;function p(v){Ce.call(this,n,v)}function m(v){Ce.call(this,n,v)}return n.$$set=v=>{e=oe(oe({},e),ot(v)),t(4,i=yt(e,r)),"class"in v&&t(0,l=v.class),"variant"in v&&t(1,c=v.variant),"size"in v&&t(2,u=v.size),"builders"in v&&t(3,f=v.builders),"$$scope"in v&&t(8,o=v.$$scope)},[l,c,u,f,i,s,p,m,o]}class fn extends We{constructor(e){super(),Ge(this,e,Pm,km,Oe,{class:0,variant:1,size:2,builders:3})}}const Bl=tm({base:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}});function Cm(n){let e,t,r,i;return{c(){var s,o;e=J("div"),t=J("h1"),t.textContent="Mini Apps Quest",r=Ee(),i=J("p"),i.textContent=`Hello, @${(o=(s=n[0])==null?void 0:s.user)==null?void 0:o.username}!`,C(t,"class","scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl"),C(i,"class","leading-7"),C(e,"class","flex h-screen flex-col items-center justify-center gap-3 text-center")},m(s,o){j(s,e,o),K(e,t),K(e,r),K(e,i)},p:X,i:X,o:X,d(s){s&&U(e)}}}function Vm(n){const{initData:e}=ys();return[e]}class Dm extends We{constructor(e){super(),Ge(this,e,Vm,Cm,Oe,{})}}function Nm(n){let e;return{c(){e=J("div"),e.innerHTML='<h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">About Mini App</h1>',C(e,"class","flex h-screen flex-col items-center justify-center gap-3 text-center")},m(t,r){j(t,e,r)},p:X,i:X,o:X,d(t){t&&U(e)}}}class Om extends We{constructor(e){super(),Ge(this,e,null,Nm,Oe,{})}}function Mm(n){let e;return{c(){e=le("Go Home")},m(t,r){j(t,e,r)},d(t){t&&U(e)}}}function Lm(n){let e,t,r,i,s;return i=new fn({props:{href:"/",$$slots:{default:[Mm]},$$scope:{ctx:n}}}),{c(){e=J("div"),t=J("h1"),t.textContent="404",r=Ee(),pe(i.$$.fragment),C(t,"class","scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl"),C(e,"class","flex h-screen flex-col items-center justify-center gap-3 text-center")},m(o,l){j(o,e,l),K(e,t),K(e,r),fe(i,e,null),s=!0},p(o,[l]){const c={};l&1&&(c.$$scope={dirty:l,ctx:o}),i.$set(c)},i(o){s||(x(i.$$.fragment,o),s=!0)},o(o){q(i.$$.fragment,o),s=!1},d(o){o&&U(e),de(i)}}}class Fm extends We{constructor(e){super(),Ge(this,e,null,Lm,Oe,{})}}var Ul={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},xm=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],l=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Zu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,l=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let m=(l&15)<<2|u>>6,v=u&63;c||(v=64,o||(m=64)),r.push(t[f],t[p],t[m],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ju(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):xm(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||l==null||u==null||p==null)throw new Bm;const m=s<<2|l>>4;if(r.push(m),u!==64){const v=l<<4&240|u>>2;if(r.push(v),p!==64){const A=u<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Bm extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Um=function(n){const e=Ju(n);return Zu.encodeByteArray(e,!0)},ns=function(n){return Um(n).replace(/\./g,"")},jm=function(n){try{return Zu.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=()=>qm().__FIREBASE_DEFAULTS__,Gm=()=>{if(typeof process>"u"||typeof Ul>"u")return;const n=Ul.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Wm=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&jm(n[1]);return e&&JSON.parse(e)},Qo=()=>{try{return zm()||Gm()||Wm()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Hm=n=>{var e,t;return(t=(e=Qo())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},$m=n=>{const e=Hm(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},eh=()=>{var n;return(n=Qo())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ns(JSON.stringify(t)),ns(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xm(){var n;const e=(n=Qo())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jm(){return!Xm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zm(){try{return typeof indexedDB=="object"}catch{return!1}}function eg(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="FirebaseError";class _r extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=tg,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,th.prototype.create)}}class th{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?ng(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new _r(i,l,r)}}function ng(n,e){return n.replace(rg,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const rg=/\{\$([^}]+)}/g;function vo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(jl(s)&&jl(o)){if(!vo(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function jl(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(n){return n&&n._delegate?n._delegate:n}class ei{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Km;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(og(e))try{this.getOrInitializeService({instanceIdentifier:Rn})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Rn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rn){return this.instances.has(e)}getOptions(e=Rn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sg(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rn){return this.component?this.component.multipleInstances?e:Rn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sg(n){return n===Rn?void 0:n}function og(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ig(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(_e||(_e={}));const lg={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},cg=_e.INFO,ug={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},hg=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=ug[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nh{constructor(e){this.name=e,this._logLevel=cg,this._logHandler=hg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const fg=(n,e)=>e.some(t=>n instanceof t);let ql,zl;function dg(){return ql||(ql=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pg(){return zl||(zl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rh=new WeakMap,bo=new WeakMap,ih=new WeakMap,ro=new WeakMap,Yo=new WeakMap;function mg(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(ln(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&rh.set(t,n)}).catch(()=>{}),Yo.set(e,n),e}function gg(n){if(bo.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});bo.set(n,e)}let wo={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bo.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ih.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ln(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _g(n){wo=n(wo)}function yg(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(io(this),e,...t);return ih.set(r,e.sort?e.sort():[e]),ln(r)}:pg().includes(n)?function(...e){return n.apply(io(this),e),ln(rh.get(this))}:function(...e){return ln(n.apply(io(this),e))}}function vg(n){return typeof n=="function"?yg(n):(n instanceof IDBTransaction&&gg(n),fg(n,dg())?new Proxy(n,wo):n)}function ln(n){if(n instanceof IDBRequest)return mg(n);if(ro.has(n))return ro.get(n);const e=vg(n);return e!==n&&(ro.set(n,e),Yo.set(e,n)),e}const io=n=>Yo.get(n);function bg(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),l=ln(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ln(o.result),c.oldVersion,c.newVersion,ln(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const wg=["get","getKey","getAll","getAllKeys","count"],Eg=["put","add","delete","clear"],so=new Map;function Gl(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(so.get(e))return so.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Eg.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||wg.includes(t)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[t](...l),i&&c.done]))[0]};return so.set(e,s),s}_g(n=>({...n,get:(e,t,r)=>Gl(e,t)||n.get(e,t,r),has:(e,t)=>!!Gl(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ig(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Ig(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Eo="@firebase/app",Wl="0.10.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On=new nh("@firebase/app"),Ag="@firebase/app-compat",Rg="@firebase/analytics-compat",Sg="@firebase/analytics",kg="@firebase/app-check-compat",Pg="@firebase/app-check",Cg="@firebase/auth",Vg="@firebase/auth-compat",Dg="@firebase/database",Ng="@firebase/database-compat",Og="@firebase/functions",Mg="@firebase/functions-compat",Lg="@firebase/installations",Fg="@firebase/installations-compat",xg="@firebase/messaging",Bg="@firebase/messaging-compat",Ug="@firebase/performance",jg="@firebase/performance-compat",qg="@firebase/remote-config",zg="@firebase/remote-config-compat",Gg="@firebase/storage",Wg="@firebase/storage-compat",Hg="@firebase/firestore",$g="@firebase/vertexai-preview",Kg="@firebase/firestore-compat",Qg="firebase",Yg="10.12.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="[DEFAULT]",Xg={[Eo]:"fire-core",[Ag]:"fire-core-compat",[Sg]:"fire-analytics",[Rg]:"fire-analytics-compat",[Pg]:"fire-app-check",[kg]:"fire-app-check-compat",[Cg]:"fire-auth",[Vg]:"fire-auth-compat",[Dg]:"fire-rtdb",[Ng]:"fire-rtdb-compat",[Og]:"fire-fn",[Mg]:"fire-fn-compat",[Lg]:"fire-iid",[Fg]:"fire-iid-compat",[xg]:"fire-fcm",[Bg]:"fire-fcm-compat",[Ug]:"fire-perf",[jg]:"fire-perf-compat",[qg]:"fire-rc",[zg]:"fire-rc-compat",[Gg]:"fire-gcs",[Wg]:"fire-gcs-compat",[Hg]:"fire-fst",[Kg]:"fire-fst-compat",[$g]:"fire-vertex","fire-js":"fire-js",[Qg]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Map,Jg=new Map,Io=new Map;function Hl(n,e){try{n.container.addComponent(e)}catch(t){On.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function is(n){const e=n.name;if(Io.has(e))return On.debug(`There were multiple attempts to register component ${e}.`),!1;Io.set(e,n);for(const t of rs.values())Hl(t,n);for(const t of Jg.values())Hl(t,n);return!0}function Zg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cn=new th("app","Firebase",e_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=Yg;function sh(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:To,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw cn.create("bad-app-name",{appName:String(i)});if(t||(t=eh()),!t)throw cn.create("no-options");const s=rs.get(i);if(s){if(vo(t,s.options)&&vo(r,s.config))return s;throw cn.create("duplicate-app",{appName:i})}const o=new ag(i);for(const c of Io.values())o.addComponent(c);const l=new t_(t,r,o);return rs.set(i,l),l}function r_(n=To){const e=rs.get(n);if(!e&&n===To&&eh())return sh();if(!e)throw cn.create("no-app",{appName:n});return e}function er(n,e,t){var r;let i=(r=Xg[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),On.warn(l.join(" "));return}is(new ei(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="firebase-heartbeat-database",s_=1,ti="firebase-heartbeat-store";let oo=null;function oh(){return oo||(oo=bg(i_,s_,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ti)}catch(t){console.warn(t)}}}}).catch(n=>{throw cn.create("idb-open",{originalErrorMessage:n.message})})),oo}async function o_(n){try{const t=(await oh()).transaction(ti),r=await t.objectStore(ti).get(ah(n));return await t.done,r}catch(e){if(e instanceof _r)On.warn(e.message);else{const t=cn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});On.warn(t.message)}}}async function $l(n,e){try{const r=(await oh()).transaction(ti,"readwrite");await r.objectStore(ti).put(e,ah(n)),await r.done}catch(t){if(t instanceof _r)On.warn(t.message);else{const r=cn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});On.warn(r.message)}}}function ah(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=1024,l_=30*24*60*60*1e3;class c_{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new h_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Kl();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=l_}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Kl(),{heartbeatsToSend:r,unsentEntries:i}=u_(this._heartbeatsCache.heartbeats),s=ns(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Kl(){return new Date().toISOString().substring(0,10)}function u_(n,e=a_){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Ql(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Ql(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class h_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zm()?eg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await o_(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return $l(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return $l(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ql(n){return ns(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(n){is(new ei("platform-logger",e=>new Tg(e),"PRIVATE")),is(new ei("heartbeat",e=>new c_(e),"PRIVATE")),er(Eo,Wl,n),er(Eo,Wl,"esm2017"),er("fire-js","")}f_("");var d_="firebase",p_="10.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er(d_,p_,"app");var Yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dn,lh;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function w(){}w.prototype=_.prototype,E.D=_.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(T,I,b){for(var y=Array(arguments.length-2),H=2;H<arguments.length;H++)y[H-2]=arguments[H];return _.prototype[I].apply(T,y)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,_,w){w||(w=0);var T=Array(16);if(typeof _=="string")for(var I=0;16>I;++I)T[I]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(I=0;16>I;++I)T[I]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=E.g[0],w=E.g[1],I=E.g[2];var b=E.g[3],y=_+(b^w&(I^b))+T[0]+3614090360&4294967295;_=w+(y<<7&4294967295|y>>>25),y=b+(I^_&(w^I))+T[1]+3905402710&4294967295,b=_+(y<<12&4294967295|y>>>20),y=I+(w^b&(_^w))+T[2]+606105819&4294967295,I=b+(y<<17&4294967295|y>>>15),y=w+(_^I&(b^_))+T[3]+3250441966&4294967295,w=I+(y<<22&4294967295|y>>>10),y=_+(b^w&(I^b))+T[4]+4118548399&4294967295,_=w+(y<<7&4294967295|y>>>25),y=b+(I^_&(w^I))+T[5]+1200080426&4294967295,b=_+(y<<12&4294967295|y>>>20),y=I+(w^b&(_^w))+T[6]+2821735955&4294967295,I=b+(y<<17&4294967295|y>>>15),y=w+(_^I&(b^_))+T[7]+4249261313&4294967295,w=I+(y<<22&4294967295|y>>>10),y=_+(b^w&(I^b))+T[8]+1770035416&4294967295,_=w+(y<<7&4294967295|y>>>25),y=b+(I^_&(w^I))+T[9]+2336552879&4294967295,b=_+(y<<12&4294967295|y>>>20),y=I+(w^b&(_^w))+T[10]+4294925233&4294967295,I=b+(y<<17&4294967295|y>>>15),y=w+(_^I&(b^_))+T[11]+2304563134&4294967295,w=I+(y<<22&4294967295|y>>>10),y=_+(b^w&(I^b))+T[12]+1804603682&4294967295,_=w+(y<<7&4294967295|y>>>25),y=b+(I^_&(w^I))+T[13]+4254626195&4294967295,b=_+(y<<12&4294967295|y>>>20),y=I+(w^b&(_^w))+T[14]+2792965006&4294967295,I=b+(y<<17&4294967295|y>>>15),y=w+(_^I&(b^_))+T[15]+1236535329&4294967295,w=I+(y<<22&4294967295|y>>>10),y=_+(I^b&(w^I))+T[1]+4129170786&4294967295,_=w+(y<<5&4294967295|y>>>27),y=b+(w^I&(_^w))+T[6]+3225465664&4294967295,b=_+(y<<9&4294967295|y>>>23),y=I+(_^w&(b^_))+T[11]+643717713&4294967295,I=b+(y<<14&4294967295|y>>>18),y=w+(b^_&(I^b))+T[0]+3921069994&4294967295,w=I+(y<<20&4294967295|y>>>12),y=_+(I^b&(w^I))+T[5]+3593408605&4294967295,_=w+(y<<5&4294967295|y>>>27),y=b+(w^I&(_^w))+T[10]+38016083&4294967295,b=_+(y<<9&4294967295|y>>>23),y=I+(_^w&(b^_))+T[15]+3634488961&4294967295,I=b+(y<<14&4294967295|y>>>18),y=w+(b^_&(I^b))+T[4]+3889429448&4294967295,w=I+(y<<20&4294967295|y>>>12),y=_+(I^b&(w^I))+T[9]+568446438&4294967295,_=w+(y<<5&4294967295|y>>>27),y=b+(w^I&(_^w))+T[14]+3275163606&4294967295,b=_+(y<<9&4294967295|y>>>23),y=I+(_^w&(b^_))+T[3]+4107603335&4294967295,I=b+(y<<14&4294967295|y>>>18),y=w+(b^_&(I^b))+T[8]+1163531501&4294967295,w=I+(y<<20&4294967295|y>>>12),y=_+(I^b&(w^I))+T[13]+2850285829&4294967295,_=w+(y<<5&4294967295|y>>>27),y=b+(w^I&(_^w))+T[2]+4243563512&4294967295,b=_+(y<<9&4294967295|y>>>23),y=I+(_^w&(b^_))+T[7]+1735328473&4294967295,I=b+(y<<14&4294967295|y>>>18),y=w+(b^_&(I^b))+T[12]+2368359562&4294967295,w=I+(y<<20&4294967295|y>>>12),y=_+(w^I^b)+T[5]+4294588738&4294967295,_=w+(y<<4&4294967295|y>>>28),y=b+(_^w^I)+T[8]+2272392833&4294967295,b=_+(y<<11&4294967295|y>>>21),y=I+(b^_^w)+T[11]+1839030562&4294967295,I=b+(y<<16&4294967295|y>>>16),y=w+(I^b^_)+T[14]+4259657740&4294967295,w=I+(y<<23&4294967295|y>>>9),y=_+(w^I^b)+T[1]+2763975236&4294967295,_=w+(y<<4&4294967295|y>>>28),y=b+(_^w^I)+T[4]+1272893353&4294967295,b=_+(y<<11&4294967295|y>>>21),y=I+(b^_^w)+T[7]+4139469664&4294967295,I=b+(y<<16&4294967295|y>>>16),y=w+(I^b^_)+T[10]+3200236656&4294967295,w=I+(y<<23&4294967295|y>>>9),y=_+(w^I^b)+T[13]+681279174&4294967295,_=w+(y<<4&4294967295|y>>>28),y=b+(_^w^I)+T[0]+3936430074&4294967295,b=_+(y<<11&4294967295|y>>>21),y=I+(b^_^w)+T[3]+3572445317&4294967295,I=b+(y<<16&4294967295|y>>>16),y=w+(I^b^_)+T[6]+76029189&4294967295,w=I+(y<<23&4294967295|y>>>9),y=_+(w^I^b)+T[9]+3654602809&4294967295,_=w+(y<<4&4294967295|y>>>28),y=b+(_^w^I)+T[12]+3873151461&4294967295,b=_+(y<<11&4294967295|y>>>21),y=I+(b^_^w)+T[15]+530742520&4294967295,I=b+(y<<16&4294967295|y>>>16),y=w+(I^b^_)+T[2]+3299628645&4294967295,w=I+(y<<23&4294967295|y>>>9),y=_+(I^(w|~b))+T[0]+4096336452&4294967295,_=w+(y<<6&4294967295|y>>>26),y=b+(w^(_|~I))+T[7]+1126891415&4294967295,b=_+(y<<10&4294967295|y>>>22),y=I+(_^(b|~w))+T[14]+2878612391&4294967295,I=b+(y<<15&4294967295|y>>>17),y=w+(b^(I|~_))+T[5]+4237533241&4294967295,w=I+(y<<21&4294967295|y>>>11),y=_+(I^(w|~b))+T[12]+1700485571&4294967295,_=w+(y<<6&4294967295|y>>>26),y=b+(w^(_|~I))+T[3]+2399980690&4294967295,b=_+(y<<10&4294967295|y>>>22),y=I+(_^(b|~w))+T[10]+4293915773&4294967295,I=b+(y<<15&4294967295|y>>>17),y=w+(b^(I|~_))+T[1]+2240044497&4294967295,w=I+(y<<21&4294967295|y>>>11),y=_+(I^(w|~b))+T[8]+1873313359&4294967295,_=w+(y<<6&4294967295|y>>>26),y=b+(w^(_|~I))+T[15]+4264355552&4294967295,b=_+(y<<10&4294967295|y>>>22),y=I+(_^(b|~w))+T[6]+2734768916&4294967295,I=b+(y<<15&4294967295|y>>>17),y=w+(b^(I|~_))+T[13]+1309151649&4294967295,w=I+(y<<21&4294967295|y>>>11),y=_+(I^(w|~b))+T[4]+4149444226&4294967295,_=w+(y<<6&4294967295|y>>>26),y=b+(w^(_|~I))+T[11]+3174756917&4294967295,b=_+(y<<10&4294967295|y>>>22),y=I+(_^(b|~w))+T[2]+718787259&4294967295,I=b+(y<<15&4294967295|y>>>17),y=w+(b^(I|~_))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(I+(y<<21&4294967295|y>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var w=_-this.blockSize,T=this.B,I=this.h,b=0;b<_;){if(I==0)for(;b<=w;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<_;)if(T[I++]=E.charCodeAt(b++),I==this.blockSize){i(this,T),I=0;break}}else for(;b<_;)if(T[I++]=E[b++],I==this.blockSize){i(this,T),I=0;break}}this.h=I,this.o+=_},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var w=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=w&255,w/=256;for(this.u(E),E=Array(16),_=w=0;4>_;++_)for(var T=0;32>T;T+=8)E[w++]=this.g[_]>>>T&255;return E};function s(E,_){var w=l;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=_(E)}function o(E,_){this.h=_;for(var w=[],T=!0,I=E.length-1;0<=I;I--){var b=E[I]|0;T&&b==_||(w[I]=b,T=!1)}this.g=w}var l={};function c(E){return-128<=E&&128>E?s(E,function(_){return new o([_|0],0>_?-1:0)}):new o([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return k(u(-E));for(var _=[],w=1,T=0;E>=w;T++)_[T]=E/w|0,w*=4294967296;return new o(_,0)}function f(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return k(f(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(_,8)),T=p,I=0;I<E.length;I+=8){var b=Math.min(8,E.length-I),y=parseInt(E.substring(I,I+b),_);8>b?(b=u(Math.pow(_,b)),T=T.j(b).add(u(y))):(T=T.j(w),T=T.add(u(y)))}return T}var p=c(0),m=c(1),v=c(16777216);n=o.prototype,n.m=function(){if(O(this))return-k(this).m();for(var E=0,_=1,w=0;w<this.g.length;w++){var T=this.i(w);E+=(0<=T?T:4294967296+T)*_,_*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A(this))return"0";if(O(this))return"-"+k(this).toString(E);for(var _=u(Math.pow(E,6)),w=this,T="";;){var I=R(w,_).g;w=D(w,I.j(_));var b=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=I,A(w))return b+T;for(;6>b.length;)b="0"+b;T=b+T}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function A(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function O(E){return E.h==-1}n.l=function(E){return E=D(this,E),O(E)?-1:A(E)?0:1};function k(E){for(var _=E.g.length,w=[],T=0;T<_;T++)w[T]=~E.g[T];return new o(w,~E.h).add(m)}n.abs=function(){return O(this)?k(this):this},n.add=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],T=0,I=0;I<=_;I++){var b=T+(this.i(I)&65535)+(E.i(I)&65535),y=(b>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);T=y>>>16,b&=65535,y&=65535,w[I]=y<<16|b}return new o(w,w[w.length-1]&-2147483648?-1:0)};function D(E,_){return E.add(k(_))}n.j=function(E){if(A(this)||A(E))return p;if(O(this))return O(E)?k(this).j(k(E)):k(k(this).j(E));if(O(E))return k(this.j(k(E)));if(0>this.l(v)&&0>E.l(v))return u(this.m()*E.m());for(var _=this.g.length+E.g.length,w=[],T=0;T<2*_;T++)w[T]=0;for(T=0;T<this.g.length;T++)for(var I=0;I<E.g.length;I++){var b=this.i(T)>>>16,y=this.i(T)&65535,H=E.i(I)>>>16,ne=E.i(I)&65535;w[2*T+2*I]+=y*ne,P(w,2*T+2*I),w[2*T+2*I+1]+=b*ne,P(w,2*T+2*I+1),w[2*T+2*I+1]+=y*H,P(w,2*T+2*I+1),w[2*T+2*I+2]+=b*H,P(w,2*T+2*I+2)}for(T=0;T<_;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=_;T<2*_;T++)w[T]=0;return new o(w,0)};function P(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function L(E,_){this.g=E,this.h=_}function R(E,_){if(A(_))throw Error("division by zero");if(A(E))return new L(p,p);if(O(E))return _=R(k(E),_),new L(k(_.g),k(_.h));if(O(_))return _=R(E,k(_)),new L(k(_.g),_.h);if(30<E.g.length){if(O(E)||O(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,T=_;0>=T.l(E);)w=N(w),T=N(T);var I=z(w,1),b=z(T,1);for(T=z(T,2),w=z(w,2);!A(T);){var y=b.add(T);0>=y.l(E)&&(I=I.add(w),b=y),T=z(T,1),w=z(w,1)}return _=D(E,I.j(_)),new L(I,_)}for(I=p;0<=E.l(_);){for(w=Math.max(1,Math.floor(E.m()/_.m())),T=Math.ceil(Math.log(w)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),b=u(w),y=b.j(_);O(y)||0<y.l(E);)w-=T,b=u(w),y=b.j(_);A(b)&&(b=m),I=I.add(b),E=D(E,y)}return new L(I,E)}n.A=function(E){return R(this,E).h},n.and=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],T=0;T<_;T++)w[T]=this.i(T)&E.i(T);return new o(w,this.h&E.h)},n.or=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],T=0;T<_;T++)w[T]=this.i(T)|E.i(T);return new o(w,this.h|E.h)},n.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],T=0;T<_;T++)w[T]=this.i(T)^E.i(T);return new o(w,this.h^E.h)};function N(E){for(var _=E.g.length+1,w=[],T=0;T<_;T++)w[T]=E.i(T)<<1|E.i(T-1)>>>31;return new o(w,E.h)}function z(E,_){var w=_>>5;_%=32;for(var T=E.g.length-w,I=[],b=0;b<T;b++)I[b]=0<_?E.i(b+w)>>>_|E.i(b+w+1)<<32-_:E.i(b+w);return new o(I,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lh=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,Dn=o}).apply(typeof Yl<"u"?Yl:typeof self<"u"?self:typeof window<"u"?window:{});var qi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ch,uh,qr,hh,Ki,Ao,fh,dh,ph;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,d){return a==Array.prototype||a==Object.prototype||(a[h]=d.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof qi=="object"&&qi];for(var h=0;h<a.length;++h){var d=a[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(a,h){if(h)e:{var d=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var S=a[g];if(!(S in d))break e;d=d[S]}a=a[a.length-1],g=d[a],h=h(g),h!=g&&h!=null&&e(d,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var d=0,g=!1,S={next:function(){if(!g&&d<a.length){var V=d++;return{value:h(V,a[V]),done:!1}}return g=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(a){return a||function(){return s(this,function(h,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function u(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,d){return a.call.apply(a.bind,arguments)}function p(a,h,d){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,g),a.apply(h,S)}}return function(){return a.apply(h,arguments)}}function m(a,h,d){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function v(a,h){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function A(a,h){function d(){}d.prototype=h.prototype,a.aa=h.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(g,S,V){for(var W=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)W[Te-2]=arguments[Te];return h.prototype[S].apply(g,W)}}function O(a){const h=a.length;if(0<h){const d=Array(h);for(let g=0;g<h;g++)d[g]=a[g];return d}return[]}function k(a,h){for(let d=1;d<arguments.length;d++){const g=arguments[d];if(c(g)){const S=a.length||0,V=g.length||0;a.length=S+V;for(let W=0;W<V;W++)a[S+W]=g[W]}else a.push(g)}}class D{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function P(a){return/^[\s\xa0]*$/.test(a)}function L(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function R(a){return R[" "](a),a}R[" "]=function(){};var N=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function z(a,h,d){for(const g in a)h.call(d,a[g],g,a)}function E(a,h){for(const d in a)h.call(void 0,a[d],d,a)}function _(a){const h={};for(const d in a)h[d]=a[d];return h}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,h){let d,g;for(let S=1;S<arguments.length;S++){g=arguments[S];for(d in g)a[d]=g[d];for(let V=0;V<w.length;V++)d=w[V],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function I(a){var h=1;a=a.split(":");const d=[];for(;0<h&&a.length;)d.push(a.shift()),h--;return a.length&&d.push(a.join(":")),d}function b(a){l.setTimeout(()=>{throw a},0)}function y(){var a=Z;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class H{constructor(){this.h=this.g=null}add(h,d){const g=ne.get();g.set(h,d),this.h?this.h.next=g:this.g=g,this.h=g}}var ne=new D(()=>new te,a=>a.reset());class te{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let se,M=!1,Z=new H,re=()=>{const a=l.Promise.resolve(void 0);se=()=>{a.then(he)}};var he=()=>{for(var a;a=y();){try{a.h.call(a.g)}catch(d){b(d)}var h=ne;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}M=!1};function be(){this.s=this.s,this.C=this.C}be.prototype.s=!1,be.prototype.ma=function(){this.s||(this.s=!0,this.N())},be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Ct=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,h),l.removeEventListener("test",d,h)}catch{}return a}();function $(a,h){if(Ae.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(N){e:{try{R(h.nodeName);var S=!0;break e}catch{}S=!1}S||(h=null)}}else d=="mouseover"?h=a.fromElement:d=="mouseout"&&(h=a.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:xe[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&$.aa.h.call(this)}}A($,Ae);var xe={2:"touch",3:"pen",4:"mouse"};$.prototype.h=function(){$.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),$t=0;function _n(a,h,d,g,S){this.listener=a,this.proxy=null,this.src=h,this.type=d,this.capture=!!g,this.ha=S,this.key=++$t,this.da=this.fa=!1}function Kt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Lt(a){this.src=a,this.g={},this.h=0}Lt.prototype.add=function(a,h,d,g,S){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var W=et(a,h,g,S);return-1<W?(h=a[W],d||(h.fa=!1)):(h=new _n(h,this.src,V,!!g,S),h.fa=d,a.push(h)),h};function yn(a,h){var d=h.type;if(d in a.g){var g=a.g[d],S=Array.prototype.indexOf.call(g,h,void 0),V;(V=0<=S)&&Array.prototype.splice.call(g,S,1),V&&(Kt(h),a.g[d].length==0&&(delete a.g[d],a.h--))}}function et(a,h,d,g){for(var S=0;S<a.length;++S){var V=a[S];if(!V.da&&V.listener==h&&V.capture==!!d&&V.ha==g)return S}return-1}var Ft="closure_lm_"+(1e6*Math.random()|0),vn={};function Tr(a,h,d,g,S){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Tr(a,h[V],d,g,S);return null}return d=wi(d),a&&a[Ue]?a.K(h,d,u(g)?!!g.capture:!!g,S):Qt(a,h,d,!1,g,S)}function Qt(a,h,d,g,S,V){if(!h)throw Error("Invalid event type");var W=u(S)?!!S.capture:!!S,Te=Un(a);if(Te||(a[Ft]=Te=new Lt(a)),d=Te.add(h,d,g,W,V),d.proxy)return d;if(g=Os(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)Ct||(S=W),S===void 0&&(S=!1),a.addEventListener(h.toString(),g,S);else if(a.attachEvent)a.attachEvent(bn(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Os(){function a(d){return h.call(a.src,a.listener,d)}const h=Ms;return a}function Vt(a,h,d,g,S){if(Array.isArray(h))for(var V=0;V<h.length;V++)Vt(a,h[V],d,g,S);else g=u(g)?!!g.capture:!!g,d=wi(d),a&&a[Ue]?(a=a.i,h=String(h).toString(),h in a.g&&(V=a.g[h],d=et(V,d,g,S),-1<d&&(Kt(V[d]),Array.prototype.splice.call(V,d,1),V.length==0&&(delete a.g[h],a.h--)))):a&&(a=Un(a))&&(h=a.g[h.toString()],a=-1,h&&(a=et(h,d,g,S)),(d=-1<a?h[a]:null)&&Yt(d))}function Yt(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Ue])yn(h.i,a);else{var d=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(d,g,a.capture):h.detachEvent?h.detachEvent(bn(d),g):h.addListener&&h.removeListener&&h.removeListener(g),(d=Un(h))?(yn(d,a),d.h==0&&(d.src=null,h[Ft]=null)):Kt(a)}}}function bn(a){return a in vn?vn[a]:vn[a]="on"+a}function Ms(a,h){if(a.da)a=!0;else{h=new $(h,this);var d=a.listener,g=a.ha||a.src;a.fa&&Yt(a),a=d.call(g,h)}return a}function Un(a){return a=a[Ft],a instanceof Lt?a:null}var Xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function wi(a){return typeof a=="function"?a:(a[Xt]||(a[Xt]=function(h){return a.handleEvent(h)}),a[Xt])}function $e(){be.call(this),this.i=new Lt(this),this.M=this,this.F=null}A($e,be),$e.prototype[Ue]=!0,$e.prototype.removeEventListener=function(a,h,d,g){Vt(this,a,h,d,g)};function tt(a,h){var d,g=a.F;if(g)for(d=[];g;g=g.F)d.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new Ae(h,a);else if(h instanceof Ae)h.target=h.target||a;else{var S=h;h=new Ae(g,a),T(h,S)}if(S=!0,d)for(var V=d.length-1;0<=V;V--){var W=h.g=d[V];S=jn(W,g,!0,h)&&S}if(W=h.g=a,S=jn(W,g,!0,h)&&S,S=jn(W,g,!1,h)&&S,d)for(V=0;V<d.length;V++)W=h.g=d[V],S=jn(W,g,!1,h)&&S}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var d=a.g[h],g=0;g<d.length;g++)Kt(d[g]);delete a.g[h],a.h--}}this.F=null},$e.prototype.K=function(a,h,d,g){return this.i.add(String(a),h,!1,d,g)},$e.prototype.L=function(a,h,d,g){return this.i.add(String(a),h,!0,d,g)};function jn(a,h,d,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var S=!0,V=0;V<h.length;++V){var W=h[V];if(W&&!W.da&&W.capture==d){var Te=W.listener,nt=W.ha||W.src;W.fa&&yn(a.i,W),S=Te.call(nt,g)!==!1&&S}}return S&&!g.defaultPrevented}function Ei(a,h,d){if(typeof a=="function")d&&(a=m(a,d));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Ti(a){a.g=Ei(()=>{a.g=null,a.i&&(a.i=!1,Ti(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Ls extends be{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Ti(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function G(a){be.call(this),this.h=a,this.g={}}A(G,be);var He=[];function Jt(a){z(a.g,function(h,d){this.g.hasOwnProperty(d)&&Yt(h)},a),a.g={}}G.prototype.N=function(){G.aa.N.call(this),Jt(this)},G.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=l.JSON.stringify,Zt=l.JSON.parse,Ii=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ai(){}Ai.prototype.h=null;function Ca(a){return a.h||(a.h=a.i())}function Va(){}var Ir={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fs(){Ae.call(this,"d")}A(Fs,Ae);function xs(){Ae.call(this,"c")}A(xs,Ae);var En={},Da=null;function Ri(){return Da=Da||new $e}En.La="serverreachability";function Na(a){Ae.call(this,En.La,a)}A(Na,Ae);function Ar(a){const h=Ri();tt(h,new Na(h))}En.STAT_EVENT="statevent";function Oa(a,h){Ae.call(this,En.STAT_EVENT,a),this.stat=h}A(Oa,Ae);function mt(a){const h=Ri();tt(h,new Oa(h,a))}En.Ma="timingevent";function Ma(a,h){Ae.call(this,En.Ma,a),this.size=h}A(Ma,Ae);function Rr(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Sr(){this.g=!0}Sr.prototype.xa=function(){this.g=!1};function Mf(a,h,d,g,S,V){a.info(function(){if(a.g)if(V)for(var W="",Te=V.split("&"),nt=0;nt<Te.length;nt++){var ve=Te[nt].split("=");if(1<ve.length){var lt=ve[0];ve=ve[1];var ct=lt.split("_");W=2<=ct.length&&ct[1]=="type"?W+(lt+"="+ve+"&"):W+(lt+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+g+") [attempt "+S+"]: "+h+`
`+d+`
`+W})}function Lf(a,h,d,g,S,V,W){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+S+"]: "+h+`
`+d+`
`+V+" "+W})}function qn(a,h,d,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+xf(a,d)+(g?" "+g:"")})}function Ff(a,h){a.info(function(){return"TIMEOUT: "+h})}Sr.prototype.info=function(){};function xf(a,h){if(!a.g)return h;if(!h)return null;try{var d=JSON.parse(h);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var g=d[a];if(!(2>g.length)){var S=g[1];if(Array.isArray(S)&&!(1>S.length)){var V=S[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<S.length;W++)S[W]=""}}}}return wn(d)}catch{return h}}var Si={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},La={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bs;function ki(){}A(ki,Ai),ki.prototype.g=function(){return new XMLHttpRequest},ki.prototype.i=function(){return{}},Bs=new ki;function en(a,h,d,g){this.j=a,this.i=h,this.l=d,this.R=g||1,this.U=new G(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fa}function Fa(){this.i=null,this.g="",this.h=!1}var xa={},Us={};function js(a,h,d){a.L=1,a.v=Di(xt(h)),a.m=d,a.P=!0,Ba(a,null)}function Ba(a,h){a.F=Date.now(),Pi(a),a.A=xt(a.v);var d=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Za(d.i,"t",g),a.C=0,d=a.j.J,a.h=new Fa,a.g=_l(a.j,d?h:null,!a.m),0<a.O&&(a.M=new Ls(m(a.Y,a,a.g),a.O)),h=a.U,d=a.g,g=a.ca;var S="readystatechange";Array.isArray(S)||(S&&(He[0]=S.toString()),S=He);for(var V=0;V<S.length;V++){var W=Tr(d,S[V],g||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Ar(),Mf(a.i,a.u,a.A,a.l,a.R,a.m)}en.prototype.ca=function(a){a=a.target;const h=this.M;h&&Bt(a)==3?h.j():this.Y(a)},en.prototype.Y=function(a){try{if(a==this.g)e:{const ct=Bt(this.g);var h=this.g.Ba();const Wn=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||ol(this.g)))){this.J||ct!=4||h==7||(h==8||0>=Wn?Ar(3):Ar(2)),qs(this);var d=this.g.Z();this.X=d;t:if(Ua(this)){var g=ol(this.g);a="";var S=g.length,V=Bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tn(this),kr(this);var W="";break t}this.h.i=new l.TextDecoder}for(h=0;h<S;h++)this.h.h=!0,a+=this.h.i.decode(g[h],{stream:!(V&&h==S-1)});g.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=d==200,Lf(this.i,this.u,this.A,this.l,this.R,ct,d),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,nt=this.g;if((Te=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Te)){var ve=Te;break t}}ve=null}if(d=ve)qn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zs(this,d);else{this.o=!1,this.s=3,mt(12),Tn(this),kr(this);break e}}if(this.P){d=!0;let Rt;for(;!this.J&&this.C<W.length;)if(Rt=Bf(this,W),Rt==Us){ct==4&&(this.s=4,mt(14),d=!1),qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==xa){this.s=4,mt(15),qn(this.i,this.l,W,"[Invalid Chunk]"),d=!1;break}else qn(this.i,this.l,Rt,null),zs(this,Rt);if(Ua(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||W.length!=0||this.h.h||(this.s=1,mt(16),d=!1),this.o=this.o&&d,!d)qn(this.i,this.l,W,"[Invalid Chunked Response]"),Tn(this),kr(this);else if(0<W.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Qs(lt),lt.M=!0,mt(11))}}else qn(this.i,this.l,W,null),zs(this,W);ct==4&&Tn(this),this.o&&!this.J&&(ct==4?dl(this.j,this):(this.o=!1,Pi(this)))}else nd(this.g),d==400&&0<W.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Tn(this),kr(this)}}}catch{}finally{}};function Ua(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Bf(a,h){var d=a.C,g=h.indexOf(`
`,d);return g==-1?Us:(d=Number(h.substring(d,g)),isNaN(d)?xa:(g+=1,g+d>h.length?Us:(h=h.slice(g,g+d),a.C=g+d,h)))}en.prototype.cancel=function(){this.J=!0,Tn(this)};function Pi(a){a.S=Date.now()+a.I,ja(a,a.I)}function ja(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Rr(m(a.ba,a),h)}function qs(a){a.B&&(l.clearTimeout(a.B),a.B=null)}en.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Ff(this.i,this.A),this.L!=2&&(Ar(),mt(17)),Tn(this),this.s=2,kr(this)):ja(this,this.S-a)};function kr(a){a.j.G==0||a.J||dl(a.j,a)}function Tn(a){qs(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Jt(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function zs(a,h){try{var d=a.j;if(d.G!=0&&(d.g==a||Gs(d.h,a))){if(!a.K&&Gs(d.h,a)&&d.G==3){try{var g=d.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var S=g;if(S[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)Fi(d),Mi(d);else break e;Ks(d),mt(18)}}else d.za=S[1],0<d.za-d.T&&37500>S[2]&&d.F&&d.v==0&&!d.C&&(d.C=Rr(m(d.Za,d),6e3));if(1>=Ga(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else An(d,11)}else if((a.K||d.g==a)&&Fi(d),!P(h))for(S=d.Da.g.parse(h),h=0;h<S.length;h++){let ve=S[h];if(d.T=ve[0],ve=ve[1],d.G==2)if(ve[0]=="c"){d.K=ve[1],d.ia=ve[2];const lt=ve[3];lt!=null&&(d.la=lt,d.j.info("VER="+d.la));const ct=ve[4];ct!=null&&(d.Aa=ct,d.j.info("SVER="+d.Aa));const Wn=ve[5];Wn!=null&&typeof Wn=="number"&&0<Wn&&(g=1.5*Wn,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const Rt=a.g;if(Rt){const Bi=Rt.g?Rt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bi){var V=g.h;V.g||Bi.indexOf("spdy")==-1&&Bi.indexOf("quic")==-1&&Bi.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Ws(V,V.h),V.h=null))}if(g.D){const Ys=Rt.g?Rt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ys&&(g.ya=Ys,Re(g.I,g.D,Ys))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var W=a;if(g.qa=gl(g,g.J?g.ia:null,g.W),W.K){Wa(g.h,W);var Te=W,nt=g.L;nt&&(Te.I=nt),Te.B&&(qs(Te),Pi(Te)),g.g=W}else hl(g);0<d.i.length&&Li(d)}else ve[0]!="stop"&&ve[0]!="close"||An(d,7);else d.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?An(d,7):$s(d):ve[0]!="noop"&&d.l&&d.l.ta(ve),d.v=0)}}Ar(4)}catch{}}var Uf=class{constructor(a,h){this.g=a,this.map=h}};function qa(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function za(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ga(a){return a.h?1:a.g?a.g.size:0}function Gs(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Ws(a,h){a.g?a.g.add(h):a.h=h}function Wa(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}qa.prototype.cancel=function(){if(this.i=Ha(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ha(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const d of a.g.values())h=h.concat(d.D);return h}return O(a.i)}function jf(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],d=a.length,g=0;g<d;g++)h.push(a[g]);return h}h=[],d=0;for(g in a)h[d++]=a[g];return h}function qf(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var d=0;d<a;d++)h.push(d);return h}h=[],d=0;for(const g in a)h[d++]=g;return h}}}function $a(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var d=qf(a),g=jf(a),S=g.length,V=0;V<S;V++)h.call(void 0,g[V],d&&d[V],a)}var Ka=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zf(a,h){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var g=a[d].indexOf("="),S=null;if(0<=g){var V=a[d].substring(0,g);S=a[d].substring(g+1)}else V=a[d];h(V,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function In(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof In){this.h=a.h,Ci(this,a.j),this.o=a.o,this.g=a.g,Vi(this,a.s),this.l=a.l;var h=a.i,d=new Vr;d.i=h.i,h.g&&(d.g=new Map(h.g),d.h=h.h),Qa(this,d),this.m=a.m}else a&&(h=String(a).match(Ka))?(this.h=!1,Ci(this,h[1]||"",!0),this.o=Pr(h[2]||""),this.g=Pr(h[3]||"",!0),Vi(this,h[4]),this.l=Pr(h[5]||"",!0),Qa(this,h[6]||"",!0),this.m=Pr(h[7]||"")):(this.h=!1,this.i=new Vr(null,this.h))}In.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Cr(h,Ya,!0),":");var d=this.g;return(d||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Cr(h,Ya,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Cr(d,d.charAt(0)=="/"?Hf:Wf,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Cr(d,Kf)),a.join("")};function xt(a){return new In(a)}function Ci(a,h,d){a.j=d?Pr(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Vi(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Qa(a,h,d){h instanceof Vr?(a.i=h,Qf(a.i,a.h)):(d||(h=Cr(h,$f)),a.i=new Vr(h,a.h))}function Re(a,h,d){a.i.set(h,d)}function Di(a){return Re(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Pr(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Cr(a,h,d){return typeof a=="string"?(a=encodeURI(a).replace(h,Gf),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Gf(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ya=/[#\/\?@]/g,Wf=/[#\?:]/g,Hf=/[#\?]/g,$f=/[#\?@]/g,Kf=/#/g;function Vr(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function tn(a){a.g||(a.g=new Map,a.h=0,a.i&&zf(a.i,function(h,d){a.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}n=Vr.prototype,n.add=function(a,h){tn(this),this.i=null,a=zn(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(h),this.h+=1,this};function Xa(a,h){tn(a),h=zn(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Ja(a,h){return tn(a),h=zn(a,h),a.g.has(h)}n.forEach=function(a,h){tn(this),this.g.forEach(function(d,g){d.forEach(function(S){a.call(h,S,g,this)},this)},this)},n.na=function(){tn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),d=[];for(let g=0;g<h.length;g++){const S=a[g];for(let V=0;V<S.length;V++)d.push(h[g])}return d},n.V=function(a){tn(this);let h=[];if(typeof a=="string")Ja(this,a)&&(h=h.concat(this.g.get(zn(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)h=h.concat(a[d])}return h},n.set=function(a,h){return tn(this),this.i=null,a=zn(this,a),Ja(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},n.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Za(a,h,d){Xa(a,h),0<d.length&&(a.i=null,a.g.set(zn(a,h),O(d)),a.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var d=0;d<h.length;d++){var g=h[d];const V=encodeURIComponent(String(g)),W=this.V(g);for(g=0;g<W.length;g++){var S=V;W[g]!==""&&(S+="="+encodeURIComponent(String(W[g]))),a.push(S)}}return this.i=a.join("&")};function zn(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Qf(a,h){h&&!a.j&&(tn(a),a.i=null,a.g.forEach(function(d,g){var S=g.toLowerCase();g!=S&&(Xa(this,g),Za(this,S,d))},a)),a.j=h}function Yf(a,h){const d=new Sr;if(l.Image){const g=new Image;g.onload=v(nn,d,"TestLoadImage: loaded",!0,h,g),g.onerror=v(nn,d,"TestLoadImage: error",!1,h,g),g.onabort=v(nn,d,"TestLoadImage: abort",!1,h,g),g.ontimeout=v(nn,d,"TestLoadImage: timeout",!1,h,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function Xf(a,h){const d=new Sr,g=new AbortController,S=setTimeout(()=>{g.abort(),nn(d,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(V=>{clearTimeout(S),V.ok?nn(d,"TestPingServer: ok",!0,h):nn(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(S),nn(d,"TestPingServer: error",!1,h)})}function nn(a,h,d,g,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),g(d)}catch{}}function Jf(){this.g=new Ii}function Zf(a,h,d){const g=d||"";try{$a(a,function(S,V){let W=S;u(S)&&(W=wn(S)),h.push(g+V+"="+encodeURIComponent(W))})}catch(S){throw h.push(g+"type="+encodeURIComponent("_badmap")),S}}function Dr(a){this.l=a.Ub||null,this.j=a.eb||!1}A(Dr,Ai),Dr.prototype.g=function(){return new Ni(this.l,this.j)},Dr.prototype.i=function(a){return function(){return a}}({});function Ni(a,h){$e.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Ni,$e),n=Ni.prototype,n.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Or(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Or(this)),this.g&&(this.readyState=3,Or(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;el(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function el(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Nr(this):Or(this),this.readyState==3&&el(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Nr(this))},n.Qa=function(a){this.g&&(this.response=a,Nr(this))},n.ga=function(){this.g&&Nr(this)};function Nr(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Or(a)}n.setRequestHeader=function(a,h){this.u.append(a,h)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=h.next();return a.join(`\r
`)};function Or(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function tl(a){let h="";return z(a,function(d,g){h+=g,h+=":",h+=d,h+=`\r
`}),h}function Hs(a,h,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=tl(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Re(a,h,d))}function Me(a){$e.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Me,$e);var ed=/^https?$/i,td=["POST","PUT"];n=Me.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,h,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bs.g(),this.v=this.o?Ca(this.o):Ca(Bs),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){nl(this,V);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var S in g)d.set(S,g[S]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const V of g.keys())d.set(V,g.get(V));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(V=>V.toLowerCase()=="content-type"),S=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(td,h,void 0))||g||S||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of d)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sl(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){nl(this,V)}};function nl(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,rl(a),Oi(a)}function rl(a){a.A||(a.A=!0,tt(a,"complete"),tt(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,tt(this,"complete"),tt(this,"abort"),Oi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),Me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?il(this):this.bb())},n.bb=function(){il(this)};function il(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Bt(a)!=4||a.Z()!=2)){if(a.u&&Bt(a)==4)Ei(a.Ea,0,a);else if(tt(a,"readystatechange"),Bt(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var d;if(!(d=h)){var g;if(g=W===0){var S=String(a.D).match(Ka)[1]||null;!S&&l.self&&l.self.location&&(S=l.self.location.protocol.slice(0,-1)),g=!ed.test(S?S.toLowerCase():"")}d=g}if(d)tt(a,"complete"),tt(a,"success");else{a.m=6;try{var V=2<Bt(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",rl(a)}}finally{Oi(a)}}}}function Oi(a,h){if(a.g){sl(a);const d=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||tt(a,"ready");try{d.onreadystatechange=g}catch{}}}function sl(a){a.I&&(l.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Bt(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Bt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Zt(h)}};function ol(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function nd(a){const h={};a=(a.g&&2<=Bt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(P(a[g]))continue;var d=I(a[g]);const S=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const V=h[S]||[];h[S]=V,V.push(d)}E(h,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mr(a,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||h}function al(a){this.Aa=0,this.i=[],this.j=new Sr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mr("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mr("baseRetryDelayMs",5e3,a),this.cb=Mr("retryDelaySeedMs",1e4,a),this.Wa=Mr("forwardChannelMaxRetries",2,a),this.wa=Mr("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new qa(a&&a.concurrentRequestLimit),this.Da=new Jf,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=al.prototype,n.la=8,n.G=1,n.connect=function(a,h,d,g){mt(0),this.W=a,this.H=h||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=gl(this,null,this.W),Li(this)};function $s(a){if(ll(a),a.G==3){var h=a.U++,d=xt(a.I);if(Re(d,"SID",a.K),Re(d,"RID",h),Re(d,"TYPE","terminate"),Lr(a,d),h=new en(a,a.j,h),h.L=2,h.v=Di(xt(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=h.v,d=!0),d||(h.g=_l(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Pi(h)}ml(a)}function Mi(a){a.g&&(Qs(a),a.g.cancel(),a.g=null)}function ll(a){Mi(a),a.u&&(l.clearTimeout(a.u),a.u=null),Fi(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Li(a){if(!za(a.h)&&!a.s){a.s=!0;var h=a.Ga;se||re(),M||(se(),M=!0),Z.add(h,a),a.B=0}}function rd(a,h){return Ga(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Rr(m(a.Ga,a,h),pl(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const S=new en(this,this.j,a);let V=this.o;if(this.S&&(V?(V=_(V),T(V,this.S)):V=this.S),this.m!==null||this.O||(S.H=V,V=null),this.P)e:{for(var h=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=d;break e}if(h===4096||d===this.i.length-1){h=d+1;break e}}h=1e3}else h=1e3;h=ul(this,S,h),d=xt(this.I),Re(d,"RID",a),Re(d,"CVER",22),this.D&&Re(d,"X-HTTP-Session-Id",this.D),Lr(this,d),V&&(this.O?h="headers="+encodeURIComponent(String(tl(V)))+"&"+h:this.m&&Hs(d,this.m,V)),Ws(this.h,S),this.Ua&&Re(d,"TYPE","init"),this.P?(Re(d,"$req",h),Re(d,"SID","null"),S.T=!0,js(S,d,null)):js(S,d,h),this.G=2}}else this.G==3&&(a?cl(this,a):this.i.length==0||za(this.h)||cl(this))};function cl(a,h){var d;h?d=h.l:d=a.U++;const g=xt(a.I);Re(g,"SID",a.K),Re(g,"RID",d),Re(g,"AID",a.T),Lr(a,g),a.m&&a.o&&Hs(g,a.m,a.o),d=new en(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),h&&(a.i=h.D.concat(a.i)),h=ul(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Ws(a.h,d),js(d,g,h)}function Lr(a,h){a.H&&z(a.H,function(d,g){Re(h,g,d)}),a.l&&$a({},function(d,g){Re(h,g,d)})}function ul(a,h,d){d=Math.min(a.i.length,d);var g=a.l?m(a.l.Na,a.l,a):null;e:{var S=a.i;let V=-1;for(;;){const W=["count="+d];V==-1?0<d?(V=S[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let Te=!0;for(let nt=0;nt<d;nt++){let ve=S[nt].g;const lt=S[nt].map;if(ve-=V,0>ve)V=Math.max(0,S[nt].g-100),Te=!1;else try{Zf(lt,W,"req"+ve+"_")}catch{g&&g(lt)}}if(Te){g=W.join("&");break e}}}return a=a.i.splice(0,d),h.D=a,g}function hl(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;se||re(),M||(se(),M=!0),Z.add(h,a),a.v=0}}function Ks(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Rr(m(a.Fa,a),pl(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,fl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Rr(m(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Mi(this),fl(this))};function Qs(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function fl(a){a.g=new en(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=xt(a.qa);Re(h,"RID","rpc"),Re(h,"SID",a.K),Re(h,"AID",a.T),Re(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Re(h,"TO",a.ja),Re(h,"TYPE","xmlhttp"),Lr(a,h),a.m&&a.o&&Hs(h,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Di(xt(h)),d.m=null,d.P=!0,Ba(d,a)}n.Za=function(){this.C!=null&&(this.C=null,Mi(this),Ks(this),mt(19))};function Fi(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function dl(a,h){var d=null;if(a.g==h){Fi(a),Qs(a),a.g=null;var g=2}else if(Gs(a.h,h))d=h.D,Wa(a.h,h),g=1;else return;if(a.G!=0){if(h.o)if(g==1){d=h.m?h.m.length:0,h=Date.now()-h.F;var S=a.B;g=Ri(),tt(g,new Ma(g,d)),Li(a)}else hl(a);else if(S=h.s,S==3||S==0&&0<h.X||!(g==1&&rd(a,h)||g==2&&Ks(a)))switch(d&&0<d.length&&(h=a.h,h.i=h.i.concat(d)),S){case 1:An(a,5);break;case 4:An(a,10);break;case 3:An(a,6);break;default:An(a,2)}}}function pl(a,h){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*h}function An(a,h){if(a.j.info("Error code "+h),h==2){var d=m(a.fb,a),g=a.Xa;const S=!g;g=new In(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ci(g,"https"),Di(g),S?Yf(g.toString(),d):Xf(g.toString(),d)}else mt(2);a.G=0,a.l&&a.l.sa(h),ml(a),ll(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function ml(a){if(a.G=0,a.ka=[],a.l){const h=Ha(a.h);(h.length!=0||a.i.length!=0)&&(k(a.ka,h),k(a.ka,a.i),a.h.i.length=0,O(a.i),a.i.length=0),a.l.ra()}}function gl(a,h,d){var g=d instanceof In?xt(d):new In(d);if(g.g!="")h&&(g.g=h+"."+g.g),Vi(g,g.s);else{var S=l.location;g=S.protocol,h=h?h+"."+S.hostname:S.hostname,S=+S.port;var V=new In(null);g&&Ci(V,g),h&&(V.g=h),S&&Vi(V,S),d&&(V.l=d),g=V}return d=a.D,h=a.ya,d&&h&&Re(g,d,h),Re(g,"VER",a.la),Lr(a,g),g}function _l(a,h,d){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Me(new Dr({eb:d})):new Me(a.pa),h.Ha(a.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function yl(){}n=yl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xi(){}xi.prototype.g=function(a,h){return new bt(a,h)};function bt(a,h){$e.call(this),this.g=new al(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!P(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!P(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Gn(this)}A(bt,$e),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){$s(this.g)},bt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=wn(a),a=d);h.i.push(new Uf(h.Ya++,a)),h.G==3&&Li(h)},bt.prototype.N=function(){this.g.l=null,delete this.j,$s(this.g),delete this.g,bt.aa.N.call(this)};function vl(a){Fs.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const d in h){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}A(vl,Fs);function bl(){xs.call(this),this.status=1}A(bl,xs);function Gn(a){this.g=a}A(Gn,yl),Gn.prototype.ua=function(){tt(this.g,"a")},Gn.prototype.ta=function(a){tt(this.g,new vl(a))},Gn.prototype.sa=function(a){tt(this.g,new bl)},Gn.prototype.ra=function(){tt(this.g,"b")},xi.prototype.createWebChannel=xi.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,ph=function(){return new xi},dh=function(){return Ri()},fh=En,Ao={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Si.NO_ERROR=0,Si.TIMEOUT=8,Si.HTTP_ERROR=6,Ki=Si,La.COMPLETE="complete",hh=La,Va.EventType=Ir,Ir.OPEN="a",Ir.CLOSE="b",Ir.ERROR="c",Ir.MESSAGE="d",$e.prototype.listen=$e.prototype.K,qr=Va,uh=Dr,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,ch=Me}).apply(typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{});const Xl="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yr="10.12.5";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new nh("@firebase/firestore");function Ur(){return Mn.logLevel}function Y(n,...e){if(Mn.logLevel<=_e.DEBUG){const t=e.map(Xo);Mn.debug(`Firestore (${yr}): ${n}`,...t)}}function Wt(n,...e){if(Mn.logLevel<=_e.ERROR){const t=e.map(Xo);Mn.error(`Firestore (${yr}): ${n}`,...t)}}function or(n,...e){if(Mn.logLevel<=_e.WARN){const t=e.map(Xo);Mn.warn(`Firestore (${yr}): ${n}`,...t)}}function Xo(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(n="Unexpected state"){const e=`FIRESTORE (${yr}) INTERNAL ASSERTION FAILED: `+n;throw Wt(e),new Error(e)}function Ie(n,e){n||ie()}function ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends _r{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class m_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ht.UNAUTHENTICATED))}shutdown(){}}class g_{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class __{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new un;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new un,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new un)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new mh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new ht(e)}}class y_{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class v_{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new y_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class b_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w_{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ie(typeof t.token=="string"),this.R=t.token,new b_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=E_(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function we(n,e){return n<e?-1:n>e?1:0}function ar(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Be(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Be(0,0))}static max(){return new ae(new Be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t,r){t===void 0?t=0:t>e.length&&ie(),r===void 0?r=e.length-t:r>e.length-t&&ie(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ni?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ke extends ni{construct(e,t,r){return new ke(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ke(t)}static emptyPath(){return new ke([])}}const T_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends ni{construct(e,t,r){return new it(e,t,r)}static isValidIdentifier(e){return T_.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new it(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(t)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(ke.fromString(e))}static fromName(e){return new ee(ke.fromString(e).popFirst(5))}static empty(){return new ee(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new ke(e.slice()))}}function I_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Be(t+1,0):new Be(t,r));return new dn(i,ee.empty(),e)}function A_(n){return new dn(n.readTime,n.key,-1)}class dn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new dn(ae.min(),ee.empty(),-1)}static max(){return new dn(ae.max(),ee.empty(),-1)}}function R_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:we(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pi(n){if(n.code!==F.FAILED_PRECONDITION||n.message!==S_)throw n;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):B.reject(t)}static resolve(e){return new B((t,r)=>{t(e)})}static reject(e){return new B((t,r)=>{r(e)})}static waitFor(e){return new B((t,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=B.resolve(!1);for(const r of e)t=t.next(i=>i?B.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new B((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(f=>{o[u]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new B((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function P_(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function mi(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jo.oe=-1;function vs(n){return n==null}function ss(n){return n===0&&1/n==-1/0}function C_(n){return typeof n=="number"&&Number.isInteger(n)&&!ss(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _h(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,t){this.comparator=e,this.root=t||rt.EMPTY}insert(e,t){return new Ne(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zi(this.root,e,this.comparator,!1)}getReverseIterator(){return new zi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zi(this.root,e,this.comparator,!0)}}class zi{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??rt.RED,this.left=i??rt.EMPTY,this.right=s??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new rt(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return rt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,t,r,i,s){return this}insert(e,t,r){return new rt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zl(this.data.getIterator())}getIteratorFrom(e){return new Zl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new st(this.comparator);return t.data=e,t}}class Zl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new St([])}unionWith(e){let t=new st(it.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new St(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ar(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new yh("Invalid base64 string: "+s):s}}(e);return new at(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new at(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const V_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pn(n){if(Ie(!!n),typeof n=="string"){let e=0;const t=V_.exec(n);if(Ie(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(n.seconds),nanos:qe(n.nanos)}}function qe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ln(n){return typeof n=="string"?at.fromBase64String(n):at.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ea(n){const e=n.mapValue.fields.__previous_value__;return Zo(e)?ea(e):e}function ri(n){const e=pn(n.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,t,r,i,s,o,l,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class ii{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ii("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ii&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Zo(n)?4:N_(n)?9007199254740991:10:ie()}function Mt(n,e){if(n===e)return!0;const t=Fn(n);if(t!==Fn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ri(n).isEqual(ri(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=pn(i.timestampValue),l=pn(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Ln(i.bytesValue).isEqual(Ln(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return qe(i.geoPointValue.latitude)===qe(s.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return qe(i.integerValue)===qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=qe(i.doubleValue),l=qe(s.doubleValue);return o===l?ss(o)===ss(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return ar(n.arrayValue.values||[],e.arrayValue.values||[],Mt);case 10:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Jl(o)!==Jl(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Mt(o[c],l[c])))return!1;return!0}(n,e);default:return ie()}}function si(n,e){return(n.values||[]).find(t=>Mt(t,e))!==void 0}function lr(n,e){if(n===e)return 0;const t=Fn(n),r=Fn(e);if(t!==r)return we(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(n.booleanValue,e.booleanValue);case 2:return function(s,o){const l=qe(s.integerValue||s.doubleValue),c=qe(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,e);case 3:return ec(n.timestampValue,e.timestampValue);case 4:return ec(ri(n),ri(e));case 5:return we(n.stringValue,e.stringValue);case 6:return function(s,o){const l=Ln(s),c=Ln(o);return l.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const f=we(l[u],c[u]);if(f!==0)return f}return we(l.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const l=we(qe(s.latitude),qe(o.latitude));return l!==0?l:we(qe(s.longitude),qe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const l=s.values||[],c=o.values||[];for(let u=0;u<l.length&&u<c.length;++u){const f=lr(l[u],c[u]);if(f)return f}return we(l.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Gi.mapValue&&o===Gi.mapValue)return 0;if(s===Gi.mapValue)return 1;if(o===Gi.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const m=we(c[p],f[p]);if(m!==0)return m;const v=lr(l[c[p]],u[f[p]]);if(v!==0)return v}return we(c.length,f.length)}(n.mapValue,e.mapValue);default:throw ie()}}function ec(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return we(n,e);const t=pn(n),r=pn(e),i=we(t.seconds,r.seconds);return i!==0?i:we(t.nanos,r.nanos)}function cr(n){return Ro(n)}function Ro(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=pn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ln(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Ro(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Ro(t.fields[o])}`;return i+"}"}(n.mapValue):ie()}function tc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function So(n){return!!n&&"integerValue"in n}function ta(n){return!!n&&"arrayValue"in n}function nc(n){return!!n&&"nullValue"in n}function rc(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qi(n){return!!n&&"mapValue"in n}function Wr(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wr(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wr(n.arrayValue.values[t]);return e}return Object.assign({},n)}function N_(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.value=e}static empty(){return new Tt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wr(t)}setAll(e){let t=it.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=l.popLast()}o?r[l.lastSegment()]=Wr(o):i.push(l.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Qi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Qi(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){vr(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Tt(Wr(this.value))}}function vh(n){const e=[];return vr(n.fields,(t,r)=>{const i=new it([t]);if(Qi(r)){const s=vh(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new St(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t,r,i,s,o,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ft(e,0,ae.min(),ae.min(),ae.min(),Tt.empty(),0)}static newFoundDocument(e,t,r,i){return new ft(e,1,t,ae.min(),r,i,0)}static newNoDocument(e,t){return new ft(e,2,t,ae.min(),ae.min(),Tt.empty(),0)}static newUnknownDocument(e,t){return new ft(e,3,t,ae.min(),ae.min(),Tt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t){this.position=e,this.inclusive=t}}function ic(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),t.key):r=lr(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sc(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mt(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t="asc"){this.field=e,this.dir=t}}function O_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{}class ze extends bh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new L_(e,t,r):t==="array-contains"?new B_(e,r):t==="in"?new U_(e,r):t==="not-in"?new j_(e,r):t==="array-contains-any"?new q_(e,r):new ze(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new F_(e,r):new x_(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(lr(t,this.value)):t!==null&&Fn(this.value)===Fn(t)&&this.matchesComparison(lr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kt extends bh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new kt(e,t)}matches(e){return wh(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function wh(n){return n.op==="and"}function Eh(n){return M_(n)&&wh(n)}function M_(n){for(const e of n.filters)if(e instanceof kt)return!1;return!0}function ko(n){if(n instanceof ze)return n.field.canonicalString()+n.op.toString()+cr(n.value);if(Eh(n))return n.filters.map(e=>ko(e)).join(",");{const e=n.filters.map(t=>ko(t)).join(",");return`${n.op}(${e})`}}function Th(n,e){return n instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&Mt(r.value,i.value)}(n,e):n instanceof kt?function(r,i){return i instanceof kt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&Th(o,i.filters[l]),!0):!1}(n,e):void ie()}function Ih(n){return n instanceof ze?function(t){return`${t.field.canonicalString()} ${t.op} ${cr(t.value)}`}(n):n instanceof kt?function(t){return t.op.toString()+" {"+t.getFilters().map(Ih).join(" ,")+"}"}(n):"Filter"}class L_ extends ze{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){const t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class F_ extends ze{constructor(e,t){super(e,"in",t),this.keys=Ah("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class x_ extends ze{constructor(e,t){super(e,"not-in",t),this.keys=Ah("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ah(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ee.fromName(r.referenceValue))}class B_ extends ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ta(t)&&si(t.arrayValue,this.value)}}class U_ extends ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&si(this.value.arrayValue,t)}}class j_ extends ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!si(this.value.arrayValue,t)}}class q_ extends ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ta(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>si(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,t=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function oc(n,e=null,t=[],r=[],i=null,s=null,o=null){return new z_(n,e,t,r,i,s,o)}function na(n){const e=ce(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ko(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),vs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cr(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cr(r)).join(",")),e.ue=t}return e.ue}function ra(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!O_(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Th(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sc(n.startAt,e.startAt)&&sc(n.endAt,e.endAt)}function Po(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t=null,r=[],i=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function G_(n,e,t,r,i,s,o,l){return new gi(n,e,t,r,i,s,o,l)}function Rh(n){return new gi(n)}function ac(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Sh(n){return n.collectionGroup!==null}function Hr(n){const e=ce(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new st(it.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new as(s,r))}),t.has(it.keyField().canonicalString())||e.ce.push(new as(it.keyField(),r))}return e.ce}function Dt(n){const e=ce(n);return e.le||(e.le=W_(e,Hr(n))),e.le}function W_(n,e){if(n.limitType==="F")return oc(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new as(i.field,s)});const t=n.endAt?new os(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new os(n.startAt.position,n.startAt.inclusive):null;return oc(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Co(n,e){const t=n.filters.concat([e]);return new gi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vo(n,e,t){return new gi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bs(n,e){return ra(Dt(n),Dt(e))&&n.limitType===e.limitType}function kh(n){return`${na(Dt(n))}|lt:${n.limitType}`}function Yn(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Ih(i)).join(", ")}]`),vs(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>cr(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>cr(i)).join(",")),`Target(${r})`}(Dt(n))}; limitType=${n.limitType})`}function ws(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Hr(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const u=ic(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Hr(r),i)||r.endAt&&!function(o,l,c){const u=ic(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Hr(r),i))}(n,e)}function H_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ph(n){return(e,t)=>{let r=!1;for(const i of Hr(n)){const s=$_(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $_(n,e,t){const r=n.field.isKeyField()?ee.comparator(e.key,t.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?lr(c,u):ie()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vr(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return _h(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=new Ne(ee.comparator);function Ht(){return K_}const Ch=new Ne(ee.comparator);function zr(...n){let e=Ch;for(const t of n)e=e.insert(t.key,t);return e}function Vh(n){let e=Ch;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Cn(){return $r()}function Dh(){return $r()}function $r(){return new br(n=>n.toString(),(n,e)=>n.isEqual(e))}const Q_=new Ne(ee.comparator),Y_=new st(ee.comparator);function me(...n){let e=Y_;for(const t of n)e=e.add(t);return e}const X_=new st(we);function J_(){return X_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ss(e)?"-0":e}}function Oh(n){return{integerValue:""+n}}function Z_(n,e){return C_(e)?Oh(e):Nh(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this._=void 0}}function ey(n,e,t){return n instanceof ls?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Zo(s)&&(s=ea(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof oi?Lh(n,e):n instanceof ai?Fh(n,e):function(i,s){const o=Mh(i,s),l=lc(o)+lc(i.Pe);return So(o)&&So(i.Pe)?Oh(l):Nh(i.serializer,l)}(n,e)}function ty(n,e,t){return n instanceof oi?Lh(n,e):n instanceof ai?Fh(n,e):t}function Mh(n,e){return n instanceof cs?function(r){return So(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ls extends Es{}class oi extends Es{constructor(e){super(),this.elements=e}}function Lh(n,e){const t=xh(e);for(const r of n.elements)t.some(i=>Mt(i,r))||t.push(r);return{arrayValue:{values:t}}}class ai extends Es{constructor(e){super(),this.elements=e}}function Fh(n,e){let t=xh(e);for(const r of n.elements)t=t.filter(i=>!Mt(i,r));return{arrayValue:{values:t}}}class cs extends Es{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function lc(n){return qe(n.integerValue||n.doubleValue)}function xh(n){return ta(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ny(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof oi&&i instanceof oi||r instanceof ai&&i instanceof ai?ar(r.elements,i.elements,Mt):r instanceof cs&&i instanceof cs?Mt(r.Pe,i.Pe):r instanceof ls&&i instanceof ls}(n.transform,e.transform)}class ry{constructor(e,t){this.version=e,this.transformResults=t}}class Nt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nt}static exists(e){return new Nt(void 0,e)}static updateTime(e){return new Nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yi(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ts{}function Bh(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ia(n.key,Nt.none()):new _i(n.key,n.data,Nt.none());{const t=n.data,r=Tt.empty();let i=new st(it.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new xn(n.key,r,new St(i.toArray()),Nt.none())}}function iy(n,e,t){n instanceof _i?function(i,s,o){const l=i.value.clone(),c=uc(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof xn?function(i,s,o){if(!Yi(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=uc(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Uh(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Kr(n,e,t,r){return n instanceof _i?function(s,o,l,c){if(!Yi(s.precondition,o))return l;const u=s.value.clone(),f=hc(s.fieldTransforms,c,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof xn?function(s,o,l,c){if(!Yi(s.precondition,o))return l;const u=hc(s.fieldTransforms,c,o),f=o.data;return f.setAll(Uh(s)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,l){return Yi(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(n,e,t)}function sy(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Mh(r.transform,i||null);s!=null&&(t===null&&(t=Tt.empty()),t.set(r.field,s))}return t||null}function cc(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ar(r,i,(s,o)=>ny(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _i extends Ts{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xn extends Ts{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Uh(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function uc(n,e,t){const r=new Map;Ie(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,ty(o,l,t[i]))}return r}function hc(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,ey(s,o,e))}return r}class ia extends Ts{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oy extends Ts{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&iy(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Kr(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Kr(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Dh();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=t.has(i.key)?null:l;const c=Bh(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),me())}isEqual(e){return this.batchId===e.batchId&&ar(this.mutations,e.mutations,(t,r)=>cc(t,r))&&ar(this.baseMutations,e.baseMutations,(t,r)=>cc(t,r))}}class sa{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ie(e.mutations.length===r.length);let i=function(){return Q_}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new sa(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,ge;function uy(n){switch(n){default:return ie();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function jh(n){if(n===void 0)return Wt("GRPC error has no .code"),F.UNKNOWN;switch(n){case je.OK:return F.OK;case je.CANCELLED:return F.CANCELLED;case je.UNKNOWN:return F.UNKNOWN;case je.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case je.INTERNAL:return F.INTERNAL;case je.UNAVAILABLE:return F.UNAVAILABLE;case je.UNAUTHENTICATED:return F.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case je.NOT_FOUND:return F.NOT_FOUND;case je.ALREADY_EXISTS:return F.ALREADY_EXISTS;case je.PERMISSION_DENIED:return F.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case je.ABORTED:return F.ABORTED;case je.OUT_OF_RANGE:return F.OUT_OF_RANGE;case je.UNIMPLEMENTED:return F.UNIMPLEMENTED;case je.DATA_LOSS:return F.DATA_LOSS;default:return ie()}}(ge=je||(je={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy=new Dn([4294967295,4294967295],0);function fc(n){const e=hy().encode(n),t=new lh;return t.update(e),new Uint8Array(t.digest())}function dc(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Dn([t,r],0),new Dn([i,s],0)]}class oa{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Gr(`Invalid padding: ${t}`);if(r<0)throw new Gr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Gr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Dn.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Dn.fromNumber(r)));return i.compare(fy)===1&&(i=new Dn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=fc(e),[r,i]=dc(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new oa(s,i,t);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const t=fc(e),[r,i]=dc(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Gr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,yi.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Is(ae.min(),i,new Ne(we),Ht(),me())}}class yi{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new yi(r,t,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class qh{constructor(e,t){this.targetId=e,this.me=t}}class zh{constructor(e,t,r=at.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class pc{constructor(){this.fe=0,this.ge=gc(),this.pe=at.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=me(),t=me(),r=me();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ie()}}),new yi(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=gc()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dy{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ht(),this.qe=mc(),this.Qe=new Ne(we)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Po(s))if(r===0){const o=new ee(s.path);this.Ue(t,o,ft.newNoDocument(o,ae.min()))}else Ie(r===1);else{const o=this.Ye(t);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,l;try{o=Ln(r).toUint8Array()}catch(c){if(c instanceof yh)return or("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new oa(o,i,s)}catch(c){return or(c instanceof Gr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Po(l.target)){const c=new ee(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,ft.newNoDocument(c,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=me();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Is(e,t,this.Qe,this.ke,r);return this.ke=Ht(),this.qe=mc(),this.Qe=new Ne(we),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new pc,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new st(we),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Y("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new pc),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function mc(){return new Ne(ee.comparator)}function gc(){return new Ne(ee.comparator)}const py={asc:"ASCENDING",desc:"DESCENDING"},my={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gy={and:"AND",or:"OR"};class _y{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Do(n,e){return n.useProto3Json||vs(e)?e:{value:e}}function us(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gh(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yy(n,e){return us(n,e.toTimestamp())}function Ot(n){return Ie(!!n),ae.fromTimestamp(function(t){const r=pn(t);return new Be(r.seconds,r.nanos)}(n))}function aa(n,e){return No(n,e).canonicalString()}function No(n,e){const t=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Wh(n){const e=ke.fromString(n);return Ie(Yh(e)),e}function Oo(n,e){return aa(n.databaseId,e.path)}function ao(n,e){const t=Wh(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee($h(t))}function Hh(n,e){return aa(n.databaseId,e)}function vy(n){const e=Wh(n);return e.length===4?ke.emptyPath():$h(e)}function Mo(n){return new ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $h(n){return Ie(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function _c(n,e,t){return{name:Oo(n,e),fields:t.value.mapValue.fields}}function by(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?(Ie(f===void 0||typeof f=="string"),at.fromBase64String(f||"")):(Ie(f===void 0||f instanceof Buffer||f instanceof Uint8Array),at.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const f=u.code===void 0?F.UNKNOWN:jh(u.code);return new Q(f,u.message||"")}(o);t=new zh(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ao(n,r.document.name),s=Ot(r.document.updateTime),o=r.document.createTime?Ot(r.document.createTime):ae.min(),l=new Tt({mapValue:{fields:r.document.fields}}),c=ft.newFoundDocument(i,s,o,l),u=r.targetIds||[],f=r.removedTargetIds||[];t=new Xi(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ao(n,r.document),s=r.readTime?Ot(r.readTime):ae.min(),o=ft.newNoDocument(i,s),l=r.removedTargetIds||[];t=new Xi([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ao(n,r.document),s=r.removedTargetIds||[];t=new Xi([],s,i,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new cy(i,s),l=r.targetId;t=new qh(l,o)}}return t}function wy(n,e){let t;if(e instanceof _i)t={update:_c(n,e.key,e.value)};else if(e instanceof ia)t={delete:Oo(n,e.key)};else if(e instanceof xn)t={update:_c(n,e.key,e.data),updateMask:Cy(e.fieldMask)};else{if(!(e instanceof oy))return ie();t={verify:Oo(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof ls)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof oi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ai)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof cs)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ie()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:yy(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ie()}(n,e.precondition)),t}function Ey(n,e){return n&&n.length>0?(Ie(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Ot(i.updateTime):Ot(s);return o.isEqual(ae.min())&&(o=Ot(s)),new ry(o,i.transformResults||[])}(t,e))):[]}function Ty(n,e){return{documents:[Hh(n,e.path)]}}function Iy(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Hh(n,i);const s=function(u){if(u.length!==0)return Qh(kt.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(f=>function(m){return{field:Xn(m.field),direction:Sy(m.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=Do(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function Ay(n){let e=vy(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ie(r===1);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(p){const m=Kh(p);return m instanceof kt&&Eh(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(m=>function(A){return new as(Jn(A.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(m))}(t.orderBy));let l=null;t.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,vs(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){const m=!!p.before,v=p.values||[];return new os(v,m)}(t.startAt));let u=null;return t.endAt&&(u=function(p){const m=!p.before,v=p.values||[];return new os(v,m)}(t.endAt)),G_(e,i,o,s,l,"F",c,u)}function Ry(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Kh(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Jn(t.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Jn(t.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jn(t.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Jn(t.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(n):n.fieldFilter!==void 0?function(t){return ze.create(Jn(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return kt.create(t.compositeFilter.filters.map(r=>Kh(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie()}}(t.compositeFilter.op))}(n):ie()}function Sy(n){return py[n]}function ky(n){return my[n]}function Py(n){return gy[n]}function Xn(n){return{fieldPath:n.canonicalString()}}function Jn(n){return it.fromServerFormat(n.fieldPath)}function Qh(n){return n instanceof ze?function(t){if(t.op==="=="){if(rc(t.value))return{unaryFilter:{field:Xn(t.field),op:"IS_NAN"}};if(nc(t.value))return{unaryFilter:{field:Xn(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rc(t.value))return{unaryFilter:{field:Xn(t.field),op:"IS_NOT_NAN"}};if(nc(t.value))return{unaryFilter:{field:Xn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xn(t.field),op:ky(t.op),value:t.value}}}(n):n instanceof kt?function(t){const r=t.getFilters().map(i=>Qh(i));return r.length===1?r[0]:{compositeFilter:{op:Py(t.op),filters:r}}}(n):ie()}function Cy(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Yh(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,t,r,i,s=ae.min(),o=ae.min(),l=at.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new an(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new an(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new an(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new an(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e){this.ct=e}}function Dy(n){const e=Ay({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vo(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(){this.an=new Oy}addToCollectionParentIndex(e,t){return this.an.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(dn.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(dn.min())}updateCollectionGroup(e,t,r){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class Oy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new st(ke.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new st(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new ur(0)}static Bn(){return new ur(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.changes=new br(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?B.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Kr(r.mutation,i,St.empty(),Be.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=me()){const i=Cn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=zr();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Cn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,me()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,r,i){let s=Ht();const o=$r(),l=function(){return $r()}();return t.forEach((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof xn)?s=s.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Kr(f.mutation,u,f.mutation.getFieldMask(),Be.now())):o.set(u.key,St.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,f)=>o.set(u,f)),t.forEach((u,f)=>{var p;return l.set(u,new Ly(f,(p=o.get(u))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,t){const r=$r();let i=new Ne((o,l)=>o-l),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=t.get(c);if(u===null)return;let f=r.get(c)||St.empty();f=l.applyToLocalView(u,f),r.set(c,f);const p=(i.get(l.batchId)||me()).add(c);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,f=c.value,p=Dh();f.forEach(m=>{if(!s.has(m)){const v=Bh(t.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):B.resolve(Cn());let l=-1,c=s;return o.next(u=>B.forEach(u,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?B.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{c=c.insert(f,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,me())).next(f=>({batchId:l,changes:Vh(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let i=zr();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=zr();return this.indexManager.getCollectionParents(e,s).next(l=>B.forEach(l,c=>{const u=function(p,m){return new gi(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,ft.newInvalidDocument(f)))});let l=zr();return o.forEach((c,u)=>{const f=s.get(c);f!==void 0&&Kr(f.mutation,u,St.empty(),Be.now()),ws(t,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return B.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ot(i.createTime)}}(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,function(i){return{name:i.name,query:Dy(i.bundledQuery),readTime:Ot(i.readTime)}}(t)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(){this.overlays=new Ne(ee.comparator),this.Pr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Cn();return B.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),B.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Pr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),B.resolve()}getOverlaysForCollection(e,t,r){const i=Cn(),s=t.length+1,o=new ee(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return B.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ne((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=s.get(u.largestBatchId);f===null&&(f=Cn(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const l=Cn(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>l.set(u,f)),!(l.size()>=i)););return B.resolve(l)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ly(t,r));let s=this.Pr.get(t);s===void 0&&(s=me(),this.Pr.set(t,s)),this.Pr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.Ir=new st(Qe.Tr),this.Er=new st(Qe.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){const r=new Qe(e,t);this.Ir=this.Ir.add(r),this.Er=this.Er.add(r)}Ar(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Rr(new Qe(e,t))}Vr(e,t){e.forEach(r=>this.removeReference(r,t))}mr(e){const t=new ee(new ke([])),r=new Qe(t,e),i=new Qe(t,e+1),s=[];return this.Er.forEachInRange([r,i],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){const t=new ee(new ke([])),r=new Qe(t,e),i=new Qe(t,e+1);let s=me();return this.Er.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Qe(e,0),r=this.Ir.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Qe{constructor(e,t){this.key=e,this.yr=t}static Tr(e,t){return ee.comparator(e.key,t.key)||we(e.yr,t.yr)}static dr(e,t){return we(e.yr,t.yr)||ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new st(Qe.Tr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ay(s,t,r,i);this.mutationQueue.push(o);for(const l of i)this.Sr=this.Sr.add(new Qe(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,t){return B.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Dr(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Qe(t,0),i=new Qe(t,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],o=>{const l=this.br(o.yr);s.push(l)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new st(we);return t.forEach(i=>{const s=new Qe(i,0),o=new Qe(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],l=>{r=r.add(l.yr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ee.isDocumentKey(s)||(s=s.child(""));const o=new Qe(new ee(s),0);let l=new st(we);return this.Sr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(l=l.add(c.yr)),!0)},o),B.resolve(this.Cr(l))}Cr(e){const t=[];return e.forEach(r=>{const i=this.br(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ie(this.vr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Sr;return B.forEach(t.mutations,i=>{const s=new Qe(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,t){const r=new Qe(t,0),i=this.Sr.firstAfterOrEqual(r);return B.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){const t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e){this.Fr=e,this.docs=function(){return new Ne(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Fr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return B.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(t))}getEntries(e,t){let r=Ht();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ft.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ht();const o=t.path,l=new ee(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||R_(A_(f),r)<=0||(i.has(f.key)||ws(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ie()}Mr(e,t){return B.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zy(this)}getSize(e){return B.resolve(this.size)}}class zy extends My{constructor(e){super(),this.ur=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),B.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e){this.persistence=e,this.Or=new br(t=>na(t),ra),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new la,this.targetCount=0,this.Br=ur.Ln()}forEachTarget(e,t){return this.Or.forEach((r,i)=>t(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Nr&&(this.Nr=t),B.resolve()}Qn(e){this.Or.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new ur(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.Qn(t),B.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Lr.mr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Or.forEach((o,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const r=this.Or.get(t)||null;return B.resolve(r)}addMatchingKeys(e,t,r){return this.Lr.Ar(t,r),B.resolve()}removeMatchingKeys(e,t,r){this.Lr.Vr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Lr.mr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Lr.pr(t);return B.resolve(r)}containsKey(e,t){return B.resolve(this.Lr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,t){this.kr={},this.overlays={},this.qr=new Jo(0),this.Qr=!1,this.Qr=!0,this.Kr=new Uy,this.referenceDelegate=e(this),this.$r=new Gy(this),this.indexManager=new Ny,this.remoteDocumentCache=function(i){return new qy(i)}(r=>this.referenceDelegate.Ur(r)),this.serializer=new Vy(t),this.Wr=new xy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new By,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.kr[e.toKey()];return r||(r=new jy(t,this.referenceDelegate),this.kr[e.toKey()]=r),r}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,t,r){Y("MemoryPersistence","Starting transaction:",e);const i=new Hy(this.qr.next());return this.referenceDelegate.Gr(),r(i).next(s=>this.referenceDelegate.zr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}jr(e,t){return B.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,t)))}}class Hy extends k_{constructor(e){super(),this.currentSequenceNumber=e}}class ca{constructor(e){this.persistence=e,this.Hr=new la,this.Jr=null}static Yr(e){return new ca(e)}get Zr(){if(this.Jr)return this.Jr;throw ie()}addReference(e,t,r){return this.Hr.addReference(r,t),this.Zr.delete(r.toString()),B.resolve()}removeReference(e,t,r){return this.Hr.removeReference(r,t),this.Zr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.Zr.add(t.toString()),B.resolve()}removeTarget(e,t){this.Hr.mr(t.targetId).forEach(i=>this.Zr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Zr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Gr(){this.Jr=new Set}zr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Zr,r=>{const i=ee.fromPath(r);return this.Xr(e,i).next(s=>{s||t.removeEntry(i,ae.min())})}).next(()=>(this.Jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Xr(e,t).next(r=>{r?this.Zr.delete(t.toString()):this.Zr.add(t.toString())})}Ur(e){return 0}Xr(e,t){return B.or([()=>B.resolve(this.Hr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.jr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ki=r,this.$i=i}static Ui(e,t){let r=me(),i=me();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ua(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return Jm()?8:P_(Ym())>0?6:4}()}initialize(e,t){this.Hi=e,this.indexManager=t,this.Wi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Yi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $y;return this.Zi(e,t,o).next(l=>{if(s.result=l,this.Gi)return this.Xi(e,t,o,l.size)})}).next(()=>s.result)}Xi(e,t,r,i){return r.documentReadCount<this.zi?(Ur()<=_e.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Yn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),B.resolve()):(Ur()<=_e.DEBUG&&Y("QueryEngine","Query:",Yn(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ji*i?(Ur()<=_e.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Yn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dt(t))):B.resolve())}Ji(e,t){if(ac(t))return B.resolve(null);let r=Dt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Vo(t,null,"F"),r=Dt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=me(...s);return this.Hi.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.es(t,l);return this.ts(t,u,o,c.readTime)?this.Ji(e,Vo(t,null,"F")):this.ns(e,u,t,c)}))})))}Yi(e,t,r,i){return ac(t)||i.isEqual(ae.min())?B.resolve(null):this.Hi.getDocuments(e,r).next(s=>{const o=this.es(t,s);return this.ts(t,o,r,i)?B.resolve(null):(Ur()<=_e.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Yn(t)),this.ns(e,o,t,I_(i,-1)).next(l=>l))})}es(e,t){let r=new st(Ph(e));return t.forEach((i,s)=>{ws(e,s)&&(r=r.add(s))}),r}ts(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Zi(e,t,r){return Ur()<=_e.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Yn(t)),this.Hi.getDocumentsMatchingQuery(e,t,dn.min(),r)}ns(e,t,r,i){return this.Hi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,t,r,i){this.persistence=e,this.rs=t,this.serializer=i,this.ss=new Ne(we),this.os=new br(s=>na(s),ra),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(r)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fy(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ss))}}function Yy(n,e,t,r){return new Qy(n,e,t,r)}async function Xh(n,e){const t=ce(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.cs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let c=me();for(const u of i){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of s){l.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(u=>({ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function Xy(n,e){const t=ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.us.newChangeBuffer({trackRemovals:!0});return function(l,c,u,f){const p=u.batch,m=p.keys();let v=B.resolve();return m.forEach(A=>{v=v.next(()=>f.getEntry(c,A)).next(O=>{const k=u.docVersions.get(A);Ie(k!==null),O.version.compareTo(k)<0&&(p.applyToRemoteDocument(O,u),O.isValidDocument()&&(O.setReadTime(u.commitVersion),f.addEntry(O)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=me();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Jh(n){const e=ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.$r.getLastRemoteSnapshotVersion(t))}function Jy(n,e){const t=ce(n),r=e.snapshotVersion;let i=t.ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.us.newChangeBuffer({trackRemovals:!0});i=t.ss;const l=[];e.targetChanges.forEach((f,p)=>{const m=i.get(p);if(!m)return;l.push(t.$r.removeMatchingKeys(s,f.removedDocuments,p).next(()=>t.$r.addMatchingKeys(s,f.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(at.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(p,v),function(O,k,D){return O.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(m,v,f)&&l.push(t.$r.updateTargetData(s,v))});let c=Ht(),u=me();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(Zy(s,o,e.documentUpdates).next(f=>{c=f.hs,u=f.Ps})),!r.isEqual(ae.min())){const f=t.$r.getLastRemoteSnapshotVersion(s).next(p=>t.$r.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return B.waitFor(l).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.ss=i,s))}function Zy(n,e,t){let r=me(),i=me();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ht();return t.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Y("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{hs:o,Ps:i}})}function ev(n,e){const t=ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tv(n,e){const t=ce(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.$r.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):t.$r.allocateTargetId(r).next(o=>(i=new an(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.$r.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ss=t.ss.insert(r.targetId,r),t.os.set(e,r.targetId)),r})}async function Lo(n,e,t){const r=ce(n),i=r.ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!mi(o))throw o;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ss=r.ss.remove(e),r.os.delete(i.target)}function yc(n,e,t){const r=ce(n);let i=ae.min(),s=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,f){const p=ce(c),m=p.os.get(f);return m!==void 0?B.resolve(p.ss.get(m)):p.$r.getTargetData(u,f)}(r,o,Dt(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.$r.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>r.rs.getDocumentsMatchingQuery(o,e,t?i:ae.min(),t?s:me())).next(l=>(nv(r,H_(e),l),{documents:l,Is:s})))}function nv(n,e,t){let r=n._s.get(e)||ae.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n._s.set(e,r)}class vc{constructor(){this.activeTargetIds=J_()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rv{constructor(){this.io=new vc,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,t,r){this.so[e]=t}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new vc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.lo)e(0)}co(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.lo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wi=null;function lo(){return Wi===null?Wi=function(){return 268435456+Math.round(2147483648*Math.random())}():Wi++,"0x"+Wi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class av extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.bo=r+"://"+t.host,this.Do=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get vo(){return!1}Fo(t,r,i,s,o){const l=lo(),c=this.Mo(t,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${t}' ${l}:`,c,i);const u={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(u,s,o),this.Oo(t,c,u,i).then(f=>(Y("RestConnection",`Received RPC '${t}' ${l}: `,f),f),f=>{throw or("RestConnection",`RPC '${t}' ${l} failed with error: `,f,"url: ",c,"request:",i),f})}No(t,r,i,s,o,l){return this.Fo(t,r,i,s,o)}xo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}Mo(t,r){const i=sv[t];return`${this.bo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,t,r,i){const s=lo();return new Promise((o,l)=>{const c=new ch;c.setWithCredentials(!0),c.listenOnce(hh.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ki.NO_ERROR:const f=c.getResponseJson();Y(ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ki.TIMEOUT:Y(ut,`RPC '${e}' ${s} timed out`),l(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Ki.HTTP_ERROR:const p=c.getStatus();if(Y(ut,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const A=function(k){const D=k.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(D)>=0?D:F.UNKNOWN}(v.status);l(new Q(A,v.message))}else l(new Q(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Q(F.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{Y(ut,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Y(ut,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Lo(e,t,r){const i=lo(),s=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ph(),l=dh(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new uh({})),this.xo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=s.join("");Y(ut,`Creating RPC '${e}' stream ${i}: ${f}`,c);const p=o.createWebChannel(f,c);let m=!1,v=!1;const A=new ov({Po:k=>{v?Y(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(m||(Y(ut,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),Y(ut,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},Io:()=>p.close()}),O=(k,D,P)=>{k.listen(D,L=>{try{P(L)}catch(R){setTimeout(()=>{throw R},0)}})};return O(p,qr.EventType.OPEN,()=>{v||(Y(ut,`RPC '${e}' stream ${i} transport opened.`),A.po())}),O(p,qr.EventType.CLOSE,()=>{v||(v=!0,Y(ut,`RPC '${e}' stream ${i} transport closed`),A.wo())}),O(p,qr.EventType.ERROR,k=>{v||(v=!0,or(ut,`RPC '${e}' stream ${i} transport errored:`,k),A.wo(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),O(p,qr.EventType.MESSAGE,k=>{var D;if(!v){const P=k.data[0];Ie(!!P);const L=P,R=L.error||((D=L[0])===null||D===void 0?void 0:D.error);if(R){Y(ut,`RPC '${e}' stream ${i} received error:`,R);const N=R.status;let z=function(w){const T=je[w];if(T!==void 0)return jh(T)}(N),E=R.message;z===void 0&&(z=F.INTERNAL,E="Unknown error status: "+N+" with message "+R.message),v=!0,A.wo(new Q(z,E)),p.close()}else Y(ut,`RPC '${e}' stream ${i} received:`,P),A.So(P)}}),O(l,fh.STAT_EVENT,k=>{k.stat===Ao.PROXY?Y(ut,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Ao.NOPROXY&&Y(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.yo()},0),A}}function co(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(n){return new _y(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ai=e,this.timerId=t,this.Bo=r,this.ko=i,this.qo=s,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();const t=Math.floor(this.Qo+this.Go()),r=Math.max(0,Date.now()-this.$o),i=Math.max(0,t-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Qo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,i,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t,r,i,s,o,l,c){this.ai=e,this.jo=r,this.Ho=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new Zh(e,t)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}async stop(){this.t_()&&await this.close(0)}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}async o_(){if(this.n_())return this.close(0)}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}async close(e,t){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,e!==4?this.e_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(Wt(t.toString()),Wt("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Vo(t)}c_(){}auth(){this.state=1;const e=this.l_(this.Jo),t=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Jo===t&&this.h_(r,i)},r=>{e(()=>{const i=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.P_(i)})})}h_(e,t){const r=this.l_(this.Jo);this.stream=this.I_(e,t),this.stream.To(()=>{r(()=>this.listener.To())}),this.stream.Ao(()=>{r(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(i=>{r(()=>this.P_(i))}),this.stream.onMessage(i=>{r(()=>++this.Xo==1?this.T_(i):this.onNext(i))})}r_(){this.state=5,this.e_.Wo(async()=>{this.state=0,this.start()})}P_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return t=>{this.ai.enqueueAndForget(()=>this.Jo===e?t():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lv extends ef{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}I_(e,t){return this.connection.Lo("Listen",e,t)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();const t=by(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?Ot(o.readTime):ae.min()}(e);return this.listener.E_(t,r)}d_(e){const t={};t.database=Mo(this.serializer),t.addTarget=function(s,o){let l;const c=o.target;if(l=Po(c)?{documents:Ty(s,c)}:{query:Iy(s,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Gh(s,o.resumeToken);const u=Do(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(ae.min())>0){l.readTime=us(s,o.snapshotVersion.toTimestamp());const u=Do(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=Ry(this.serializer,e);r&&(t.labels=r),this.__(t)}A_(e){const t={};t.database=Mo(this.serializer),t.removeTarget=e,this.__(t)}}class cv extends ef{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,t){return this.connection.Lo("Write",e,t)}T_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.m_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();const t=Ey(e.writeResults,e.commitTime),r=Ot(e.commitTime);return this.listener.f_(r,t)}g_(){const e={};e.database=Mo(this.serializer),this.__(e)}V_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>wy(this.serializer,r))};this.__(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.p_=!1}y_(){if(this.p_)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,t,r,i){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,No(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(F.UNKNOWN,s.toString())})}No(e,t,r,i,s){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.No(e,No(t,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.p_=!0,this.connection.terminate()}}class hv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,e==="Online"&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(Wt(t),this.b_=!1):Y("OnlineStateTracker",t)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=s,this.B_.oo(o=>{r.enqueueAndForget(async()=>{Bn(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=ce(c);u.N_.add(4),await vi(u),u.k_.set("Unknown"),u.N_.delete(4),await Rs(u)}(this))})}),this.k_=new hv(r,i)}}async function Rs(n){if(Bn(n))for(const e of n.L_)await e(!0)}async function vi(n){for(const e of n.L_)await e(!1)}function tf(n,e){const t=ce(n);t.O_.has(e.targetId)||(t.O_.set(e.targetId,e),pa(t)?da(t):wr(t).n_()&&fa(t,e))}function ha(n,e){const t=ce(n),r=wr(t);t.O_.delete(e),r.n_()&&nf(t,e),t.O_.size===0&&(r.n_()?r.s_():Bn(t)&&t.k_.set("Unknown"))}function fa(n,e){if(n.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wr(n).d_(e)}function nf(n,e){n.q_.xe(e),wr(n).A_(e)}function da(n){n.q_=new dy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.O_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),wr(n).start(),n.k_.D_()}function pa(n){return Bn(n)&&!wr(n).t_()&&n.O_.size>0}function Bn(n){return ce(n).N_.size===0}function rf(n){n.q_=void 0}async function dv(n){n.k_.set("Online")}async function pv(n){n.O_.forEach((e,t)=>{fa(n,e)})}async function mv(n,e){rf(n),pa(n)?(n.k_.F_(e),da(n)):n.k_.set("Unknown")}async function gv(n,e,t){if(n.k_.set("Online"),e instanceof zh&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.O_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.O_.delete(l),i.q_.removeTarget(l))}(n,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hs(n,r)}else if(e instanceof Xi?n.q_.Ke(e):e instanceof qh?n.q_.He(e):n.q_.We(e),!t.isEqual(ae.min()))try{const r=await Jh(n.localStore);t.compareTo(r)>=0&&await function(s,o){const l=s.q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.O_.get(u);f&&s.O_.set(u,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const f=s.O_.get(c);if(!f)return;s.O_.set(c,f.withResumeToken(at.EMPTY_BYTE_STRING,f.snapshotVersion)),nf(s,c);const p=new an(f.target,c,u,f.sequenceNumber);fa(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await hs(n,r)}}async function hs(n,e,t){if(!mi(e))throw e;n.N_.add(1),await vi(n),n.k_.set("Offline"),t||(t=()=>Jh(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await t(),n.N_.delete(1),await Rs(n)})}function sf(n,e){return e().catch(t=>hs(n,t,e))}async function Ss(n){const e=ce(n),t=mn(e);let r=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;_v(e);)try{const i=await ev(e.localStore,r);if(i===null){e.x_.length===0&&t.s_();break}r=i.batchId,yv(e,i)}catch(i){await hs(e,i)}of(e)&&af(e)}function _v(n){return Bn(n)&&n.x_.length<10}function yv(n,e){n.x_.push(e);const t=mn(n);t.n_()&&t.R_&&t.V_(e.mutations)}function of(n){return Bn(n)&&!mn(n).t_()&&n.x_.length>0}function af(n){mn(n).start()}async function vv(n){mn(n).g_()}async function bv(n){const e=mn(n);for(const t of n.x_)e.V_(t.mutations)}async function wv(n,e,t){const r=n.x_.shift(),i=sa.from(r,e,t);await sf(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Ss(n)}async function Ev(n,e){e&&mn(n).R_&&await async function(r,i){if(function(o){return uy(o)&&o!==F.ABORTED}(i.code)){const s=r.x_.shift();mn(r).i_(),await sf(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ss(r)}}(n,e),of(n)&&af(n)}async function wc(n,e){const t=ce(n);t.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=Bn(t);t.N_.add(3),await vi(t),r&&t.k_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.N_.delete(3),await Rs(t)}async function Tv(n,e){const t=ce(n);e?(t.N_.delete(2),await Rs(t)):e||(t.N_.add(2),await vi(t),t.k_.set("Unknown"))}function wr(n){return n.Q_||(n.Q_=function(t,r,i){const s=ce(t);return s.y_(),new lv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{To:dv.bind(null,n),Ao:pv.bind(null,n),Vo:mv.bind(null,n),E_:gv.bind(null,n)}),n.L_.push(async e=>{e?(n.Q_.i_(),pa(n)?da(n):n.k_.set("Unknown")):(await n.Q_.stop(),rf(n))})),n.Q_}function mn(n){return n.K_||(n.K_=function(t,r,i){const s=ce(t);return s.y_(),new cv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{To:()=>Promise.resolve(),Ao:vv.bind(null,n),Vo:Ev.bind(null,n),m_:bv.bind(null,n),f_:wv.bind(null,n)}),n.L_.push(async e=>{e?(n.K_.i_(),await Ss(n)):(await n.K_.stop(),n.x_.length>0&&(Y("RemoteStore",`Stopping write stream with ${n.x_.length} pending writes`),n.x_=[]))})),n.K_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,l=new ma(e,t,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ga(n,e){if(Wt("AsyncQueue",`${e}: ${n}`),mi(n))return new Q(F.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=zr(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new tr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof tr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new tr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(){this.U_=new Ne(ee.comparator)}track(e){const t=e.doc.key,r=this.U_.get(t);r?e.type!==0&&r.type===3?this.U_=this.U_.insert(t,e):e.type===3&&r.type!==1?this.U_=this.U_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.U_=this.U_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.U_=this.U_.remove(t):e.type===1&&r.type===2?this.U_=this.U_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):ie():this.U_=this.U_.insert(t,e)}W_(){const e=[];return this.U_.inorderTraversal((t,r)=>{e.push(r)}),e}}class hr{constructor(e,t,r,i,s,o,l,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new hr(e,t,tr.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}}class Av{constructor(){this.queries=Tc(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(t,r){const i=ce(t),s=i.queries;i.queries=Tc(),s.forEach((o,l)=>{for(const c of l.z_)c.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function Tc(){return new br(n=>kh(n),bs)}async function Rv(n,e){const t=ce(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.j_()&&e.H_()&&(r=2):(s=new Iv,r=e.H_()?0:1);try{switch(r){case 0:s.G_=await t.onListen(i,!0);break;case 1:s.G_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const l=ga(o,`Initialization of query '${Yn(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,s),s.z_.push(e),e.Y_(t.onlineState),s.G_&&e.Z_(s.G_)&&_a(t)}async function Sv(n,e){const t=ce(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.z_.indexOf(e);o>=0&&(s.z_.splice(o,1),s.z_.length===0?i=e.H_()?0:1:!s.j_()&&e.H_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function kv(n,e){const t=ce(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const l of o.z_)l.Z_(i)&&(r=!0);o.G_=i}}r&&_a(t)}function Pv(n,e,t){const r=ce(n),i=r.queries.get(e);if(i)for(const s of i.z_)s.onError(t);r.queries.delete(e)}function _a(n){n.J_.forEach(e=>{e.next()})}var Fo,Ic;(Ic=Fo||(Fo={})).X_="default",Ic.Cache="cache";class Cv{constructor(e,t,r){this.query=e,this.ea=t,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=r||{}}Z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new hr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ta?this.ra(e)&&(this.ea.next(e),t=!0):this.ia(e,this.onlineState)&&(this.sa(e),t=!0),this.na=e,t}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let t=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),t=!0),t}ia(e,t){if(!e.fromCache||!this.H_())return!0;const r=t!=="Offline";return(!this.options.oa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ra(e){if(e.docChanges.length>0)return!0;const t=this.na&&this.na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}sa(e){e=hr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==Fo.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e){this.key=e}}class cf{constructor(e){this.key=e}}class Vv{constructor(e,t){this.query=e,this.Ia=t,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=me(),this.mutatedKeys=me(),this.da=Ph(e),this.Aa=new tr(this.da)}get Ra(){return this.Ia}Va(e,t){const r=t?t.ma:new Ec,i=t?t.Aa:this.Aa;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const m=i.get(f),v=ws(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),O=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let k=!1;m&&v?m.data.isEqual(v.data)?A!==O&&(r.track({type:3,doc:v}),k=!0):this.fa(m,v)||(r.track({type:2,doc:v}),k=!0,(c&&this.da(v,c)>0||u&&this.da(v,u)<0)&&(l=!0)):!m&&v?(r.track({type:0,doc:v}),k=!0):m&&!v&&(r.track({type:1,doc:m}),k=!0,(c||u)&&(l=!0)),k&&(v?(o=o.add(v),s=O?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Aa:o,ma:r,ts:l,mutatedKeys:s}}fa(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;const o=e.ma.W_();o.sort((f,p)=>function(v,A){const O=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return O(v)-O(A)}(f.type,p.type)||this.da(f.doc,p.doc)),this.ga(r),i=i!=null&&i;const l=t&&!i?this.pa():[],c=this.Ea.size===0&&this.current&&!i?1:0,u=c!==this.Ta;return this.Ta=c,o.length!==0||u?{snapshot:new hr(this.query,e.Aa,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ya:l}:{ya:l}}Y_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new Ec,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(t=>this.Ia=this.Ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ia=this.Ia.delete(t)),this.current=e.current)}pa(){if(!this.current)return[];const e=this.Ea;this.Ea=me(),this.Aa.forEach(r=>{this.wa(r.key)&&(this.Ea=this.Ea.add(r.key))});const t=[];return e.forEach(r=>{this.Ea.has(r)||t.push(new cf(r))}),this.Ea.forEach(r=>{e.has(r)||t.push(new lf(r))}),t}Sa(e){this.Ia=e.Is,this.Ea=me();const t=this.Va(e.documents);return this.applyChanges(t,!0)}ba(){return hr.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}}class Dv{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Nv{constructor(e){this.key=e,this.Da=!1}}class Ov{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.va=new br(l=>kh(l),bs),this.Fa=new Map,this.Ma=new Set,this.xa=new Ne(ee.comparator),this.Oa=new Map,this.Na=new la,this.La={},this.Ba=new Map,this.ka=ur.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}}async function Mv(n,e,t=!0){const r=mf(n);let i;const s=r.va.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ba()):i=await uf(r,e,t,!0),i}async function Lv(n,e){const t=mf(n);await uf(t,e,!0,!1)}async function uf(n,e,t,r){const i=await tv(n.localStore,Dt(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let l;return r&&(l=await Fv(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&tf(n.remoteStore,i),l}async function Fv(n,e,t,r,i){n.Qa=(p,m,v)=>async function(O,k,D,P){let L=k.view.Va(D);L.ts&&(L=await yc(O.localStore,k.query,!1).then(({documents:E})=>k.view.Va(E,L)));const R=P&&P.targetChanges.get(k.targetId),N=P&&P.targetMismatches.get(k.targetId)!=null,z=k.view.applyChanges(L,O.isPrimaryClient,R,N);return Rc(O,k.targetId,z.ya),z.snapshot}(n,p,m,v);const s=await yc(n.localStore,e,!0),o=new Vv(e,s.Is),l=o.Va(s.documents),c=yi.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(l,n.isPrimaryClient,c);Rc(n,t,u.ya);const f=new Dv(e,t,o);return n.va.set(e,f),n.Fa.has(t)?n.Fa.get(t).push(e):n.Fa.set(t,[e]),u.snapshot}async function xv(n,e,t){const r=ce(n),i=r.va.get(e),s=r.Fa.get(i.targetId);if(s.length>1)return r.Fa.set(i.targetId,s.filter(o=>!bs(o,e))),void r.va.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Lo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ha(r.remoteStore,i.targetId),xo(r,i.targetId)}).catch(pi)):(xo(r,i.targetId),await Lo(r.localStore,i.targetId,!0))}async function Bv(n,e){const t=ce(n),r=t.va.get(e),i=t.Fa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ha(t.remoteStore,r.targetId))}async function Uv(n,e,t){const r=$v(n);try{const i=await function(o,l){const c=ce(o),u=Be.now(),f=l.reduce((v,A)=>v.add(A.key),me());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let A=Ht(),O=me();return c.us.getEntries(v,f).next(k=>{A=k,A.forEach((D,P)=>{P.isValidDocument()||(O=O.add(D))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,A)).next(k=>{p=k;const D=[];for(const P of l){const L=sy(P,p.get(P.key).overlayedDocument);L!=null&&D.push(new xn(P.key,L,vh(L.value.mapValue),Nt.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,D,l)}).next(k=>{m=k;const D=k.applyToLocalDocumentSet(p,O);return c.documentOverlayCache.saveOverlays(v,k.batchId,D)})}).then(()=>({batchId:m.batchId,changes:Vh(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let u=o.La[o.currentUser.toKey()];u||(u=new Ne(we)),u=u.insert(l,c),o.La[o.currentUser.toKey()]=u}(r,i.batchId,t),await bi(r,i.changes),await Ss(r.remoteStore)}catch(i){const s=ga(i,"Failed to persist write");t.reject(s)}}async function hf(n,e){const t=ce(n);try{const r=await Jy(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Oa.get(s);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Da=!0:i.modifiedDocuments.size>0?Ie(o.Da):i.removedDocuments.size>0&&(Ie(o.Da),o.Da=!1))}),await bi(t,r,e)}catch(r){await pi(r)}}function Ac(n,e,t){const r=ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.va.forEach((s,o)=>{const l=o.view.Y_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=ce(o);c.onlineState=l;let u=!1;c.queries.forEach((f,p)=>{for(const m of p.z_)m.Y_(l)&&(u=!0)}),u&&_a(c)}(r.eventManager,e),i.length&&r.Ca.E_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jv(n,e,t){const r=ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oa.get(e),s=i&&i.key;if(s){let o=new Ne(ee.comparator);o=o.insert(s,ft.newNoDocument(s,ae.min()));const l=me().add(s),c=new Is(ae.min(),new Map,new Ne(we),o,l);await hf(r,c),r.xa=r.xa.remove(s),r.Oa.delete(e),ya(r)}else await Lo(r.localStore,e,!1).then(()=>xo(r,e,t)).catch(pi)}async function qv(n,e){const t=ce(n),r=e.batch.batchId;try{const i=await Xy(t.localStore,e);df(t,r,null),ff(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await bi(t,i)}catch(i){await pi(i)}}async function zv(n,e,t){const r=ce(n);try{const i=await function(o,l){const c=ce(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,l).next(p=>(Ie(p!==null),f=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(r.localStore,e);df(r,e,t),ff(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await bi(r,i)}catch(i){await pi(i)}}function ff(n,e){(n.Ba.get(e)||[]).forEach(t=>{t.resolve()}),n.Ba.delete(e)}function df(n,e,t){const r=ce(n);let i=r.La[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.La[r.currentUser.toKey()]=i}}function xo(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fa.get(e))n.va.delete(r),t&&n.Ca.Ka(r,t);n.Fa.delete(e),n.isPrimaryClient&&n.Na.mr(e).forEach(r=>{n.Na.containsKey(r)||pf(n,r)})}function pf(n,e){n.Ma.delete(e.path.canonicalString());const t=n.xa.get(e);t!==null&&(ha(n.remoteStore,t),n.xa=n.xa.remove(e),n.Oa.delete(t),ya(n))}function Rc(n,e,t){for(const r of t)r instanceof lf?(n.Na.addReference(r.key,e),Gv(n,r)):r instanceof cf?(Y("SyncEngine","Document no longer in limbo: "+r.key),n.Na.removeReference(r.key,e),n.Na.containsKey(r.key)||pf(n,r.key)):ie()}function Gv(n,e){const t=e.key,r=t.path.canonicalString();n.xa.get(t)||n.Ma.has(r)||(Y("SyncEngine","New document in limbo: "+t),n.Ma.add(r),ya(n))}function ya(n){for(;n.Ma.size>0&&n.xa.size<n.maxConcurrentLimboResolutions;){const e=n.Ma.values().next().value;n.Ma.delete(e);const t=new ee(ke.fromString(e)),r=n.ka.next();n.Oa.set(r,new Nv(t)),n.xa=n.xa.insert(t,r),tf(n.remoteStore,new an(Dt(Rh(t.path)),r,"TargetPurposeLimboResolution",Jo.oe))}}async function bi(n,e,t){const r=ce(n),i=[],s=[],o=[];r.va.isEmpty()||(r.va.forEach((l,c)=>{o.push(r.Qa(c,e,t).then(u=>{var f;if((u||t)&&r.isPrimaryClient){const p=u?!u.fromCache:(f=t==null?void 0:t.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){i.push(u);const p=ua.Ui(c.targetId,u);s.push(p)}}))}),await Promise.all(o),r.Ca.E_(i),await async function(c,u){const f=ce(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(u,m=>B.forEach(m.Ki,v=>f.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>B.forEach(m.$i,v=>f.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!mi(p))throw p;Y("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const v=f.ss.get(m),A=v.snapshotVersion,O=v.withLastLimboFreeSnapshotVersion(A);f.ss=f.ss.insert(m,O)}}}(r.localStore,s))}async function Wv(n,e){const t=ce(n);if(!t.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await Xh(t.localStore,e);t.currentUser=e,function(s,o){s.Ba.forEach(l=>{l.forEach(c=>{c.reject(new Q(F.CANCELLED,o))})}),s.Ba.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bi(t,r.ls)}}function Hv(n,e){const t=ce(n),r=t.Oa.get(e);if(r&&r.Da)return me().add(r.key);{let i=me();const s=t.Fa.get(e);if(!s)return i;for(const o of s){const l=t.va.get(o);i=i.unionWith(l.view.Ra)}return i}}function mf(n){const e=ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jv.bind(null,e),e.Ca.E_=kv.bind(null,e.eventManager),e.Ca.Ka=Pv.bind(null,e.eventManager),e}function $v(n){const e=ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zv.bind(null,e),e}class Sc{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=As(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Yy(this.persistence,new Ky,e.initialUser,this.serializer)}createPersistence(e){return new Wy(ca.Yr,this.serializer)}createSharedClientState(e){return new rv}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Kv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ac(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wv.bind(null,this.syncEngine),await Tv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Av}()}createDatastore(e){const t=As(e.databaseInfo.databaseId),r=function(s){return new av(s)}(e.databaseInfo);return function(s,o,l,c){return new uv(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,l){return new fv(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,t=>Ac(this.syncEngine,t,0),function(){return bc.D()?new bc:new iv}())}createSyncEngine(e,t){return function(i,s,o,l,c,u,f){const p=new Ov(i,s,o,l,c,u);return f&&(p.qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=ce(i);Y("RemoteStore","RemoteStore shutting down."),s.N_.add(5),await vi(s),s.B_.shutdown(),s.k_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):Wt("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ht.UNAUTHENTICATED,this.clientId=gh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Y("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Y("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ga(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function uo(n,e){n.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Xh(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function kc(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Jv(n);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>wc(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>wc(e.remoteStore,i)),n._onlineComponents=e}function Xv(n){return n.name==="FirebaseError"?n.code===F.FAILED_PRECONDITION||n.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function Jv(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await uo(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Xv(t))throw t;or("Error using user provided cache. Falling back to memory cache: "+t),await uo(n,new Sc)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await uo(n,new Sc);return n._offlineComponents}async function gf(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await kc(n,n._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await kc(n,new Kv))),n._onlineComponents}function Zv(n){return gf(n).then(e=>e.syncEngine)}async function e0(n){const e=await gf(n),t=e.eventManager;return t.onListen=Mv.bind(null,e.syncEngine),t.onUnlisten=xv.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Lv.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Bv.bind(null,e.syncEngine),t}function t0(n,e,t={}){const r=new un;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const f=new Qv({next:m=>{o.enqueueAndForget(()=>Sv(s,p)),m.fromCache&&c.source==="server"?u.reject(new Q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new Cv(l,f,{includeMetadataChanges:!0,oa:!0});return Rv(s,p)}(await e0(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(n,e,t){if(!t)throw new Q(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function n0(n,e,t,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Cc(n){if(!ee.isDocumentKey(n))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Vc(n){if(ee.isDocumentKey(n))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ks(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ie()}function fr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ks(n);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_f((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ps{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dc(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new m_;switch(r.type){case"firstParty":return new v_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Pc.get(t);r&&(Y("ComponentProvider","Removing Datastore"),Pc.delete(t),r.terminate())}(this),Promise.resolve()}}function r0(n,e,t,r={}){var i;const s=(n=fr(n,Ps))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=ht.MOCK_USER;else{l=Qm(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ht(u)}n._authCredentials=new g_(new mh(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Er(this.firestore,e,this._query)}}class wt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}}class hn extends Er{constructor(e,t,r){super(e,t,Rh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new ee(e))}withConverter(e){return new hn(this.firestore,e,this._path)}}function i0(n,e,...t){if(n=sr(n),yf("collection","path",e),n instanceof Ps){const r=ke.fromString(e,...t);return Vc(r),new hn(n,null,r)}{if(!(n instanceof wt||n instanceof hn))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ke.fromString(e,...t));return Vc(r),new hn(n.firestore,null,r)}}function s0(n,e,...t){if(n=sr(n),arguments.length===1&&(e=gh.newId()),yf("doc","path",e),n instanceof Ps){const r=ke.fromString(e,...t);return Cc(r),new wt(n,null,new ee(r))}{if(!(n instanceof wt||n instanceof hn))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ke.fromString(e,...t));return Cc(r),new wt(n.firestore,n instanceof hn?n.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new Zh(this,"async_queue_retry"),this.Tu=()=>{const t=co();t&&Y("AsyncQueue","Visibility state changed to "+t.visibilityState),this.e_.zo()};const e=co();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;const t=co();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});const t=new un;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}async Au(){if(this.au.length!==0){try{await this.au[0](),this.au.shift(),this.e_.reset()}catch(e){if(!mi(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.au.length>0&&this.e_.Wo(()=>this.Au())}}du(e){const t=this._u.then(()=>(this.hu=!0,e().catch(r=>{this.lu=r,this.hu=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Wt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.hu=!1,r))));return this._u=t,t}enqueueAfterDelay(e,t,r){this.Eu(),this.Iu.indexOf(e)>-1&&(t=0);const i=ma.createAndSchedule(this,e,t,r,s=>this.Ru(s));return this.cu.push(i),i}Eu(){this.lu&&ie()}verifyOperationInProgress(){}async Vu(){let e;do e=this._u,await e;while(e!==this._u)}mu(e){for(const t of this.cu)if(t.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.cu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){const t=this.cu.indexOf(e);this.cu.splice(t,1)}}class Cs extends Ps{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new o0}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||bf(this),this._firestoreClient.terminate()}}function a0(n,e){const t=typeof n=="object"?n:r_(),r=typeof n=="string"?n:"(default)",i=Zg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=$m("firestore");s&&r0(i,...s)}return i}function vf(n){return n._firestoreClient||bf(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function bf(n){var e,t,r;const i=n._freezeSettings(),s=function(l,c,u,f){return new D_(l,c,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,_f(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Yv(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dr(at.fromBase64String(e))}catch(t){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new dr(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=/^__.*__$/;class c0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new xn(e,this.data,this.fieldMask,t,this.fieldTransforms):new _i(e,this.data,t,this.fieldTransforms)}}function Ef(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class wa{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new wa(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.wu({path:r,bu:!1});return i.Du(e),i}Cu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.wu({path:r,bu:!1});return i.pu(),i}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return fs(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(e.length===0)throw this.Fu("Document fields must not be empty");if(Ef(this.yu)&&l0.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}}class u0{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||As(e)}Ou(e,t,r,i=!1){return new wa({yu:e,methodName:t,xu:r,path:it.emptyPath(),bu:!1,Mu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tf(n){const e=n._freezeSettings(),t=As(n._databaseId);return new u0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function h0(n,e,t,r,i,s={}){const o=n.Ou(s.merge||s.mergeFields?2:0,e,t,i);Rf("Data must be an object, but it was:",o,r);const l=If(r,o);let c,u;if(s.merge)c=new St(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const m=d0(e,p,t);if(!o.contains(m))throw new Q(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);m0(f,m)||f.push(m)}c=new St(f),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new c0(new Tt(l),c,u)}function f0(n,e,t,r=!1){return Ea(t,n.Ou(r?4:3,e))}function Ea(n,e){if(Af(n=sr(n)))return Rf("Unsupported field value:",e,n),If(n,e);if(n instanceof wf)return function(r,i){if(!Ef(i.yu))throw i.Fu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Fu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.bu&&e.yu!==4)throw e.Fu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let c=Ea(l,i.vu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=sr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Z_(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Be.fromDate(r);return{timestampValue:us(i.serializer,s)}}if(r instanceof Be){const s=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:us(i.serializer,s)}}if(r instanceof ba)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dr)return{bytesValue:Gh(i.serializer,r._byteString)};if(r instanceof wt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Fu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:aa(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Fu(`Unsupported field value: ${ks(r)}`)}(n,e)}function If(n,e){const t={};return _h(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vr(n,(r,i)=>{const s=Ea(i,e.Su(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Af(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Be||n instanceof ba||n instanceof dr||n instanceof wt||n instanceof wf)}function Rf(n,e,t){if(!Af(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=ks(t);throw r==="an object"?e.Fu(n+" a custom object"):e.Fu(n+" "+r)}}function d0(n,e,t){if((e=sr(e))instanceof va)return e._internalPath;if(typeof e=="string")return Sf(n,e);throw fs("Field path arguments must be of type string or ",n,!1,void 0,t)}const p0=new RegExp("[~\\*/\\[\\]]");function Sf(n,e,t){if(e.search(p0)>=0)throw fs(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new va(...e.split("."))._internalPath}catch{throw fs(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fs(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Q(F.INVALID_ARGUMENT,l+n+c)}function m0(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new g0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ta("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class g0 extends kf{data(){return super.data()}}function Ta(n,e){return typeof e=="string"?Sf(n,e):e instanceof va?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ia{}class y0 extends Ia{}function Aa(n,e,...t){let r=[];e instanceof Ia&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof Sa).length,l=s.filter(c=>c instanceof Vs).length;if(o>1||o>0&&l>0)throw new Q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Vs extends y0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Vs(e,t,r)}_apply(e){const t=this._parse(e);return Pf(e._query,t),new Er(e.firestore,e.converter,Co(e._query,t))}_parse(e){const t=Tf(e.firestore);return function(s,o,l,c,u,f,p){let m;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Oc(p,f);const v=[];for(const A of p)v.push(Nc(c,s,A));m={arrayValue:{values:v}}}else m=Nc(c,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Oc(p,f),m=f0(l,o,p,f==="in"||f==="not-in");return ze.create(u,f,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ra(n,e,t){const r=e,i=Ta("where",n);return Vs._create(i,r,t)}class Sa extends Ia{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sa(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:kt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const c of l)Pf(o,c),o=Co(o,c)}(e._query,t),new Er(e.firestore,e.converter,Co(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Nc(n,e,t){if(typeof(t=sr(t))=="string"){if(t==="")throw new Q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sh(e)&&t.indexOf("/")!==-1)throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ke.fromString(t));if(!ee.isDocumentKey(r))throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tc(n,new ee(r))}if(t instanceof wt)return tc(n,t._key);throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ks(t)}.`)}function Oc(n,e){if(!Array.isArray(n)||n.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Pf(n,e){const t=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class v0{convertValue(e,t="none"){switch(Fn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ln(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return vr(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new ba(qe(e.latitude),qe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ea(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ri(e));default:return null}}convertTimestamp(e){const t=pn(e);return new Be(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ke.fromString(e);Ie(Yh(r));const i=new ii(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(t)||Wt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class w0 extends kf{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ji(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ta("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ji extends w0{data(e={}){return super.data(e)}}class E0{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ji(this._firestore,this._userDataWriter,r.key,r,new Hi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new Ji(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Hi(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Ji(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Hi(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:T0(l.type),doc:c,oldIndex:u,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function T0(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}class I0 extends v0{constructor(e){super(),this.firestore=e}convertBytes(e){return new dr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}}function ka(n){n=fr(n,Er);const e=fr(n.firestore,Cs),t=vf(e),r=new I0(e);return _0(n._query),t0(t,n._query).then(i=>new E0(e,r,n,i))}function A0(n,e,t){n=fr(n,wt);const r=fr(n.firestore,Cs),i=b0(n.converter,e);return Cf(r,[h0(Tf(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Nt.none())])}function R0(n){return Cf(fr(n.firestore,Cs),[new ia(n._key,Nt.none())])}function Cf(n,e){return function(r,i){const s=new un;return r.asyncQueue.enqueueAndForget(async()=>Uv(await Zv(r),i,s)),s.promise}(vf(n),e)}(function(e,t=!0){(function(i){yr=i})(n_),is(new ei("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Cs(new __(r.getProvider("auth-internal")),new w_(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ii(u.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),er(Xl,"4.6.5",e),er(Xl,"4.6.5","esm2017")})();const S0={apiKey:"AIzaSyDExPMf40dyNgq6JDEwpJk8fwDj5oATReQ",authDomain:"cryptolink-4f53a.firebaseapp.com",projectId:"cryptolink-4f53a",storageBucket:"cryptolink-4f53a.appspot.com",messagingSenderId:"1024017217150",appId:"1:1024017217150:web:21f1ffd69ce51f68e4ca2f",measurementId:"G-6C2RKMD9HD"},k0=sh(S0),P0=a0(k0);function C0(n){return{c:X,m:X,d:X}}function V0(n){let e,t,r;return{c(){e=_t("svg"),t=_t("path"),r=_t("path"),C(t,"d","M32.427,7.987c2.183,0.124 4,1.165 5.096,3.281l17.936,36.208c1.739,3.66 -0.954,8.585 -5.373,8.656l-36.119,0c-4.022,-0.064 -7.322,-4.631 -5.352,-8.696l18.271,-36.207c0.342,-0.65 0.498,-0.838 0.793,-1.179c1.186,-1.375 2.483,-2.111 4.748,-2.063Zm-0.295,3.997c-0.687,0.034 -1.316,0.419 -1.659,1.017c-6.312,11.979 -12.397,24.081 -18.301,36.267c-0.546,1.225 0.391,2.797 1.762,2.863c12.06,0.195 24.125,0.195 36.185,0c1.325,-0.064 2.321,-1.584 1.769,-2.85c-5.793,-12.184 -11.765,-24.286 -17.966,-36.267c-0.366,-0.651 -0.903,-1.042 -1.79,-1.03Z"),C(r,"d","M33.631,40.581l-3.348,0l-0.368,-16.449l4.1,0l-0.384,16.449Zm-3.828,5.03c0,-0.609 0.197,-1.113 0.592,-1.514c0.396,-0.4 0.935,-0.601 1.618,-0.601c0.684,0 1.223,0.201 1.618,0.601c0.395,0.401 0.593,0.905 0.593,1.514c0,0.587 -0.193,1.078 -0.577,1.473c-0.385,0.395 -0.929,0.593 -1.634,0.593c-0.705,0 -1.249,-0.198 -1.634,-0.593c-0.384,-0.395 -0.576,-0.886 -0.576,-1.473Z"),C(e,"viewBox","0 0 64 64"),C(e,"fill","currentColor"),C(e,"height","20"),C(e,"width","20"),C(e,"xmlns","http://www.w3.org/2000/svg")},m(i,s){j(i,e,s),K(e,t),K(e,r)},d(i){i&&U(e)}}}function D0(n){let e,t;return{c(){e=_t("svg"),t=_t("path"),C(t,"fill-rule","evenodd"),C(t,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z"),C(t,"clip-rule","evenodd"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox","0 0 20 20"),C(e,"fill","currentColor"),C(e,"height","20"),C(e,"width","20")},m(r,i){j(r,e,i),K(e,t)},d(r){r&&U(e)}}}function N0(n){let e,t;return{c(){e=_t("svg"),t=_t("path"),C(t,"fill-rule","evenodd"),C(t,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z"),C(t,"clip-rule","evenodd"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox","0 0 20 20"),C(e,"fill","currentColor"),C(e,"height","20"),C(e,"width","20")},m(r,i){j(r,e,i),K(e,t)},d(r){r&&U(e)}}}function O0(n){let e,t;return{c(){e=_t("svg"),t=_t("path"),C(t,"fill-rule","evenodd"),C(t,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z"),C(t,"clip-rule","evenodd"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox","0 0 20 20"),C(e,"fill","currentColor"),C(e,"height","20"),C(e,"width","20")},m(r,i){j(r,e,i),K(e,t)},d(r){r&&U(e)}}}function M0(n){let e;function t(s,o){return s[0]==="success"?O0:s[0]==="error"?N0:s[0]==="info"?D0:s[0]==="warning"?V0:C0}let r=t(n),i=r(n);return{c(){i.c(),e=Fe()},m(s,o){i.m(s,o),j(s,e,o)},p(s,[o]){r!==(r=t(s))&&(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},i:X,o:X,d(s){s&&U(e),i.d(s)}}}function L0(n,e,t){let{type:r="success"}=e;return n.$$set=i=>{"type"in i&&t(0,r=i.type)},[r]}let Ds=class extends We{constructor(e){super(),Ge(this,e,L0,M0,Oe,{type:0})}};function F0(n,e,t){const r=n.slice();return r[2]=e[t],r[4]=t,r}function x0(n,e){let t;return{key:n,first:null,c(){t=J("div"),C(t,"class","sonner-loading-bar"),this.first=t},m(r,i){j(r,t,i)},p:X,d(r){r&&U(t)}}}function B0(n){let e,t,r=[],i=new Map,s=Gt(n[1]);const o=l=>l[4];for(let l=0;l<s.length;l+=1){let c=F0(n,s,l),u=o(c);i.set(u,r[l]=x0(u))}return{c(){e=J("div"),t=J("div");for(let l=0;l<r.length;l+=1)r[l].c();C(t,"class","sonner-spinner"),C(e,"class","sonner-loading-wrapper"),C(e,"data-visible",n[0])},m(l,c){j(l,e,c),K(e,t);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(t,null)},p(l,[c]){c&1&&C(e,"data-visible",l[0])},i:X,o:X,d(l){l&&U(e);for(let c=0;c<r.length;c+=1)r[c].d()}}}function U0(n,e,t){let{visible:r}=e;const i=Array(12).fill(0);return n.$$set=s=>{"visible"in s&&t(0,r=s.visible)},[r,i]}class j0 extends We{constructor(e){super(),Ge(this,e,U0,B0,Oe,{visible:0})}}function At(...n){return n.filter(Boolean).join(" ")}const Mc=typeof document<"u";function Lc(n){const e=vt(n);function t(i){Mc&&e.set(i)}function r(i){Mc&&e.update(i)}return{subscribe:e.subscribe,set:t,update:r}}let Fc=0;function q0(){const n=Lc([]),e=Lc([]);function t(D){n.update(P=>[D,...P])}function r(D){var w;const{message:P,...L}=D,R=typeof(D==null?void 0:D.id)=="number"||D.id&&((w=D.id)==null?void 0:w.length)>0?D.id:Fc++,N=D.dismissable===void 0?!0:D.dismissable,z=D.type===void 0?"default":D.type;return Qr(n).find(T=>T.id===R)?n.update(T=>T.map(I=>I.id===R?{...I,...D,id:R,title:P,dismissable:N,type:z,updated:!0}:{...I,updated:!1})):t({...L,id:R,title:P,dismissable:N,type:z}),R}function i(D){if(D===void 0){n.update(P=>P.map(L=>({...L,dismiss:!0})));return}return n.update(P=>P.map(L=>L.id===D?{...L,dismiss:!0}:L)),D}function s(D){if(D===void 0){n.set([]);return}return n.update(P=>P.filter(L=>L.id!==D)),D}function o(D,P){return r({...P,type:"default",message:D})}function l(D,P){return r({...P,type:"error",message:D})}function c(D,P){return r({...P,type:"success",message:D})}function u(D,P){return r({...P,type:"info",message:D})}function f(D,P){return r({...P,type:"warning",message:D})}function p(D,P){return r({...P,type:"loading",message:D})}function m(D,P){if(!P)return;let L;P.loading!==void 0&&(L=r({...P,promise:D,type:"loading",message:P.loading}));const R=D instanceof Promise?D:D();let N=L!==void 0;return R.then(z=>{if(z&&typeof z.ok=="boolean"&&!z.ok){N=!1;const E=typeof P.error=="function"?P.error(`HTTP error! status: ${z.status}`):P.error;r({id:L,type:"error",message:E})}else if(P.success!==void 0){N=!1;const E=typeof P.success=="function"?P.success(z):P.success;r({id:L,type:"success",message:E})}}).catch(z=>{if(P.error!==void 0){N=!1;const E=typeof P.error=="function"?P.error(z):P.error;r({id:L,type:"error",message:E})}}).finally(()=>{var z;N&&(i(L),L=void 0),(z=P.finally)==null||z.call(P)}),L}function v(D,P){const L=(P==null?void 0:P.id)||Fc++;return r({component:D,id:L,...P}),L}function A(D){e.update(P=>P.filter(L=>L.toastId!==D))}function O(D){if(Qr(e).find(L=>L.toastId===D.toastId)===void 0){e.update(L=>[D,...L]);return}e.update(L=>L.map(R=>R.toastId===D.toastId?D:R))}function k(){n.set([]),e.set([])}return{create:r,addToast:t,dismiss:i,remove:s,message:o,error:l,success:c,info:u,warning:f,loading:p,promise:m,custom:v,removeHeight:A,setHeight:O,reset:k,toasts:n,heights:e}}const Et=q0();function z0(n,e){return Et.create({message:n,...e})}const G0=z0,W0=Object.assign(G0,{success:Et.success,info:Et.info,warning:Et.warning,error:Et.error,custom:Et.custom,message:Et.message,promise:Et.promise,dismiss:Et.dismiss,loading:Et.loading}),H0=n=>({subscribe:n}),$0=n=>({}),xc=n=>({}),K0=n=>({}),Bc=n=>({}),Q0=n=>({}),Uc=n=>({}),Y0=n=>({}),jc=n=>({}),X0=n=>({}),qc=n=>({});function zc(n){let e,t,r,i,s,o,l;return{c(){var c,u,f;e=J("button"),t=_t("svg"),r=_t("line"),i=_t("line"),C(r,"x1","18"),C(r,"y1","6"),C(r,"x2","6"),C(r,"y2","18"),C(i,"x1","6"),C(i,"y1","6"),C(i,"x2","18"),C(i,"y2","18"),C(t,"xmlns","http://www.w3.org/2000/svg"),C(t,"width","12"),C(t,"height","12"),C(t,"viewBox","0 0 24 24"),C(t,"fill","none"),C(t,"stroke","currentColor"),C(t,"stroke-width","1.5"),C(t,"stroke-linecap","round"),C(t,"stroke-linejoin","round"),C(e,"aria-label","Close toast"),C(e,"data-disabled",n[22]),C(e,"data-close-button",""),C(e,"class",s=At((c=n[1])==null?void 0:c.closeButton,(f=(u=n[2])==null?void 0:u.classes)==null?void 0:f.closeButton))},m(c,u){j(c,e,u),K(e,t),K(t,r),K(t,i),o||(l=ye(e,"click",function(){pr(n[22]?void 0:n[49])&&(n[22]?void 0:n[49]).apply(this,arguments)}),o=!0)},p(c,u){var f,p,m;n=c,u[0]&4194304&&C(e,"data-disabled",n[22]),u[0]&6&&s!==(s=At((f=n[1])==null?void 0:f.closeButton,(m=(p=n[2])==null?void 0:p.classes)==null?void 0:m.closeButton))&&C(e,"class",s)},d(c){c&&U(e),o=!1,l()}}}function J0(n){let e,t,r,i,s,o,l,c=(n[11]!=="default"||n[2].icon||n[2].promise)&&Gc(n),u=n[2].title&&Hc(n),f=n[2].description&&$c(n),p=n[2].cancel&&Kc(n),m=n[2].action&&Qc(n);return{c(){c&&c.c(),e=Ee(),t=J("div"),u&&u.c(),r=Ee(),f&&f.c(),i=Ee(),p&&p.c(),s=Ee(),m&&m.c(),o=Fe(),C(t,"data-content","")},m(v,A){c&&c.m(v,A),j(v,e,A),j(v,t,A),u&&u.m(t,null),K(t,r),f&&f.m(t,null),j(v,i,A),p&&p.m(v,A),j(v,s,A),m&&m.m(v,A),j(v,o,A),l=!0},p(v,A){v[11]!=="default"||v[2].icon||v[2].promise?c?(c.p(v,A),A[0]&2052&&x(c,1)):(c=Gc(v),c.c(),x(c,1),c.m(e.parentNode,e)):c&&(Ve(),q(c,1,1,()=>{c=null}),De()),v[2].title?u?(u.p(v,A),A[0]&4&&x(u,1)):(u=Hc(v),u.c(),x(u,1),u.m(t,r)):u&&(Ve(),q(u,1,1,()=>{u=null}),De()),v[2].description?f?(f.p(v,A),A[0]&4&&x(f,1)):(f=$c(v),f.c(),x(f,1),f.m(t,null)):f&&(Ve(),q(f,1,1,()=>{f=null}),De()),v[2].cancel?p?p.p(v,A):(p=Kc(v),p.c(),p.m(s.parentNode,s)):p&&(p.d(1),p=null),v[2].action?m?m.p(v,A):(m=Qc(v),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null)},i(v){l||(x(c),x(u),x(f),l=!0)},o(v){q(c),q(u),q(f),l=!1},d(v){v&&(U(e),U(t),U(i),U(s),U(o)),c&&c.d(v),u&&u.d(),f&&f.d(),p&&p.d(v),m&&m.d(v)}}}function Z0(n){let e,t,r;const i=[n[2].componentProps];var s=n[2].component;function o(l,c){let u={};for(let f=0;f<i.length;f+=1)u=oe(u,i[f]);return c!==void 0&&c[0]&4&&(u=oe(u,Le(i,[pt(l[2].componentProps)]))),{props:u}}return s&&(e=It(s,o(n)),e.$on("closeToast",n[30])),{c(){e&&pe(e.$$.fragment),t=Fe()},m(l,c){e&&fe(e,l,c),j(l,t,c),r=!0},p(l,c){if(c[0]&4&&s!==(s=l[2].component)){if(e){Ve();const u=e;q(u.$$.fragment,1,0,()=>{de(u,1)}),De()}s?(e=It(s,o(l,c)),e.$on("closeToast",l[30]),pe(e.$$.fragment),x(e.$$.fragment,1),fe(e,t.parentNode,t)):e=null}else if(s){const u=c[0]&4?Le(i,[pt(l[2].componentProps)]):{};e.$set(u)}},i(l){r||(e&&x(e.$$.fragment,l),r=!0)},o(l){e&&q(e.$$.fragment,l),r=!1},d(l){l&&U(t),e&&de(e,l)}}}function Gc(n){let e,t,r,i,s,o=(n[2].promise||n[11]==="loading")&&!n[2].icon&&Wc(n);const l=[i1,r1,n1,t1,e1],c=[];function u(f,p){return f[2].icon?0:f[11]==="success"?1:f[11]==="error"?2:f[11]==="warning"?3:f[11]==="info"?4:-1}return~(r=u(n))&&(i=c[r]=l[r](n)),{c(){e=J("div"),o&&o.c(),t=Ee(),i&&i.c(),C(e,"data-icon","")},m(f,p){j(f,e,p),o&&o.m(e,null),K(e,t),~r&&c[r].m(e,null),s=!0},p(f,p){(f[2].promise||f[11]==="loading")&&!f[2].icon?o?(o.p(f,p),p[0]&2052&&x(o,1)):(o=Wc(f),o.c(),x(o,1),o.m(e,t)):o&&(Ve(),q(o,1,1,()=>{o=null}),De());let m=r;r=u(f),r===m?~r&&c[r].p(f,p):(i&&(Ve(),q(c[m],1,1,()=>{c[m]=null}),De()),~r?(i=c[r],i?i.p(f,p):(i=c[r]=l[r](f),i.c()),x(i,1),i.m(e,null)):i=null)},i(f){s||(x(o),x(i),s=!0)},o(f){q(o),q(i),s=!1},d(f){f&&U(e),o&&o.d(),~r&&c[r].d()}}}function Wc(n){let e;const t=n[48]["loading-icon"],r=Ye(t,n,n[47],qc);return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s[1]&65536)&&Je(r,t,i,i[47],e?Xe(t,i[47],s,X0):Ze(i[47]),qc)},i(i){e||(x(r,i),e=!0)},o(i){q(r,i),e=!1},d(i){r&&r.d(i)}}}function e1(n){let e;const t=n[48]["info-icon"],r=Ye(t,n,n[47],xc);return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s[1]&65536)&&Je(r,t,i,i[47],e?Xe(t,i[47],s,$0):Ze(i[47]),xc)},i(i){e||(x(r,i),e=!0)},o(i){q(r,i),e=!1},d(i){r&&r.d(i)}}}function t1(n){let e;const t=n[48]["warning-icon"],r=Ye(t,n,n[47],Bc);return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s[1]&65536)&&Je(r,t,i,i[47],e?Xe(t,i[47],s,K0):Ze(i[47]),Bc)},i(i){e||(x(r,i),e=!0)},o(i){q(r,i),e=!1},d(i){r&&r.d(i)}}}function n1(n){let e;const t=n[48]["error-icon"],r=Ye(t,n,n[47],Uc);return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s[1]&65536)&&Je(r,t,i,i[47],e?Xe(t,i[47],s,Q0):Ze(i[47]),Uc)},i(i){e||(x(r,i),e=!0)},o(i){q(r,i),e=!1},d(i){r&&r.d(i)}}}function r1(n){let e;const t=n[48]["success-icon"],r=Ye(t,n,n[47],jc);return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s[1]&65536)&&Je(r,t,i,i[47],e?Xe(t,i[47],s,Y0):Ze(i[47]),jc)},i(i){e||(x(r,i),e=!0)},o(i){q(r,i),e=!1},d(i){r&&r.d(i)}}}function i1(n){let e,t,r;var i=n[2].icon;function s(o,l){return{}}return i&&(e=It(i,s())),{c(){e&&pe(e.$$.fragment),t=Fe()},m(o,l){e&&fe(e,o,l),j(o,t,l),r=!0},p(o,l){if(l[0]&4&&i!==(i=o[2].icon)){if(e){Ve();const c=e;q(c.$$.fragment,1,0,()=>{de(c,1)}),De()}i?(e=It(i,s()),pe(e.$$.fragment),x(e.$$.fragment,1),fe(e,t.parentNode,t)):e=null}},i(o){r||(e&&x(e.$$.fragment,o),r=!0)},o(o){e&&q(e.$$.fragment,o),r=!1},d(o){o&&U(t),e&&de(e,o)}}}function Hc(n){let e,t,r,i,s;const o=[o1,s1],l=[];function c(u,f){return typeof u[2].title!="string"?0:1}return t=c(n),r=l[t]=o[t](n),{c(){var u,f,p;e=J("div"),r.c(),C(e,"data-title",""),C(e,"class",i=At((u=n[1])==null?void 0:u.title,(p=(f=n[2])==null?void 0:f.classes)==null?void 0:p.title))},m(u,f){j(u,e,f),l[t].m(e,null),s=!0},p(u,f){var m,v,A;let p=t;t=c(u),t===p?l[t].p(u,f):(Ve(),q(l[p],1,1,()=>{l[p]=null}),De(),r=l[t],r?r.p(u,f):(r=l[t]=o[t](u),r.c()),x(r,1),r.m(e,null)),(!s||f[0]&6&&i!==(i=At((m=u[1])==null?void 0:m.title,(A=(v=u[2])==null?void 0:v.classes)==null?void 0:A.title)))&&C(e,"class",i)},i(u){s||(x(r),s=!0)},o(u){q(r),s=!1},d(u){u&&U(e),l[t].d()}}}function s1(n){let e=n[2].title+"",t;return{c(){t=le(e)},m(r,i){j(r,t,i)},p(r,i){i[0]&4&&e!==(e=r[2].title+"")&&dt(t,e)},i:X,o:X,d(r){r&&U(t)}}}function o1(n){let e,t,r;const i=[n[2].componentProps];var s=n[2].title;function o(l,c){let u={};for(let f=0;f<i.length;f+=1)u=oe(u,i[f]);return c!==void 0&&c[0]&4&&(u=oe(u,Le(i,[pt(l[2].componentProps)]))),{props:u}}return s&&(e=It(s,o(n))),{c(){e&&pe(e.$$.fragment),t=Fe()},m(l,c){e&&fe(e,l,c),j(l,t,c),r=!0},p(l,c){if(c[0]&4&&s!==(s=l[2].title)){if(e){Ve();const u=e;q(u.$$.fragment,1,0,()=>{de(u,1)}),De()}s?(e=It(s,o(l,c)),pe(e.$$.fragment),x(e.$$.fragment,1),fe(e,t.parentNode,t)):e=null}else if(s){const u=c[0]&4?Le(i,[pt(l[2].componentProps)]):{};e.$set(u)}},i(l){r||(e&&x(e.$$.fragment,l),r=!0)},o(l){e&&q(e.$$.fragment,l),r=!1},d(l){l&&U(t),e&&de(e,l)}}}function $c(n){let e,t,r,i,s;const o=[l1,a1],l=[];function c(u,f){return typeof u[2].description!="string"?0:1}return t=c(n),r=l[t]=o[t](n),{c(){var u,f;e=J("div"),r.c(),C(e,"data-description",""),C(e,"class",i=At(n[9],n[23],(u=n[1])==null?void 0:u.description,(f=n[2].classes)==null?void 0:f.description))},m(u,f){j(u,e,f),l[t].m(e,null),s=!0},p(u,f){var m,v;let p=t;t=c(u),t===p?l[t].p(u,f):(Ve(),q(l[p],1,1,()=>{l[p]=null}),De(),r=l[t],r?r.p(u,f):(r=l[t]=o[t](u),r.c()),x(r,1),r.m(e,null)),(!s||f[0]&8389126&&i!==(i=At(u[9],u[23],(m=u[1])==null?void 0:m.description,(v=u[2].classes)==null?void 0:v.description)))&&C(e,"class",i)},i(u){s||(x(r),s=!0)},o(u){q(r),s=!1},d(u){u&&U(e),l[t].d()}}}function a1(n){let e=n[2].description+"",t;return{c(){t=le(e)},m(r,i){j(r,t,i)},p(r,i){i[0]&4&&e!==(e=r[2].description+"")&&dt(t,e)},i:X,o:X,d(r){r&&U(t)}}}function l1(n){let e,t,r;const i=[n[2].componentProps];var s=n[2].description;function o(l,c){let u={};for(let f=0;f<i.length;f+=1)u=oe(u,i[f]);return c!==void 0&&c[0]&4&&(u=oe(u,Le(i,[pt(l[2].componentProps)]))),{props:u}}return s&&(e=It(s,o(n))),{c(){e&&pe(e.$$.fragment),t=Fe()},m(l,c){e&&fe(e,l,c),j(l,t,c),r=!0},p(l,c){if(c[0]&4&&s!==(s=l[2].description)){if(e){Ve();const u=e;q(u.$$.fragment,1,0,()=>{de(u,1)}),De()}s?(e=It(s,o(l,c)),pe(e.$$.fragment),x(e.$$.fragment,1),fe(e,t.parentNode,t)):e=null}else if(s){const u=c[0]&4?Le(i,[pt(l[2].componentProps)]):{};e.$set(u)}},i(l){r||(e&&x(e.$$.fragment,l),r=!0)},o(l){e&&q(e.$$.fragment,l),r=!1},d(l){l&&U(t),e&&de(e,l)}}}function Kc(n){let e,t=n[2].cancel.label+"",r,i,s,o;return{c(){var l,c,u;e=J("button"),r=le(t),C(e,"data-button",""),C(e,"data-cancel",""),C(e,"style",n[7]),C(e,"class",i=At((l=n[1])==null?void 0:l.cancelButton,(u=(c=n[2])==null?void 0:c.classes)==null?void 0:u.cancelButton))},m(l,c){j(l,e,c),K(e,r),s||(o=ye(e,"click",n[50]),s=!0)},p(l,c){var u,f,p;c[0]&4&&t!==(t=l[2].cancel.label+"")&&dt(r,t),c[0]&128&&C(e,"style",l[7]),c[0]&6&&i!==(i=At((u=l[1])==null?void 0:u.cancelButton,(p=(f=l[2])==null?void 0:f.classes)==null?void 0:p.cancelButton))&&C(e,"class",i)},d(l){l&&U(e),s=!1,o()}}}function Qc(n){let e,t=n[2].action.label+"",r,i,s,o;return{c(){var l,c,u;e=J("button"),r=le(t),C(e,"data-button",""),C(e,"style",n[8]),C(e,"class",i=At((l=n[1])==null?void 0:l.actionButton,(u=(c=n[2])==null?void 0:c.classes)==null?void 0:u.actionButton))},m(l,c){j(l,e,c),K(e,r),s||(o=ye(e,"click",n[51]),s=!0)},p(l,c){var u,f,p;c[0]&4&&t!==(t=l[2].action.label+"")&&dt(r,t),c[0]&256&&C(e,"style",l[8]),c[0]&6&&i!==(i=At((u=l[1])==null?void 0:u.actionButton,(p=(f=l[2])==null?void 0:f.classes)==null?void 0:p.actionButton))&&C(e,"class",i)},d(l){l&&U(e),s=!1,o()}}}function c1(n){let e,t,r,i,s,o,l,c,u,f,p,m,v,A,O,k=n[6]&&!n[2].component&&zc(n);const D=[Z0,J0],P=[];function L(R,N){return R[2].component?0:1}return r=L(n),i=P[r]=D[r](n),{c(){var R,N,z,E,_,w,T;e=J("li"),k&&k.c(),t=Ee(),i.c(),C(e,"aria-live",s=n[2].important?"assertive":"polite"),C(e,"aria-atomic","true"),C(e,"role","status"),C(e,"tabindex",0),C(e,"class",o=At(n[34].class,n[24],(R=n[1])==null?void 0:R.toast,(z=(N=n[2])==null?void 0:N.classes)==null?void 0:z.toast,(E=n[1])==null?void 0:E[n[11]],(w=(_=n[2])==null?void 0:_.classes)==null?void 0:w[n[11]])),C(e,"data-sonner-toast",""),C(e,"data-styled",l=!(n[2].component||(T=n[2])!=null&&T.unstyled||n[10])),C(e,"data-mounted",n[12]),C(e,"data-promise",c=!!n[2].promise),C(e,"data-removed",n[13]),C(e,"data-visible",n[25]),C(e,"data-y-position",u=n[21][0]),C(e,"data-x-position",f=n[21][1]),C(e,"data-index",n[3]),C(e,"data-front",n[26]),C(e,"data-swiping",n[14]),C(e,"data-type",n[11]),C(e,"data-invert",n[0]),C(e,"data-swipe-out",n[15]),C(e,"data-expanded",p=!!(n[4]||n[5]&&n[12])),C(e,"style",m=`${n[34].style} ${n[2].style}`),Ke(e,"--index",n[3]),Ke(e,"--toasts-before",n[3]),Ke(e,"--z-index",n[27].length-n[3]),Ke(e,"--offset",`${n[13]?n[16]:n[19]}px`),Ke(e,"--initial-height",`${n[17]}px`)},m(R,N){j(R,e,N),k&&k.m(e,null),K(e,t),P[r].m(e,null),n[52](e),v=!0,A||(O=[ye(e,"pointerdown",n[31]),ye(e,"pointerup",n[32]),ye(e,"pointermove",n[33])],A=!0)},p(R,N){var _,w,T,I,b,y,H;R[6]&&!R[2].component?k?k.p(R,N):(k=zc(R),k.c(),k.m(e,t)):k&&(k.d(1),k=null);let z=r;r=L(R),r===z?P[r].p(R,N):(Ve(),q(P[z],1,1,()=>{P[z]=null}),De(),i=P[r],i?i.p(R,N):(i=P[r]=D[r](R),i.c()),x(i,1),i.m(e,null)),(!v||N[0]&4&&s!==(s=R[2].important?"assertive":"polite"))&&C(e,"aria-live",s),(!v||N[0]&16779270|N[1]&8&&o!==(o=At(R[34].class,R[24],(_=R[1])==null?void 0:_.toast,(T=(w=R[2])==null?void 0:w.classes)==null?void 0:T.toast,(I=R[1])==null?void 0:I[R[11]],(y=(b=R[2])==null?void 0:b.classes)==null?void 0:y[R[11]])))&&C(e,"class",o),(!v||N[0]&1028&&l!==(l=!(R[2].component||(H=R[2])!=null&&H.unstyled||R[10])))&&C(e,"data-styled",l),(!v||N[0]&4096)&&C(e,"data-mounted",R[12]),(!v||N[0]&4&&c!==(c=!!R[2].promise))&&C(e,"data-promise",c),(!v||N[0]&8192)&&C(e,"data-removed",R[13]),(!v||N[0]&33554432)&&C(e,"data-visible",R[25]),(!v||N[0]&2097152&&u!==(u=R[21][0]))&&C(e,"data-y-position",u),(!v||N[0]&2097152&&f!==(f=R[21][1]))&&C(e,"data-x-position",f),(!v||N[0]&8)&&C(e,"data-index",R[3]),(!v||N[0]&67108864)&&C(e,"data-front",R[26]),(!v||N[0]&16384)&&C(e,"data-swiping",R[14]),(!v||N[0]&2048)&&C(e,"data-type",R[11]),(!v||N[0]&1)&&C(e,"data-invert",R[0]),(!v||N[0]&32768)&&C(e,"data-swipe-out",R[15]),(!v||N[0]&4144&&p!==(p=!!(R[4]||R[5]&&R[12])))&&C(e,"data-expanded",p),(!v||N[0]&4|N[1]&8&&m!==(m=`${R[34].style} ${R[2].style}`))&&C(e,"style",m);const E=N[0]&4|N[1]&8;(N[0]&12|N[1]&8||E)&&Ke(e,"--index",R[3]),(N[0]&12|N[1]&8||E)&&Ke(e,"--toasts-before",R[3]),(N[0]&134217740|N[1]&8||E)&&Ke(e,"--z-index",R[27].length-R[3]),(N[0]&598020|N[1]&8||E)&&Ke(e,"--offset",`${R[13]?R[16]:R[19]}px`),(N[0]&131076|N[1]&8||E)&&Ke(e,"--initial-height",`${R[17]}px`)},i(R){v||(x(i),v=!0)},o(R){q(i),v=!1},d(R){R&&U(e),k&&k.d(),P[r].d(),n[52](null),A=!1,Pt(O)}}}const Yc=4e3,u1=14,h1=20,f1=200,d1=.05;function p1(n,e,t){let r,i,s,o,l,c,u,f,p,m,v,A,O,k=X,D=()=>(k(),k=ps(Xt,G=>t(45,O=G)),Xt),P,L;n.$$.on_destroy.push(()=>k());let{$$slots:R={},$$scope:N}=e;const z={toast:"",title:"",description:"",loader:"",closeButton:"",cancelButton:"",actionButton:"",action:"",warning:"",error:"",success:"",default:"",info:"",loading:""},{toasts:E,heights:_,removeHeight:w,setHeight:T,remove:I}=Et;nr(n,E,G=>t(27,L=G)),nr(n,_,G=>t(46,P=G));let{toast:b}=e,{index:y}=e,{expanded:H}=e,{invert:ne}=e,{position:te}=e,{visibleToasts:se}=e,{expandByDefault:M}=e,{closeButton:Z}=e,{interacting:re}=e,{cancelButtonStyle:he=""}=e,{actionButtonStyle:be=""}=e,{duration:Ae=4e3}=e,{descriptionClass:Ct=""}=e,{classes:$={}}=e,{unstyled:xe=!1}=e,Ue=!1,$t=!1,_n=!1,Kt=!1,Lt=0,yn=0,et,Ft=0,vn=0,Tr=0,Qt=null;async function Os(){if(!Ue)return;await gs();let G;H||M?G=1:G=1-y*d1,et.style.setProperty("height","auto");const He=et.offsetHeight,Jt=et.getBoundingClientRect().height,wn=Math.round((Jt/G+Number.EPSILON)*100)/100;et.style.removeProperty("height");let Zt;Math.abs(wn-He)<1?Zt=wn:Zt=He,t(17,yn=Zt),T({toastId:b.id,height:Zt})}function Vt(){t(13,$t=!0),t(16,Lt=Ft),w(b.id),setTimeout(()=>{I(b.id)},f1)}let Yt,bn=b.duration||Ae||Yc;function Ms(){if(Tr<vn){const G=new Date().getTime()-vn;bn=bn-G}Tr=new Date().getTime()}function Un(){vn=new Date().getTime(),t(39,Yt=setTimeout(()=>{var G;(G=b.onAutoClose)==null||G.call(b,b),Vt()},bn))}let Xt;ms(()=>{t(12,Ue=!0);const G=et.getBoundingClientRect().height;return t(17,yn=G),T({toastId:b.id,height:G}),()=>w(b.id)});function wi(G){if(v)return;t(16,Lt=Ft);const He=G.target;He.setPointerCapture(G.pointerId),He.tagName!=="BUTTON"&&(t(14,_n=!0),Qt={x:G.clientX,y:G.clientY})}function $e(){var He;if(Kt)return;Qt=null;const G=Number((et==null?void 0:et.style.getPropertyValue("--swipe-amount").replace("px",""))||0);if(Math.abs(G)>=h1){t(16,Lt=Ft),(He=b.onDismiss)==null||He.call(b,b),Vt(),t(15,Kt=!0);return}et.style.setProperty("--swipe-amount","0px"),t(14,_n=!1)}function tt(G){if(!Qt)return;const He=G.clientY-Qt.y,Jt=G.clientX-Qt.x,Zt=(p[0]==="top"?Math.min:Math.max)(0,He),Ii=G.pointerType==="touch"?10:2;Math.abs(Zt)>Ii?et.style.setProperty("--swipe-amount",`${He}px`):Math.abs(Jt)>Ii&&(Qt=null)}const jn=()=>{var G;Vt(),(G=b.onDismiss)==null||G.call(b,b)},Ei=()=>{var G;Vt(),(G=b.cancel)!=null&&G.onClick&&b.cancel.onClick()},Ti=G=>{var He;(He=b.action)==null||He.onClick(G),!G.defaultPrevented&&Vt()};function Ls(G){Nn[G?"unshift":"push"](()=>{et=G,t(18,et)})}return n.$$set=G=>{t(34,e=oe(oe({},e),ot(G))),"toast"in G&&t(2,b=G.toast),"index"in G&&t(3,y=G.index),"expanded"in G&&t(4,H=G.expanded),"invert"in G&&t(0,ne=G.invert),"position"in G&&t(35,te=G.position),"visibleToasts"in G&&t(36,se=G.visibleToasts),"expandByDefault"in G&&t(5,M=G.expandByDefault),"closeButton"in G&&t(6,Z=G.closeButton),"interacting"in G&&t(37,re=G.interacting),"cancelButtonStyle"in G&&t(7,he=G.cancelButtonStyle),"actionButtonStyle"in G&&t(8,be=G.actionButtonStyle),"duration"in G&&t(38,Ae=G.duration),"descriptionClass"in G&&t(9,Ct=G.descriptionClass),"classes"in G&&t(1,$=G.classes),"unstyled"in G&&t(10,xe=G.unstyled),"$$scope"in G&&t(47,N=G.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&2&&t(1,$={...z,...$}),n.$$.dirty[0]&8&&t(26,r=y===0),n.$$.dirty[0]&8|n.$$.dirty[1]&32&&t(25,i=y+1<=se),n.$$.dirty[0]&4&&t(42,s=b.title),n.$$.dirty[0]&4&&t(41,o=b.description),n.$$.dirty[0]&4&&t(11,l=b.type),n.$$.dirty[0]&4&&t(24,c=b.class||""),n.$$.dirty[0]&4&&t(23,u=b.descriptionClass||""),n.$$.dirty[0]&4|n.$$.dirty[1]&32768&&t(44,f=P.findIndex(G=>G.toastId===b.id)||0),n.$$.dirty[1]&16&&t(21,p=te.split("-")),n.$$.dirty[1]&40960&&t(43,m=P.reduce((G,He,Jt)=>Jt>=f?G:G+He.height,0)),n.$$.dirty[0]&5&&t(0,ne=b.invert||ne),n.$$.dirty[0]&2048&&t(22,v=l==="loading"),n.$$.dirty[1]&12288&&t(19,Ft=Math.round(f*u1+m)),n.$$.dirty[1]&3072&&Os(),n.$$.dirty[0]&4|n.$$.dirty[1]&384&&b.updated&&(clearTimeout(Yt),bn=b.duration||Ae||Yc,Un()),n.$$.dirty[0]&2052&&t(40,A=b.promise&&l==="loading"||b.duration===Number.POSITIVE_INFINITY),n.$$.dirty[0]&16|n.$$.dirty[1]&832&&D(t(20,Xt=H0(()=>(A||(H||re?Ms():Un()),()=>clearTimeout(Yt))))),n.$$.dirty[1]&16384,n.$$.dirty[0]&4&&b.delete&&Vt()},e=ot(e),[ne,$,b,y,H,M,Z,he,be,Ct,xe,l,Ue,$t,_n,Kt,Lt,yn,et,Ft,Xt,p,v,u,c,i,r,L,E,_,Vt,wi,$e,tt,e,te,se,re,Ae,Yt,A,o,s,m,f,O,P,N,R,jn,Ei,Ti,Ls]}class m1 extends We{constructor(e){super(),Ge(this,e,p1,c1,ad,{toast:2,index:3,expanded:4,invert:0,position:35,visibleToasts:36,expandByDefault:5,closeButton:6,interacting:37,cancelButtonStyle:7,actionButtonStyle:8,duration:38,descriptionClass:9,classes:1,unstyled:10},null,[-1,-1,-1])}}const{Boolean:g1}=cd;function Xc(n,e,t){const r=n.slice();return r[9]=e[t],r[39]=t,r}function Jc(n,e,t){const r=n.slice();return r[40]=e[t],r[39]=t,r}const _1=n=>({}),Zc=n=>({slot:"loading-icon"}),y1=n=>({}),eu=n=>({slot:"success-icon"}),v1=n=>({}),tu=n=>({slot:"error-icon"}),b1=n=>({}),nu=n=>({slot:"warning-icon"}),w1=n=>({}),ru=n=>({slot:"info-icon"});function iu(n){let e,t,r,i=Gt(n[16]),s=[];for(let l=0;l<i.length;l+=1)s[l]=ou(Xc(n,i,l));const o=l=>q(s[l],1,1,()=>{s[l]=null});return{c(){e=J("section");for(let l=0;l<s.length;l+=1)s[l].c();C(e,"aria-label",t=`Notifications ${n[15]}`),C(e,"tabindex",-1)},m(l,c){j(l,e,c);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);r=!0},p(l,c){if(c[0]&15957503|c[1]&8){i=Gt(l[16]);let u;for(u=0;u<i.length;u+=1){const f=Xc(l,i,u);s[u]?(s[u].p(f,c),x(s[u],1)):(s[u]=ou(f),s[u].c(),x(s[u],1),s[u].m(e,null))}for(Ve(),u=i.length;u<s.length;u+=1)o(u);De()}(!r||c[0]&32768&&t!==(t=`Notifications ${l[15]}`))&&C(e,"aria-label",t)},i(l){if(!r){for(let c=0;c<i.length;c+=1)x(s[c]);r=!0}},o(l){s=s.filter(g1);for(let c=0;c<s.length;c+=1)q(s[c]);r=!1},d(l){l&&U(e),jo(s,l)}}}function E1(n){let e,t;return e=new j0({props:{visible:n[40].type==="loading"}}),{c(){pe(e.$$.fragment)},m(r,i){fe(e,r,i),t=!0},p(r,i){const s={};i[0]&66560&&(s.visible=r[40].type==="loading"),e.$set(s)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){q(e.$$.fragment,r),t=!1},d(r){de(e,r)}}}function T1(n){let e;const t=n[26]["loading-icon"],r=Ye(t,n,n[34],Zc),i=r||E1(n);return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),e=!0},p(s,o){r?r.p&&(!e||o[1]&8)&&Je(r,t,s,s[34],e?Xe(t,s[34],o,_1):Ze(s[34]),Zc):i&&i.p&&(!e||o[0]&66560)&&i.p(s,e?o:[-1,-1])},i(s){e||(x(i,s),e=!0)},o(s){q(i,s),e=!1},d(s){i&&i.d(s)}}}function I1(n){let e,t;return e=new Ds({props:{type:"success"}}),{c(){pe(e.$$.fragment)},m(r,i){fe(e,r,i),t=!0},p:X,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){q(e.$$.fragment,r),t=!1},d(r){de(e,r)}}}function A1(n){let e;const t=n[26]["success-icon"],r=Ye(t,n,n[34],eu),i=r||I1();return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),e=!0},p(s,o){r&&r.p&&(!e||o[1]&8)&&Je(r,t,s,s[34],e?Xe(t,s[34],o,y1):Ze(s[34]),eu)},i(s){e||(x(i,s),e=!0)},o(s){q(i,s),e=!1},d(s){i&&i.d(s)}}}function R1(n){let e,t;return e=new Ds({props:{type:"error"}}),{c(){pe(e.$$.fragment)},m(r,i){fe(e,r,i),t=!0},p:X,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){q(e.$$.fragment,r),t=!1},d(r){de(e,r)}}}function S1(n){let e;const t=n[26]["error-icon"],r=Ye(t,n,n[34],tu),i=r||R1();return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),e=!0},p(s,o){r&&r.p&&(!e||o[1]&8)&&Je(r,t,s,s[34],e?Xe(t,s[34],o,v1):Ze(s[34]),tu)},i(s){e||(x(i,s),e=!0)},o(s){q(i,s),e=!1},d(s){i&&i.d(s)}}}function k1(n){let e,t;return e=new Ds({props:{type:"warning"}}),{c(){pe(e.$$.fragment)},m(r,i){fe(e,r,i),t=!0},p:X,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){q(e.$$.fragment,r),t=!1},d(r){de(e,r)}}}function P1(n){let e;const t=n[26]["warning-icon"],r=Ye(t,n,n[34],nu),i=r||k1();return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),e=!0},p(s,o){r&&r.p&&(!e||o[1]&8)&&Je(r,t,s,s[34],e?Xe(t,s[34],o,b1):Ze(s[34]),nu)},i(s){e||(x(i,s),e=!0)},o(s){q(i,s),e=!1},d(s){i&&i.d(s)}}}function C1(n){let e,t;return e=new Ds({props:{type:"info"}}),{c(){pe(e.$$.fragment)},m(r,i){fe(e,r,i),t=!0},p:X,i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){q(e.$$.fragment,r),t=!1},d(r){de(e,r)}}}function V1(n){let e;const t=n[26]["info-icon"],r=Ye(t,n,n[34],ru),i=r||C1();return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),e=!0},p(s,o){r&&r.p&&(!e||o[1]&8)&&Je(r,t,s,s[34],e?Xe(t,s[34],o,w1):Ze(s[34]),ru)},i(s){e||(x(i,s),e=!0)},o(s){q(i,s),e=!1},d(s){i&&i.d(s)}}}function su(n,e){var s,o,l,c,u;let t,r,i;return r=new m1({props:{index:e[39],toast:e[40],invert:e[0],visibleToasts:e[4],closeButton:e[5],interacting:e[12],position:e[9],expandByDefault:e[2],expanded:e[11],actionButtonStyle:((s=e[6])==null?void 0:s.actionButtonStyle)||"",cancelButtonStyle:((o=e[6])==null?void 0:o.cancelButtonStyle)||"",class:((l=e[6])==null?void 0:l.class)||"",descriptionClass:((c=e[6])==null?void 0:c.descriptionClass)||"",classes:e[6].classes||{},duration:((u=e[6])==null?void 0:u.duration)??e[3],unstyled:e[6].unstyled||!1,$$slots:{"info-icon":[V1],"warning-icon":[P1],"error-icon":[S1],"success-icon":[A1],"loading-icon":[T1]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=Fe(),pe(r.$$.fragment),this.first=t},m(f,p){j(f,t,p),fe(r,f,p),i=!0},p(f,p){var v,A,O,k,D;e=f;const m={};p[0]&66560&&(m.index=e[39]),p[0]&66560&&(m.toast=e[40]),p[0]&1&&(m.invert=e[0]),p[0]&16&&(m.visibleToasts=e[4]),p[0]&32&&(m.closeButton=e[5]),p[0]&4096&&(m.interacting=e[12]),p[0]&65536&&(m.position=e[9]),p[0]&4&&(m.expandByDefault=e[2]),p[0]&2048&&(m.expanded=e[11]),p[0]&64&&(m.actionButtonStyle=((v=e[6])==null?void 0:v.actionButtonStyle)||""),p[0]&64&&(m.cancelButtonStyle=((A=e[6])==null?void 0:A.cancelButtonStyle)||""),p[0]&64&&(m.class=((O=e[6])==null?void 0:O.class)||""),p[0]&64&&(m.descriptionClass=((k=e[6])==null?void 0:k.descriptionClass)||""),p[0]&64&&(m.classes=e[6].classes||{}),p[0]&72&&(m.duration=((D=e[6])==null?void 0:D.duration)??e[3]),p[0]&64&&(m.unstyled=e[6].unstyled||!1),p[0]&66560|p[1]&8&&(m.$$scope={dirty:p,ctx:e}),r.$set(m)},i(f){i||(x(r.$$.fragment,f),i=!0)},o(f){q(r.$$.fragment,f),i=!1},d(f){f&&U(t),de(r,f)}}}function ou(n){let e,t=[],r=new Map,i,s,o,l,c,u,f,p,m,v;function A(...L){return n[27](n[39],n[9],...L)}let O=Gt(n[10].filter(A));const k=L=>L[40].id;for(let L=0;L<O.length;L+=1){let R=Jc(n,O,L),N=k(R);r.set(N,t[L]=su(N,R))}let D=[{tabindex:s=-1},{class:o=n[22].class},{"data-sonner-toaster":""},{"data-theme":n[13]},{"data-rich-colors":n[1]},{dir:l=n[8]==="auto"?Uo():n[8]},{"data-y-position":c=n[9].split("-")[0]},{"data-x-position":u=n[9].split("-")[1]},{style:f=n[22].style},n[23]],P={};for(let L=0;L<D.length;L+=1)P=oe(P,D[L]);return{c(){var L;e=J("ol");for(let R=0;R<t.length;R+=1)t[R].c();i=Ee(),Yr(e,P),Ke(e,"--front-toast-height",`${(L=n[17][0])==null?void 0:L.height}px`),Ke(e,"--offset",typeof n[7]=="number"?`${n[7]}px`:n[7]||au),Ke(e,"--width",`${lu}px`),Ke(e,"--gap",`${cu}px`)},m(L,R){j(L,e,R);for(let N=0;N<t.length;N+=1)t[N]&&t[N].m(e,null);K(e,i),n[28](e),p=!0,m||(v=[ye(e,"blur",n[20]),ye(e,"focus",n[21]),ye(e,"mouseenter",n[29]),ye(e,"mousemove",n[30]),ye(e,"mouseleave",n[31]),ye(e,"pointerdown",n[32]),ye(e,"pointerup",n[33])],m=!0)},p(L,R){var N;n=L,R[0]&72829|R[1]&8&&(O=Gt(n[10].filter(A)),Ve(),t=bd(t,R,k,1,n,O,r,e,vd,su,i,Jc),De()),Yr(e,P=Le(D,[{tabindex:s},(!p||R[0]&4194304&&o!==(o=n[22].class))&&{class:o},{"data-sonner-toaster":""},(!p||R[0]&8192)&&{"data-theme":n[13]},(!p||R[0]&2)&&{"data-rich-colors":n[1]},(!p||R[0]&256&&l!==(l=n[8]==="auto"?Uo():n[8]))&&{dir:l},(!p||R[0]&65536&&c!==(c=n[9].split("-")[0]))&&{"data-y-position":c},(!p||R[0]&65536&&u!==(u=n[9].split("-")[1]))&&{"data-x-position":u},(!p||R[0]&4194304&&f!==(f=n[22].style))&&{style:f},R[0]&8388608&&n[23]])),Ke(e,"--front-toast-height",`${(N=n[17][0])==null?void 0:N.height}px`),Ke(e,"--offset",typeof n[7]=="number"?`${n[7]}px`:n[7]||au),Ke(e,"--width",`${lu}px`),Ke(e,"--gap",`${cu}px`)},i(L){if(!p){for(let R=0;R<O.length;R+=1)x(t[R]);p=!0}},o(L){for(let R=0;R<t.length;R+=1)q(t[R]);p=!1},d(L){L&&U(e);for(let R=0;R<t.length;R+=1)t[R].d();n[28](null),m=!1,Pt(v)}}}function D1(n){let e,t,r=n[10].length>0&&iu(n);return{c(){r&&r.c(),e=Fe()},m(i,s){r&&r.m(i,s),j(i,e,s),t=!0},p(i,s){i[10].length>0?r?(r.p(i,s),s[0]&1024&&x(r,1)):(r=iu(i),r.c(),x(r,1),r.m(e.parentNode,e)):r&&(Ve(),q(r,1,1,()=>{r=null}),De())},i(i){t||(x(r),t=!0)},o(i){q(r),t=!1},d(i){i&&U(e),r&&r.d(i)}}}const N1=3,au="32px",lu=356,cu=14,Bo="dark",ds="light";function O1(n){return n!=="system"?n:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Bo:ds}function Uo(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function M1(n,e,t){let r,i;const s=["invert","theme","position","hotkey","richColors","expand","duration","visibleToasts","closeButton","toastOptions","offset","dir"];let o=yt(e,s),l,c,{$$slots:u={},$$scope:f}=e,{invert:p=!1}=e,{theme:m="light"}=e,{position:v="bottom-right"}=e,{hotkey:A=["altKey","KeyT"]}=e,{richColors:O=!1}=e,{expand:k=!1}=e,{duration:D=4e3}=e,{visibleToasts:P=N1}=e,{closeButton:L=!1}=e,{toastOptions:R={}}=e,{offset:N=null}=e,{dir:z=Uo()}=e;const{toasts:E,heights:_,reset:w}=Et;nr(n,E,$=>t(10,l=$)),nr(n,_,$=>t(17,c=$));let T=!1,I=!1,b=O1(m),y,H=null,ne=!1;Ru(()=>{y&&H&&(H.focus({preventScroll:!0}),H=null,ne=!1)}),ms(()=>{w();const $=xe=>{A.every($t=>xe[$t]||xe.code===$t)&&(t(11,T=!0),y==null||y.focus()),xe.code==="Escape"&&(document.activeElement===y||y!=null&&y.contains(document.activeElement))&&t(11,T=!1)};return document.addEventListener("keydown",$),()=>{document.removeEventListener("keydown",$)}});function te($){ne&&!$.currentTarget.contains($.relatedTarget)&&(ne=!1,H&&(H.focus({preventScroll:!0}),H=null))}function se($){ne||(ne=!0,H=$.relatedTarget)}const M=($,xe,Ue)=>!Ue.position&&$===0||Ue.position===xe;function Z($){Nn[$?"unshift":"push"](()=>{y=$,t(14,y)})}const re=()=>t(11,T=!0),he=()=>t(11,T=!0),be=()=>{I||t(11,T=!1)},Ae=()=>t(12,I=!0),Ct=()=>t(12,I=!1);return n.$$set=$=>{t(22,e=oe(oe({},e),ot($))),t(23,o=yt(e,s)),"invert"in $&&t(0,p=$.invert),"theme"in $&&t(24,m=$.theme),"position"in $&&t(9,v=$.position),"hotkey"in $&&t(25,A=$.hotkey),"richColors"in $&&t(1,O=$.richColors),"expand"in $&&t(2,k=$.expand),"duration"in $&&t(3,D=$.duration),"visibleToasts"in $&&t(4,P=$.visibleToasts),"closeButton"in $&&t(5,L=$.closeButton),"toastOptions"in $&&t(6,R=$.toastOptions),"offset"in $&&t(7,N=$.offset),"dir"in $&&t(8,z=$.dir),"$$scope"in $&&t(34,f=$.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&1536&&t(16,r=Array.from(new Set([v,...l.filter($=>$.position).map($=>$.position)].filter(Boolean)))),n.$$.dirty[0]&33554432&&t(15,i=A.join("+").replace(/Key/g,"").replace(/Digit/g,"")),n.$$.dirty[0]&1024&&l.length<=1&&t(11,T=!1),n.$$.dirty[0]&1024){const $=l.filter(xe=>xe.dismiss&&!xe.delete);if($.length>0){const xe=l.map(Ue=>$.find(_n=>_n.id===Ue.id)?{...Ue,delete:!0}:Ue);E.set(xe)}}if(n.$$.dirty[0]&16777216&&(m!=="system"&&t(13,b=m),typeof window<"u")){m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?t(13,b=Bo):t(13,b=ds));const $=window.matchMedia("(prefers-color-scheme: dark)"),xe=({matches:Ue})=>{t(13,b=Ue?Bo:ds)};"addEventListener"in $?$.addEventListener("change",xe):$.addListener(xe)}},e=ot(e),[p,O,k,D,P,L,R,N,z,v,l,T,I,b,y,i,r,c,E,_,te,se,e,o,m,A,u,M,Z,re,he,be,Ae,Ct,f]}class L1 extends We{constructor(e){super(),Ge(this,e,M1,D1,Oe,{invert:0,theme:24,position:9,hotkey:25,richColors:1,expand:2,duration:3,visibleToasts:4,closeButton:5,toastOptions:6,offset:7,dir:8},null,[-1,-1])}}let uu,hu;function Vf(n){if(typeof document>"u")return;clearTimeout(uu),clearTimeout(hu);const e=document.createElement("style"),t=document.createTextNode(`* {
     -webkit-transition: none !important;
     -moz-transition: none !important;
     -o-transition: none !important;
     -ms-transition: none !important;
     transition: none !important;
  }`);e.appendChild(t);const r=()=>document.head.appendChild(e),i=()=>document.head.removeChild(e);if(typeof window.getComputedStyle<"u"){r(),n(),window.getComputedStyle(e).opacity,i();return}if(typeof window.requestAnimationFrame<"u"){r(),n(),window.requestAnimationFrame(i);return}r(),uu=window.setTimeout(()=>{n(),hu=window.setTimeout(i,120)},120)}function fu(n){return n.filter(e=>e.length>0)}const Df={getItem:n=>null,setItem:(n,e)=>{}},gn=typeof document<"u",F1=["dark","light","system"],x1=vt("mode-watcher-mode"),B1=vt("mode-watcher-theme"),U1=$1(),j1=Q1(),q1=vt(void 0),z1=K1(),Nf=vt(!0),G1=vt([]),W1=vt([]),H1=Y1();X1();function $1(){const n="system",e=gn?localStorage:Df,t=e.getItem(i());let r=du(t)?t:n;function i(){return Qr(x1)}const{subscribe:s,set:o}=vt(r,()=>{if(!gn)return;const c=u=>{if(u.key!==i())return;const f=u.newValue;du(f)?o(r=f):o(r=n)};return addEventListener("storage",c),()=>removeEventListener("storage",c)});function l(c){o(r=c),e.setItem(i(),r)}return{subscribe:s,set:l}}function K1(){const n=gn?localStorage:Df,e=n.getItem(r());let t=e??"";function r(){return Qr(B1)}const{subscribe:i,set:s}=vt(t,()=>{if(!gn)return;const l=c=>{if(c.key!==r())return;const u=c.newValue;s(u===null?t="":t=u)};return addEventListener("storage",l),()=>removeEventListener("storage",l)});function o(l){s(t=l),n.setItem(r(),t)}return{subscribe:i,set:o}}function Q1(){let e=!0;const{subscribe:t,set:r}=vt(void 0,()=>{if(!gn)return;const o=c=>{e&&r(c.matches?"light":"dark")},l=window.matchMedia("(prefers-color-scheme: light)");return l.addEventListener("change",o),()=>l.removeEventListener("change",o)});function i(){if(!gn)return;const o=window.matchMedia("(prefers-color-scheme: light)");r(o.matches?"light":"dark")}function s(o){e=o}return{subscribe:t,query:i,tracking:s}}function Y1(){const{subscribe:n}=fi([U1,j1,q1,Nf,G1,W1],([e,t,r,i,s,o])=>{if(!gn)return;const l=e==="system"?t:e,c=fu(s),u=fu(o);function f(){const p=document.documentElement,m=document.querySelector('meta[name="theme-color"]');l==="light"?(c.length&&p.classList.remove(...c),u.length&&p.classList.add(...u),p.style.colorScheme="light",m&&r&&m.setAttribute("content",r.light)):(u.length&&p.classList.remove(...u),c.length&&p.classList.add(...c),p.style.colorScheme="dark",m&&r&&m.setAttribute("content",r.dark))}return i?Vf(f):f(),l});return{subscribe:n}}function X1(){const{subscribe:n}=fi([z1,Nf],([e,t])=>{if(!gn)return;function r(){document.documentElement.setAttribute("data-theme",e)}return t?Vf(r):r(),e});return{subscribe:n}}function du(n){return typeof n!="string"?!1:F1.includes(n)}function J1(n){let e,t;const r=[{theme:n[0]},{class:"toaster group"},{toastOptions:{classes:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}}},n[1]];let i={};for(let s=0;s<r.length;s+=1)i=oe(i,r[s]);return e=new L1({props:i}),{c(){pe(e.$$.fragment)},m(s,o){fe(e,s,o),t=!0},p(s,[o]){const l=o&3?Le(r,[o&1&&{theme:s[0]},r[1],r[2],o&2&&pt(s[1])]):{};e.$set(l)},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function Z1(n,e,t){const r=[];let i=yt(e,r),s;return nr(n,H1,o=>t(0,s=o)),n.$$set=o=>{e=oe(oe({},e),ot(o)),t(1,i=yt(e,r))},[s,i]}class eb extends We{constructor(e){super(),Ge(this,e,Z1,J1,Oe,{})}}function tb(n){let e,t;const r=[{class:ts("bg-border shrink-0",n[1]==="horizontal"?"h-[1px] w-full":"min-h-full w-[1px]",n[0])},{orientation:n[1]},{decorative:n[2]},n[3]];let i={};for(let s=0;s<r.length;s+=1)i=oe(i,r[s]);return e=new Am({props:i}),{c(){pe(e.$$.fragment)},m(s,o){fe(e,s,o),t=!0},p(s,[o]){const l=o&15?Le(r,[o&3&&{class:ts("bg-border shrink-0",s[1]==="horizontal"?"h-[1px] w-full":"min-h-full w-[1px]",s[0])},o&2&&{orientation:s[1]},o&4&&{decorative:s[2]},o&8&&pt(s[3])]):{};e.$set(l)},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function nb(n,e,t){const r=["class","orientation","decorative"];let i=yt(e,r),{class:s=void 0}=e,{orientation:o="horizontal"}=e,{decorative:l=void 0}=e;return n.$$set=c=>{e=oe(oe({},e),ot(c)),t(3,i=yt(e,r)),"class"in c&&t(0,s=c.class),"orientation"in c&&t(1,o=c.orientation),"decorative"in c&&t(2,l=c.decorative)},[s,o,l,i]}class Of extends We{constructor(e){super(),Ge(this,e,nb,tb,Oe,{class:0,orientation:1,decorative:2})}}/**
 * @license lucide-svelte v0.407.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function mu(n,e,t){const r=n.slice();return r[11]=e[t][0],r[12]=e[t][1],r}function ho(n){let e,t=[n[12]],r={};for(let i=0;i<t.length;i+=1)r=oe(r,t[i]);return{c(){e=_t(n[11]),Zi(e,r)},m(i,s){j(i,e,s)},p(i,s){Zi(e,r=Le(t,[s&32&&i[12]]))},d(i){i&&U(e)}}}function gu(n){let e=n[11],t,r=n[11]&&ho(n);return{c(){r&&r.c(),t=Fe()},m(i,s){r&&r.m(i,s),j(i,t,s)},p(i,s){i[11]?e?Oe(e,i[11])?(r.d(1),r=ho(i),e=i[11],r.c(),r.m(t.parentNode,t)):r.p(i,s):(r=ho(i),e=i[11],r.c(),r.m(t.parentNode,t)):e&&(r.d(1),r=null,e=i[11])},d(i){i&&U(t),r&&r.d(i)}}}function rb(n){let e,t,r,i,s,o=Gt(n[5]),l=[];for(let m=0;m<o.length;m+=1)l[m]=gu(mu(n,o,m));const c=n[10].default,u=Ye(c,n,n[9],null);let f=[pu,n[7],{width:n[2]},{height:n[2]},{stroke:n[1]},{"stroke-width":r=n[4]?Number(n[3])*24/Number(n[2]):n[3]},{class:i=n[6]("lucide-icon","lucide",n[0]?`lucide-${n[0]}`:"",n[8].class)}],p={};for(let m=0;m<f.length;m+=1)p=oe(p,f[m]);return{c(){e=_t("svg");for(let m=0;m<l.length;m+=1)l[m].c();t=Fe(),u&&u.c(),Zi(e,p)},m(m,v){j(m,e,v);for(let A=0;A<l.length;A+=1)l[A]&&l[A].m(e,null);K(e,t),u&&u.m(e,null),s=!0},p(m,[v]){if(v&32){o=Gt(m[5]);let A;for(A=0;A<o.length;A+=1){const O=mu(m,o,A);l[A]?l[A].p(O,v):(l[A]=gu(O),l[A].c(),l[A].m(e,t))}for(;A<l.length;A+=1)l[A].d(1);l.length=o.length}u&&u.p&&(!s||v&512)&&Je(u,c,m,m[9],s?Xe(c,m[9],v,null):Ze(m[9]),null),Zi(e,p=Le(f,[pu,v&128&&m[7],(!s||v&4)&&{width:m[2]},(!s||v&4)&&{height:m[2]},(!s||v&2)&&{stroke:m[1]},(!s||v&28&&r!==(r=m[4]?Number(m[3])*24/Number(m[2]):m[3]))&&{"stroke-width":r},(!s||v&257&&i!==(i=m[6]("lucide-icon","lucide",m[0]?`lucide-${m[0]}`:"",m[8].class)))&&{class:i}]))},i(m){s||(x(u,m),s=!0)},o(m){q(u,m),s=!1},d(m){m&&U(e),jo(l,m),u&&u.d(m)}}}function ib(n,e,t){const r=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let i=yt(e,r),{$$slots:s={},$$scope:o}=e,{name:l=void 0}=e,{color:c="currentColor"}=e,{size:u=24}=e,{strokeWidth:f=2}=e,{absoluteStrokeWidth:p=!1}=e,{iconNode:m=[]}=e;const v=(...A)=>A.filter((O,k,D)=>!!O&&D.indexOf(O)===k).join(" ");return n.$$set=A=>{t(8,e=oe(oe({},e),ot(A))),t(7,i=yt(e,r)),"name"in A&&t(0,l=A.name),"color"in A&&t(1,c=A.color),"size"in A&&t(2,u=A.size),"strokeWidth"in A&&t(3,f=A.strokeWidth),"absoluteStrokeWidth"in A&&t(4,p=A.absoluteStrokeWidth),"iconNode"in A&&t(5,m=A.iconNode),"$$scope"in A&&t(9,o=A.$$scope)},e=ot(e),[l,c,u,f,p,m,v,i,e,o,s]}class Pa extends We{constructor(e){super(),Ge(this,e,ib,rb,Oe,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}function sb(n){let e;const t=n[2].default,r=Ye(t,n,n[3],null);return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s&8)&&Je(r,t,i,i[3],e?Xe(t,i[3],s,null):Ze(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){q(r,i),e=!1},d(i){r&&r.d(i)}}}function ob(n){let e,t;const r=[{name:"copy"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[sb]},$$scope:{ctx:n}};for(let s=0;s<r.length;s+=1)i=oe(i,r[s]);return e=new Pa({props:i}),{c(){pe(e.$$.fragment)},m(s,o){fe(e,s,o),t=!0},p(s,[o]){const l=o&3?Le(r,[r[0],o&2&&pt(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(l.$$scope={dirty:o,ctx:s}),e.$set(l)},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function ab(n,e,t){let{$$slots:r={},$$scope:i}=e;const s=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];return n.$$set=o=>{t(1,e=oe(oe({},e),ot(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ot(e),[s,e,r,i]}class lb extends We{constructor(e){super(),Ge(this,e,ab,ob,Oe,{})}}function cb(n){let e;const t=n[2].default,r=Ye(t,n,n[3],null);return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s&8)&&Je(r,t,i,i[3],e?Xe(t,i[3],s,null):Ze(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){q(r,i),e=!1},d(i){r&&r.d(i)}}}function ub(n){let e,t;const r=[{name:"share"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[cb]},$$scope:{ctx:n}};for(let s=0;s<r.length;s+=1)i=oe(i,r[s]);return e=new Pa({props:i}),{c(){pe(e.$$.fragment)},m(s,o){fe(e,s,o),t=!0},p(s,[o]){const l=o&3?Le(r,[r[0],o&2&&pt(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(l.$$scope={dirty:o,ctx:s}),e.$set(l)},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function hb(n,e,t){let{$$slots:r={},$$scope:i}=e;const s=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}],["polyline",{points:"16 6 12 2 8 6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15"}]];return n.$$set=o=>{t(1,e=oe(oe({},e),ot(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ot(e),[s,e,r,i]}class fb extends We{constructor(e){super(),Ge(this,e,hb,ub,Oe,{})}}function db(n){let e;const t=n[2].default,r=Ye(t,n,n[3],null);return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s&8)&&Je(r,t,i,i[3],e?Xe(t,i[3],s,null):Ze(i[3]),null)},i(i){e||(x(r,i),e=!0)},o(i){q(r,i),e=!1},d(i){r&&r.d(i)}}}function pb(n){let e,t;const r=[{name:"trash-2"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[db]},$$scope:{ctx:n}};for(let s=0;s<r.length;s+=1)i=oe(i,r[s]);return e=new Pa({props:i}),{c(){pe(e.$$.fragment)},m(s,o){fe(e,s,o),t=!0},p(s,[o]){const l=o&3?Le(r,[r[0],o&2&&pt(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(l.$$scope={dirty:o,ctx:s}),e.$set(l)},i(s){t||(x(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){de(e,s)}}}function mb(n,e,t){let{$$slots:r={},$$scope:i}=e;const s=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]];return n.$$set=o=>{t(1,e=oe(oe({},e),ot(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=ot(e),[s,e,r,i]}class gb extends We{constructor(e){super(),Ge(this,e,mb,pb,Oe,{})}}function _u(n,e,t){const r=n.slice();return r[12]=e[t],r}function _b(n){let e,t,r,i,s;return i=new fn({props:{$$slots:{default:[yb]},$$scope:{ctx:n}}}),i.$on("click",n[7]),{c(){e=J("section"),t=J("p"),t.textContent="User not found",r=Ee(),pe(i.$$.fragment),C(e,"class","svelte-1r7o28n")},m(o,l){j(o,e,l),K(e,t),K(e,r),fe(i,e,null),s=!0},p(o,l){const c={};l&131072&&(c.$$scope={dirty:l,ctx:o}),i.$set(c)},i(o){s||(x(i.$$.fragment,o),s=!0)},o(o){q(i.$$.fragment,o),s=!1},d(o){o&&U(e),de(i)}}}function yb(n){let e;return{c(){e=le("Create new user profile")},m(t,r){j(t,e,r)},d(t){t&&U(e)}}}function vb(n){let e,t,r,i=n[10].username+"",s,o,l,c,u=Zr(n[10].createdAt.toDate())+"",f,p,m=n[10].userID+"",v,A,O,k,D,P,L,R,N,z,E,_,w,T,I;function b(re,he){return re[10].referrerID?wb:bb}let y=b(n),H=y(n);const ne=[Rb,Ab],te=[];function se(re,he){return re[1]?0:1}k=se(n),D=te[k]=ne[k](n),L=new Of({});let M={ctx:n,current:null,token:null,hasCatch:!0,pending:Ob,then:Vb,catch:Cb,value:11,error:15};zt(_=Eu(n[0].userID),M);let Z=n[1]&&vu(n);return{c(){e=J("section"),t=J("h1"),r=le("Referrer: @"),s=le(i),o=Ee(),l=J("p"),c=le("Joined on "),f=le(u),p=le(". ID: "),v=le(m),A=Ee(),H.c(),O=Ee(),D.c(),P=Ee(),pe(L.$$.fragment),R=Ee(),N=J("section"),z=J("h2"),z.textContent="Referred Users",E=Ee(),M.block.c(),w=Ee(),Z&&Z.c(),T=Fe(),C(t,"class","mb-2 scroll-m-20 text-3xl font-extrabold tracking-tight lg:text-5xl"),C(e,"class","svelte-1r7o28n"),C(z,"class","mt-10 scroll-m-20 border-b pb-2 text-3xl font-semibold tracking-tight transition-colors first:mt-0"),C(N,"class","svelte-1r7o28n")},m(re,he){j(re,e,he),K(e,t),K(t,r),K(t,s),K(e,o),K(e,l),K(l,c),K(l,f),K(l,p),K(l,v),K(e,A),H.m(e,null),K(e,O),te[k].m(e,null),j(re,P,he),fe(L,re,he),j(re,R,he),j(re,N,he),K(N,z),K(N,E),M.block.m(N,M.anchor=null),M.mount=()=>N,M.anchor=null,j(re,w,he),Z&&Z.m(re,he),j(re,T,he),I=!0},p(re,he){n=re,(!I||he&1)&&i!==(i=n[10].username+"")&&dt(s,i),(!I||he&1)&&u!==(u=Zr(n[10].createdAt.toDate())+"")&&dt(f,u),(!I||he&1)&&m!==(m=n[10].userID+"")&&dt(v,m),y===(y=b(n))&&H?H.p(n,he):(H.d(1),H=y(n),H&&(H.c(),H.m(e,O)));let be=k;k=se(n),k===be?te[k].p(n,he):(Ve(),q(te[be],1,1,()=>{te[be]=null}),De(),D=te[k],D?D.p(n,he):(D=te[k]=ne[k](n),D.c()),x(D,1),D.m(e,null)),M.ctx=n,he&1&&_!==(_=Eu(n[0].userID))&&zt(_,M)||hi(M,n,he),n[1]?Z?(Z.p(n,he),he&2&&x(Z,1)):(Z=vu(n),Z.c(),x(Z,1),Z.m(T.parentNode,T)):Z&&(Ve(),q(Z,1,1,()=>{Z=null}),De())},i(re){I||(x(D),x(L.$$.fragment,re),x(Z),I=!0)},o(re){q(D),q(L.$$.fragment,re),q(Z),I=!1},d(re){re&&(U(e),U(P),U(R),U(N),U(w),U(T)),H.d(),te[k].d(),de(L,re),M.block.d(),M.token=null,M=null,Z&&Z.d(re)}}}function bb(n){let e;return{c(){e=J("p"),e.textContent="Joined without a referrer.",C(e,"class","text-lg font-semibold")},m(t,r){j(t,e,r)},p:X,d(t){t&&U(e)}}}function wb(n){let e,t,r={ctx:n,current:null,token:null,hasCatch:!0,pending:Ib,then:Tb,catch:Eb,value:16,error:15};return zt(t=li(n[10].referrerID),r),{c(){e=Fe(),r.block.c()},m(i,s){j(i,e,s),r.block.m(i,r.anchor=s),r.mount=()=>e.parentNode,r.anchor=e},p(i,s){n=i,r.ctx=n,s&1&&t!==(t=li(n[10].referrerID))&&zt(t,r)||hi(r,n,s)},d(i){i&&U(e),r.block.d(i),r.token=null,r=null}}}function Eb(n){let e,t,r=n[10].referrerID+"",i,s,o=n[15].message+"",l;return{c(){e=J("p"),t=le("Something went wrong fetching referrer ("),i=le(r),s=le("): "),l=le(o)},m(c,u){j(c,e,u),K(e,t),K(e,i),K(e,s),K(e,l)},p(c,u){u&1&&r!==(r=c[10].referrerID+"")&&dt(i,r),u&1&&o!==(o=c[15].message+"")&&dt(l,o)},d(c){c&&U(e)}}}function Tb(n){let e,t,r,i,s=n[16].username+"",o,l,c,u;return{c(){e=J("p"),t=le("Referred by: "),r=J("a"),i=le("@"),o=le(s),C(r,"href",l="/referral/"+n[16].userID),C(r,"class","font-medium text-primary underline underline-offset-4"),C(e,"class","text-lg font-semibold")},m(f,p){j(f,e,p),K(e,t),K(e,r),K(r,i),K(r,o),c||(u=ci(Go.call(null,r)),c=!0)},p(f,p){p&1&&s!==(s=f[16].username+"")&&dt(o,s),p&1&&l!==(l="/referral/"+f[16].userID)&&C(r,"href",l)},d(f){f&&U(e),c=!1,u()}}}function Ib(n){let e;return{c(){e=J("p"),e.textContent="Getting referrer ..."},m(t,r){j(t,e,r)},p:X,d(t){t&&U(e)}}}function Ab(n){let e,t;return e=new fn({props:{$$slots:{default:[Sb]},$$scope:{ctx:n}}}),e.$on("click",n[5]),{c(){pe(e.$$.fragment)},m(r,i){fe(e,r,i),t=!0},p(r,i){const s={};i&131072&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){q(e.$$.fragment,r),t=!1},d(r){de(e,r)}}}function Rb(n){let e,t,r,i,s;return t=new fn({props:{$$slots:{default:[kb]},$$scope:{ctx:n}}}),t.$on("click",n[3]),i=new fn({props:{$$slots:{default:[Pb]},$$scope:{ctx:n}}}),i.$on("click",n[4]),{c(){e=J("div"),pe(t.$$.fragment),r=Ee(),pe(i.$$.fragment),C(e,"class","mt-4 flex flex-wrap gap-2")},m(o,l){j(o,e,l),fe(t,e,null),K(e,r),fe(i,e,null),s=!0},p(o,l){const c={};l&131072&&(c.$$scope={dirty:l,ctx:o}),t.$set(c);const u={};l&131072&&(u.$$scope={dirty:l,ctx:o}),i.$set(u)},i(o){s||(x(t.$$.fragment,o),x(i.$$.fragment,o),s=!0)},o(o){q(t.$$.fragment,o),q(i.$$.fragment,o),s=!1},d(o){o&&U(e),de(t),de(i)}}}function Sb(n){let e;return{c(){e=le("See your own referrals")},m(t,r){j(t,e,r)},d(t){t&&U(e)}}}function kb(n){let e,t,r;return e=new lb({props:{class:"mr-2 h-4 w-4"}}),{c(){pe(e.$$.fragment),t=le(`
						Copy referral link`)},m(i,s){fe(e,i,s),j(i,t,s),r=!0},p:X,i(i){r||(x(e.$$.fragment,i),r=!0)},o(i){q(e.$$.fragment,i),r=!1},d(i){i&&U(t),de(e,i)}}}function Pb(n){let e,t,r;return e=new fb({props:{class:"mr-2 h-4 w-4"}}),{c(){pe(e.$$.fragment),t=le(`
						Share referral link`)},m(i,s){fe(e,i,s),j(i,t,s),r=!0},p:X,i(i){r||(x(e.$$.fragment,i),r=!0)},o(i){q(e.$$.fragment,i),r=!1},d(i){i&&U(t),de(e,i)}}}function Cb(n){let e,t,r=n[15].message+"",i;return{c(){e=J("p"),t=le("Something went wrong: "),i=le(r)},m(s,o){j(s,e,o),K(e,t),K(e,i)},p(s,o){o&1&&r!==(r=s[15].message+"")&&dt(i,r)},d(s){s&&U(e)}}}function Vb(n){let e;function t(s,o){return s[11]?Nb:Db}let r=t(n),i=r(n);return{c(){i.c(),e=Fe()},m(s,o){i.m(s,o),j(s,e,o)},p(s,o){r===(r=t(s))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){s&&U(e),i.d(s)}}}function Db(n){let e;return{c(){e=J("p"),e.textContent="No referred users"},m(t,r){j(t,e,r)},p:X,d(t){t&&U(e)}}}function Nb(n){let e,t,r,i,s,o=n[11].length+"",l,c=Gt(n[11]),u=[];for(let f=0;f<c.length;f+=1)u[f]=yu(_u(n,c,f));return{c(){e=J("ul");for(let f=0;f<u.length;f+=1)u[f].c();t=Ee(),r=J("p"),i=le("Referred users count: "),s=J("span"),l=le(o),C(e,"class","ml-6 list-disc [&>li]:mt-2"),C(s,"class","font-bold"),C(r,"class","text-lg")},m(f,p){j(f,e,p);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(e,null);j(f,t,p),j(f,r,p),K(r,i),K(r,s),K(s,l)},p(f,p){if(p&1){c=Gt(f[11]);let m;for(m=0;m<c.length;m+=1){const v=_u(f,c,m);u[m]?u[m].p(v,p):(u[m]=yu(v),u[m].c(),u[m].m(e,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=c.length}p&1&&o!==(o=f[11].length+"")&&dt(l,o)},d(f){f&&(U(e),U(t),U(r)),jo(u,f)}}}function yu(n){let e,t,r,i=n[12].username+"",s,o,l,c=Zr(n[12].createdAt.toDate())+"",u,f,p,m;return{c(){e=J("li"),t=J("a"),r=le("@"),s=le(i),l=le(`
								, on `),u=le(c),f=Ee(),C(t,"href",o="/referral/"+n[12].userID),C(t,"class","font-medium text-primary underline underline-offset-4")},m(v,A){j(v,e,A),K(e,t),K(t,r),K(t,s),K(e,l),K(e,u),K(e,f),p||(m=ci(Go.call(null,t)),p=!0)},p(v,A){A&1&&i!==(i=v[12].username+"")&&dt(s,i),A&1&&o!==(o="/referral/"+v[12].userID)&&C(t,"href",o),A&1&&c!==(c=Zr(v[12].createdAt.toDate())+"")&&dt(u,c)},d(v){v&&U(e),p=!1,m()}}}function Ob(n){let e;return{c(){e=J("p"),e.textContent="Getting referred users ..."},m(t,r){j(t,e,r)},p:X,d(t){t&&U(e)}}}function vu(n){let e,t,r,i,s;e=new Of({});function o(){return n[6](n[10])}return i=new fn({props:{variant:"destructive",$$slots:{default:[Mb]},$$scope:{ctx:n}}}),i.$on("click",o),{c(){pe(e.$$.fragment),t=Ee(),r=J("section"),pe(i.$$.fragment),C(r,"class","svelte-1r7o28n")},m(l,c){fe(e,l,c),j(l,t,c),j(l,r,c),fe(i,r,null),s=!0},p(l,c){n=l;const u={};c&131072&&(u.$$scope={dirty:c,ctx:n}),i.$set(u)},i(l){s||(x(e.$$.fragment,l),x(i.$$.fragment,l),s=!0)},o(l){q(e.$$.fragment,l),q(i.$$.fragment,l),s=!1},d(l){l&&(U(t),U(r)),de(e,l),de(i)}}}function Mb(n){let e,t,r;return e=new gb({props:{class:"mr-2 h-4 w-4"}}),{c(){pe(e.$$.fragment),t=le(`
					Delete account`)},m(i,s){fe(e,i,s),j(i,t,s),r=!0},p:X,i(i){r||(x(e.$$.fragment,i),r=!0)},o(i){q(e.$$.fragment,i),r=!1},d(i){i&&U(t),de(e,i)}}}function Lb(n){let e;return{c(){e=J("p"),e.textContent="Getting user ...",C(e,"class","p-4")},m(t,r){j(t,e,r)},p:X,i:X,o:X,d(t){t&&U(e)}}}function Fb(n){let e,t,r,i,s,o={ctx:n,current:null,token:null,hasCatch:!0,pending:Lb,then:vb,catch:_b,value:10,blocks:[,,,]};return zt(t=li(n[0].userID),o),i=new eb({}),{c(){e=J("main"),o.block.c(),r=Ee(),pe(i.$$.fragment),C(e,"class","flex flex-col items-start")},m(l,c){j(l,e,c),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=r,K(e,r),fe(i,e,null),s=!0},p(l,[c]){n=l,o.ctx=n,c&1&&t!==(t=li(n[0].userID))&&zt(t,o)||hi(o,n,c)},i(l){s||(x(o.block),x(i.$$.fragment,l),s=!0)},o(l){for(let c=0;c<3;c+=1){const u=o.blocks[c];q(u)}q(i.$$.fragment,l),s=!1},d(l){l&&U(e),o.block.d(),o.token=null,o=null,de(i)}}}function xb(n,e,t){let r;const{initData:i}=ys();let{params:s}=e,o,l;ms(async()=>{var A,O;o=`https://t.me/MiniAppsQuestDevBot/Referral?startapp=${(A=i==null?void 0:i.user)==null?void 0:A.id}`;const v=`
@${(O=i==null?void 0:i.user)==null?void 0:O.username} is inviting you to MiniAppQuest Referral App`;l=`https://t.me/share/url?url=${encodeURIComponent(o)}&text=${encodeURIComponent(v)}`});function c(){navigator.clipboard.writeText(o),W0.success("Referral link copied!")}function u(){Nu("web_app_open_link",{url:l})}const f=()=>{var v;return rr(`/referral/${(v=i==null?void 0:i.user)==null?void 0:v.id}`)},p=v=>tw(v),m=()=>rr("/newReferral");return n.$$set=v=>{"params"in v&&t(0,s=v.params)},n.$$.update=()=>{var v;n.$$.dirty&1&&t(1,r=((v=i==null?void 0:i.user)==null?void 0:v.id.toString())===s.userID)},[s,r,i,c,u,f,p,m]}class bu extends We{constructor(e){super(),Ge(this,e,xb,Fb,Oe,{params:0})}}function Bb(n){let e;return{c(){e=le("No referrer ID")},m(t,r){j(t,e,r)},p:X,d(t){t&&U(e)}}}function Ub(n){let e,t=n[0].referrerID+"",r;return{c(){e=le("Link referrer ID: "),r=le(t)},m(i,s){j(i,e,s),j(i,r,s)},p(i,s){s&1&&t!==(t=i[0].referrerID+"")&&dt(r,t)},d(i){i&&(U(e),U(r))}}}function jb(n){var i,s;let e,t,r={ctx:n,current:null,token:null,hasCatch:!0,pending:Xb,then:$b,catch:qb,value:4,blocks:[,,,]};return zt(li((s=(i=n[1])==null?void 0:i.user)==null?void 0:s.id.toString()),r),{c(){e=Fe(),r.block.c()},m(o,l){j(o,e,l),r.block.m(o,r.anchor=l),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(o,l){n=o,hi(r,n,l)},i(o){t||(x(r.block),t=!0)},o(o){for(let l=0;l<3;l+=1){const c=r.blocks[l];q(c)}t=!1},d(o){o&&U(e),r.block.d(o),r.token=null,r=null}}}function qb(n){let e,t,r,i,s,o={ctx:n,current:null,token:null,hasCatch:!1,pending:Hb,then:Gb,catch:zb,blocks:[,,,]};return zt(i=Tu({userID:n[1].user.id.toString(),username:n[1].user.username,referrerID:n[0].referrerID,createdAt:Be.now()}),o),{c(){e=J("p"),e.textContent="Seems like you are joining us for the first time ðŸ˜‰",t=Ee(),r=Fe(),o.block.c()},m(l,c){j(l,e,c),j(l,t,c),j(l,r,c),o.block.m(l,o.anchor=c),o.mount=()=>r.parentNode,o.anchor=r,s=!0},p(l,c){n=l,o.ctx=n,c&1&&i!==(i=Tu({userID:n[1].user.id.toString(),username:n[1].user.username,referrerID:n[0].referrerID,createdAt:Be.now()}))&&zt(i,o)||hi(o,n,c)},i(l){s||(x(o.block),s=!0)},o(l){for(let c=0;c<3;c+=1){const u=o.blocks[c];q(u)}s=!1},d(l){l&&(U(e),U(t),U(r)),o.block.d(l),o.token=null,o=null}}}function zb(n){return{c:X,m:X,p:X,i:X,o:X,d:X}}function Gb(n){let e,t,r=n[0].referrerID+"",i,s,o,l;return o=new fn({props:{$$slots:{default:[Wb]},$$scope:{ctx:n}}}),o.$on("click",n[3]),{c(){e=J("p"),t=le("Created referral user with referrerID as "),i=le(r),s=Ee(),pe(o.$$.fragment)},m(c,u){j(c,e,u),K(e,t),K(e,i),j(c,s,u),fe(o,c,u),l=!0},p(c,u){(!l||u&1)&&r!==(r=c[0].referrerID+"")&&dt(i,r);const f={};u&32&&(f.$$scope={dirty:u,ctx:c}),o.$set(f)},i(c){l||(x(o.$$.fragment,c),l=!0)},o(c){q(o.$$.fragment,c),l=!1},d(c){c&&(U(e),U(s)),de(o,c)}}}function Wb(n){let e;return{c(){e=le("View profile")},m(t,r){j(t,e,r)},d(t){t&&U(e)}}}function Hb(n){let e;return{c(){e=J("p"),e.textContent="Creating referral user ..."},m(t,r){j(t,e,r)},p:X,i:X,o:X,d(t){t&&U(e)}}}function $b(n){let e,t,r,i,s,o,l;function c(p,m){return p[4].referrerID?Qb:Kb}let f=c(n)(n);return o=new fn({props:{$$slots:{default:[Yb]},$$scope:{ctx:n}}}),o.$on("click",n[2]),{c(){f.c(),e=Ee(),t=J("p"),t.textContent="âš ï¸ User already created. Cannot assign a referrer.",r=Ee(),i=J("p"),i.textContent=`User account created on ${Zr(n[4].createdAt.toDate())}.`,s=Ee(),pe(o.$$.fragment)},m(p,m){f.m(p,m),j(p,e,m),j(p,t,m),j(p,r,m),j(p,i,m),j(p,s,m),fe(o,p,m),l=!0},p(p,m){f.p(p,m);const v={};m&32&&(v.$$scope={dirty:m,ctx:p}),o.$set(v)},i(p){l||(x(o.$$.fragment,p),l=!0)},o(p){q(o.$$.fragment,p),l=!1},d(p){p&&(U(e),U(t),U(r),U(i),U(s)),f.d(p),de(o,p)}}}function Kb(n){let e;return{c(){e=J("p"),e.textContent="You already joined without a referrer."},m(t,r){j(t,e,r)},p:X,d(t){t&&U(e)}}}function Qb(n){let e,t,r,i,s=n[4].referrerID+"",o,l,c;return{c(){e=J("p"),t=le(`Your current Referrer ID:
					`),r=J("a"),i=le("@"),o=le(s),C(r,"href","/referral/"+n[4].referrerID),C(r,"class","font-medium text-primary underline underline-offset-4"),C(e,"class","font-semibold")},m(u,f){j(u,e,f),K(e,t),K(e,r),K(r,i),K(r,o),l||(c=ci(Go.call(null,r)),l=!0)},p:X,d(u){u&&U(e),l=!1,c()}}}function Yb(n){let e;return{c(){e=le("View profile")},m(t,r){j(t,e,r)},d(t){t&&U(e)}}}function Xb(n){let e;return{c(){e=le("Getting user ...")},m(t,r){j(t,e,r)},p:X,i:X,o:X,d(t){t&&U(e)}}}function Jb(n){var p;let e,t,r,i,s,o;function l(m,v){return m[0].referrerID?Ub:Bb}let c=l(n),u=c(n),f=((p=n[1])==null?void 0:p.user)&&jb(n);return{c(){var m,v;e=J("main"),t=J("h1"),t.textContent=`Welcome, @${(v=(m=n[1])==null?void 0:m.user)==null?void 0:v.username}!`,r=Ee(),i=J("h2"),u.c(),s=Ee(),f&&f.c(),C(t,"class","mb-2 scroll-m-20 text-3xl font-extrabold tracking-tight lg:text-5xl"),C(i,"class","mt-10 scroll-m-20 pb-2 text-xl font-semibold tracking-tight transition-colors first:mt-0"),C(e,"class","space-y-2 p-4")},m(m,v){j(m,e,v),K(e,t),K(e,r),K(e,i),u.m(i,null),K(e,s),f&&f.m(e,null),o=!0},p(m,[v]){var A;c===(c=l(m))&&u?u.p(m,v):(u.d(1),u=c(m),u&&(u.c(),u.m(i,null))),(A=m[1])!=null&&A.user&&f.p(m,v)},i(m){o||(x(f),o=!0)},o(m){q(f),o=!1},d(m){m&&U(e),u.d(),f&&f.d()}}}function Zb(n,e,t){const{initData:r}=ys();let{params:i={}}=e;const s=()=>{var l;return rr(`/referral/${(l=r==null?void 0:r.user)==null?void 0:l.id}`)},o=()=>{var l;return rr(`/referral/${(l=r==null?void 0:r.user)==null?void 0:l.id}`)};return n.$$set=l=>{"params"in l&&t(0,i=l.params)},[i,r,s,o]}class wu extends We{constructor(e){super(),Ge(this,e,Zb,Jb,Oe,{params:0})}}const Ns=i0(P0,"playground/Referral System/Referrals"),ew={"/referral":bu,"/referral/:userID":bu,"/newReferral":wu,"/newReferral/:referrerID":wu};async function li(n){const e=Aa(Ns,Ra("userID","==",n)),t=await ka(e);if(t.size>0)return t.docs[0].data();throw new Error("User not found")}async function Eu(n){const e=Aa(Ns,Ra("referrerID","==",n)),t=await ka(e);return t.size>0?t.docs.map(r=>r.data()):[]}async function Tu(n){const e=s0(Ns);return await A0(e,n),e}async function tw(n){const e=Aa(Ns,Ra("userID","==",n.userID)),t=await ka(e);t.size>0&&(await R0(t.docs[0].ref),rr("/"))}function nw(n){let e,t,r;return t=new Vd({props:{routes:n[0]}}),{c(){e=J("main"),pe(t.$$.fragment)},m(i,s){j(i,e,s),fe(t,e,null),r=!0},p:X,i(i){r||(x(t.$$.fragment,i),r=!0)},o(i){q(t.$$.fragment,i),r=!1},d(i){i&&U(e),de(t)}}}function rw(n){const{initData:e}=ys();let t={"/":Dm,"/about":Om,...ew,"*":Fm};return ms(()=>{Nu("web_app_setup_back_button",{is_visible:!0}),Kd("back_button_pressed",i=>{Sd()});const r=e==null?void 0:e.startParam;r&&rr(`/newReferral/${r}`)}),[t]}class iw extends We{constructor(e){super(),Ge(this,e,rw,nw,Oe,{})}}new iw({target:document.getElementById("app")});
